var APF={log:function(a){}};APF.Namespace={register:function(d){var c=d.split(".");var a=window;for(var b=0;b<c.length;b++){if(typeof a[c[b]]=="undefined"){a[c[b]]=new Object()}a=a[c[b]]}return a}};APF.Utils={getWindowSize:function(){var b=0,a=0;if(typeof(window.innerWidth)=="number"){b=window.innerWidth;a=window.innerHeight}else{if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)){b=document.documentElement.clientWidth;a=document.documentElement.clientHeight}else{if(document.body&&(document.body.clientWidth||document.body.clientHeight)){b=document.body.clientWidth;a=document.body.clientHeight}}}return{width:b,height:a}},getScroll:function(){var b=0,a=0;if(typeof(window.pageYOffset)=="number"){a=window.pageYOffset;b=window.pageXOffset}else{if(document.body&&(document.body.scrollLeft||document.body.scrollTop)){a=document.body.scrollTop;b=document.body.scrollLeft}else{if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)){a=document.documentElement.scrollTop;b=document.documentElement.scrollLeft}}}return{left:b,top:a}},setCookie:function(c,e,a,h,d,g){var b=new Date();b.setTime(b.getTime());if(a){a=a*1000*60*60*24}var f=new Date(b.getTime()+(a));document.cookie=c+"="+escape(e)+((a)?";expires="+f.toGMTString():"")+((h)?";path="+h:"")+((d)?";domain="+d:"")+((g)?";secure":"")},getCookie:function(a){var f=document.cookie.split(";");var b="";var d="";var e="";var c=false;for(i=0;i<f.length;i++){b=f[i].split("=");d=b[0].replace(/^\s+|\s+$/g,"");if(d==a){c=true;if(b.length>1){e=unescape(b[1].replace(/^\s+|\s+$/g,""))}return e;break}b=null;d=""}if(!c){return null}},deleteCookie:function(a,c,b){if(this.getCookie(a)){document.cookie=a+"="+((c)?";path="+c:"")+((b)?";domain="+b:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT"}},setScrollTop:function(a){if(document.body){document.body.scrollTop=a;if(document.body.scrollTop==0){if(document.documentElement){document.documentElement.scrollTop=a}}}else{if(document.documentElement){document.documentElement.scrollTop=a}}},getScrollTop:function(){return document.body?document.body.scrollTop||document.documentElement.scrollTop:document.documentElement.scrollTop},gotoScrollTop:function(f,d){var b=APF.Utils.getScrollTop(),h=0,g=0;var d=d||1;var f=f||0;var a=b>f?1:0;(function(){b=APF.Utils.getScrollTop();h=a?b-f:f-b;g=a?b-h/15*d:b+1+h/15*d;APF.Utils.setScrollTop(g);if(h<=0||b==APF.Utils.getScrollTop()){return}setTimeout(arguments.callee,10)})()}};if(typeof JSON!=="object"){JSON={}}(function(){var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;function f(n){return n<10?"0"+n:n}function this_value(){return this.valueOf()}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};Boolean.prototype.toJSON=this_value;Number.prototype.toJSON=this_value;String.prototype.toJSON=this_value}var gap,indent,meta,rep;function quote(string){rx_escapable.lastIndex=0;return rx_escapable.test(string)?'"'+string.replace(rx_escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);rx_dangerous.lastIndex=0;if(rx_dangerous.test(text)){text=text.replace(rx_dangerous,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());APF.Namespace.register("ajk");(function(a){ajk.inherit=function(){var f=Array.prototype.splice,c=arguments;var b=c[c.length-1];f.apply(c,[-1,1]);var e=function(){for(var g=0;g<c.length;g++){if(c[g]){c[g].apply(this,arguments)}}b.apply(this,arguments)};for(var d=0;d<c.length;d++){if(c[d]){a.extend(e.prototype,c[d].prototype)}}a.extend(e.prototype,b.prototype);return e};ajk.Observer=function(){this.ob={}};ajk.Observer.prototype.on=function(g,f){var e=g.split(" ");var d={};for(var b=0;b<e.length;b++){if(!this.ob[e[b]]){this.ob[e[b]]=[]}var c=this.ob[e[b]].push(f);d[e[b]]=c-1}return d};ajk.Observer.prototype.off=function(b,d){if(d!==undefined&&!a.isArray(d)){d=[d]}for(var c=0;c<this.ob[b].length;c++){if(d===undefined||a.inArray(c,d)>-1){this.ob[b][c]=undefined}}};ajk.Observer.prototype.trigger=function(c,d){var f;if(!this.ob[c]){return f}var b=d||[];for(var e=0;this.ob[c]&&e<this.ob[c].length;e++){if(!this.ob[c][e]){continue}var g=this.ob[c][e].apply(this,b);f=(f===false)?f:g}return f};ajk.Observer.prototype.once=function(c,e){var b=this;var d=b.on(c,function(){e.apply(this,arguments);b.off(c,d[c])})}})(jQuery);APF.Namespace.register("ajk");(function(){var logger;var siteName=(function(){var hostData=document.location.host.match(/^(\w+)\.(\w+)\./);if(hostData){return"pc"}else{return"unknown"}})();var rAf=function(callback){window.setTimeout(callback,1000/10)};ajk.Logger=logger={sojSite:"",sojPage:"",sojPageName:"",errorSite:siteName};logger.setSite=function(site){this.sojSite=site||""};logger.setPage=function(page){this.sojPage=page||""};logger.setPageName=function(pagename){this.sojPageName=pagename||""};logger.setCtid=function(ctid){this.ctid=ctid||""};logger.config={devLogURL:"//s.anjuke.test/ts.html?",logURL:"//m.anjuke.com/ts.html?",devSojURL:"//s.anjuke.test/stb",isDev:/dev|test/.test(document.domain),blackList:["Player","baiduboxapphomepagetag","onTouchMoveInPage"]};logger.isblack=function(str){var self=this;var i,reg,length,blackList=self.config.blackList;if(typeof str!=="string"){return true}for(i=0,length=blackList.length;i<length;i++){reg=new RegExp(blackList[i],"g");if(reg.test(str)){return true}}};logger.sendError=function(params){var self=this;var errorinfo="tp=error&site="+self.errorSite+"&msg=",key,url,arr=[],image,msg;if(typeof params==="string"){msg=params}if(typeof params==="object"){for(key in params){if(params.hasOwnProperty(key)){arr.push(key+":"+encodeURIComponent(JSON.stringify(params[key])))}}msg=arr.join(",")}if(self.isblack(msg)){return false}image=new Image();if(self.config.isDev){url=self.config.devLogURL+errorinfo+msg}else{url=self.config.logURL+errorinfo+msg}image.src=url;return true};var getScreen=function(){var sinfo={};sinfo.w=$(window).width().toString();sinfo.h=$(window).height().toString();sinfo.r=(window.devicePixelRatio&&window.devicePixelRatio>=2?1:0).toString();getScreen=function(){return sinfo};return sinfo};logger.sendSoj=function(op){var self=this;var _site=op.site||self.sojSite,soj=new SiteTracker(),t_params;if(op.customparam){soj.setCustomParam(op.customparam)}if(self.config.isDev){t_params={target_url:self.config.devSojURL}}var _page=op.page||self.sojPage,_ctid=self.ctid;var _pageName=op.pageName||self.sojPageName||_page;soj.setPage(_page);soj.setPageName(_pageName);soj.setSite(_site);soj.setScreen(getScreen());soj.setNCtid(_ctid);soj.setReferer(op.r||document.referrer);if(op.NGuid){soj.setNGuid(op.NGuid)}if(op.NUid){soj.setNUid(op.NUid)}if(op.h){if(!t_params){t_params={}}t_params.h=op.h}soj.track(t_params);try{if(!/npv/.test(_site)){var trackUrl=soj.getParams();delete trackUrl.cp;delete trackUrl.sc;window._trackURL=JSON.stringify(trackUrl);loadTrackjs()}}catch(e){}function loadTrackjs(){var s=document.createElement("script");s.type="text/javascript";s.async=true;s.src="//tracklog.58.com/referrer_anjuke_pc.js?_="+Math.random();var b=document.body;s.onload=function(){soj.setSite(_site+"-npv");soj.setPage(_page+"_tracklog");soj.setPageName(_pageName+"_tracklog");soj.track(t_params)};s.onerror=function(){soj.setSite(_site+"-npv");soj.setPage(_page+"_tracklog_error");soj.setPageName(_pageName+"_tracklog_error");soj.track(t_params)};b.appendChild(s)}};logger.track=function(p,cp,pn){if(!pn){pn=p}if($.isPlainObject(cp)){cp=JSON.stringify(cp)}logger.sendSoj({site:"anjuke-npv",page:p,pageName:pn,customparam:cp||""})};logger.addLinkSoj=function(selector,attr,param){$("body").on("click",selector,function(e){var soj=$(this).data(attr||"soj")||$(this).attr(attr||"_soj"),_soj=$.trim(soj),href=$.trim($(this).attr("href")),_param=param||"from",_target=$(this).attr("target"),_hasTarget=_target!==undefined,_href;if(!_soj){return}if(!href){return}if(href.toLowerCase().indexOf("javascript")===0){return}e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();href=href.replace(/(&from=(.)*$)|(\?from=(.)*$)/,"");_href=(href.indexOf("?")!==-1)?href+"&"+_param+"="+_soj:href+"?"+_param+"="+_soj;if(_hasTarget){if(!
/*@cc_on!@*/
0){var winoper=window.open(_href,_target);winoper&&winoper.focus()}else{var _el=document.createElement("a");_el.href=_href;_el.target=_target;$(_el).appendTo("body").get(0).click();$(_el).remove()}}else{location.href=_href}})};logger.Exposure=function(op){var defaults={site:"",trackTag:"data-trace",delay:50,page:"",pageName:"",NUid:"",NGuid:"",prefix:""};this.ops=$.extend(defaults,op);this.domCache=[];this.pageViewHeight=$(window).height();this.timer=null;this.dataCache=[];this.expStatus=false;this.init()};logger.Exposure.prototype={constructor:logger.Exposure,add:function(list){var _this=this;this.expStatus=true;list.each(function(index,el){_this.domCache.push($(el))})},init:function(){var wd=$(window),self=this;wd.resize($.proxy(this.resize,this));wd.on("beforeunload",$.proxy(this.beforeunload,this));rAf(scroll);function scroll(){rAf(scroll);if(!self.expStatus){return}clearTimeout(self.timer);if(self.domCache.length===0){self.expStatus=false;self.buildData();return}self.timer=setTimeout(function(){$.proxy(self.addData,self)()},self.ops.delay)}},resize:function(){this.pageViewHeight=$(window).height()},beforeunload:function(){this.buildData()},scroll:function(){},sendExp:function(result){logger.sendSoj({NGuid:this.ops.NGuid,NUid:this.ops.NUid,site:this.ops.site,page:this.ops.prefix+this.ops.page,pageName:this.ops.prefix+this.ops.pageName,customparam:result})},addData:function(){var pageViewHeight=this.pageViewHeight,topY=$(window).scrollTop(),botY=topY+pageViewHeight,_this=this;if(this.domCache.length===0){return}$.each(this.domCache,function(index,val){var _topY,attr;if(!val){return}_topY=val.offset?val.offset().top:0;if(_topY>topY&&_topY<botY){attr=val.attr(_this.ops.trackTag);if(attr){_this.dataCache.push(attr)}delete _this.domCache[index]}});this.buildData()},buildData:function(){var _this=this,result={},r=[],exp,key,length,i;if(this.dataCache.length===0){return}exp=eval("(["+this.dataCache.join(",")+"])");this.dataCache=[];for(i=0,length=exp.length;i<length;i++){for(key in exp[i]){if(!result[key]){result[key]=[]}result[key].push(exp[i][key])}}for(key in result){r.push('"'+key+'":['+result[key].join(",")+"]")}this.sendExp('{"exposure":{'+r.join(",")+"}}");$.each(this.domCache,function(index,val){if(!val){_this.domCache.splice(index,1)}})}};window.onerror=function(msg,url,line){logger.sendError({message:msg,url:url,line:line})};$(function(){logger.addLinkSoj("a[_soj]");if(window.top!==window){$("#trunk").hide()}})})();APF.Namespace.register("ajk");(function(){var a;ajk.DropDown=a=ajk.inherit(ajk.Observer,function(d,c,e){var b=this;b._op=$.extend({},{timer:500},e||{});b._target=d;b._list=c;b._timer;b.isOpen=false;b._bindEvent()});a.prototype._bindEvent=function(){var c=this;var b=function(){c._timer=setTimeout(function(){c.close()},c._op.timer)};c._target.on("mouseenter",function(){if(!c.isOpen){c.open()}});c._target.on("mouseleave",function(){if(c.isOpen){b()}});c._list.on("mouseenter",function(){clearTimeout(c._timer)});c._list.on("mouseleave",function(){if(c.isOpen){b()}});c._list.on("click",function(){c.close()})};a.prototype.open=function(){var b=this;if(b.trigger("open",arguments)!==false){b.isOpen=true;b._list.show()}};a.prototype.close=function(){var b=this;if(b.trigger("close",arguments)!==false){b.isOpen=false;b._list.hide()}}})();APF.Namespace.register("ajk");(function(a){ajk.DataCache=function(c){var b=this;b._cache=[];b.source=c};ajk.DataCache.prototype.get=function(l,k){var m=this,g=[],n=[],h=_.isArray(l)?l:[l];var b=function(o,j){if(!_.isArray(l)){k(o[0],j[0])}else{k(o,j)}};for(var e=0;e<h.length;e++){var c=m.find(h[e]);if(c!==null){g[e]=c}else{n.push({id:e,query:h[e]})}}if(n.length===0){b(g,h);return}for(var d=0,f=0;d<n.length;d++){(function(){var j=n[d];m.source(j.query,function(p){var o=m.add(j.query,p).data;g[j.id]=o;f++;if(f===n.length){b(g,h)}})})()}};ajk.DataCache.prototype.add=function(c,e){var b=this,d={key:c,data:e};b._cache.push(d);return d};ajk.DataCache.prototype.find=function(f){var d=this,c=null,e=0,b=d._cache.length;for(;e<b;e++){if(_.isEqual(d._cache[e].key,f)){c=d._cache[e].data;break}}return c}})(jQuery);APF.Namespace.register("ajk");(function(a){ajk.Autocomplete=ajk.inherit(ajk.Observer,function(c,e){var b='<ul class="auto-ul"><% _.each(obj,function(item){ %><li><span><%= item.keyword %></span><b>约<%= item.num %>套</b></li><%});%><ul>',d={dataSource:function(){},debounce:250,hasCache:true,insertDom:a("body"),template:_.template(b),itemSelector:"li",keySelector:"span",cursorClass:"auto-grayback",wrap:".auto-wrap",emptyFetch:false};this.op=a.extend({},d,e);this.op.wrapStyle=a.extend({},d.wrapStyle,e.wrapStyle);this.el=c;this._init()});ajk.Autocomplete.prototype._init=function(){this.wrap=null;this.sourceChecked=null;this.dataCenter=[];this.keyword=null;this._createWrap();this.resetCursored();this._checkSource();this._delay=false;if(this.op.hasCache){this.dataCache=new ajk.DataCache(this.sourceChecked)}this._bindEvent()};ajk.Autocomplete.prototype._createWrap=function(){if(this.op.wrap.constructor==jQuery){this.wrap=this.op.wrap.eq(0)}else{if(_.isString(this.op.wrap)){var c=a.trim(this.op.wrap);var b=c.substring(0,1);if(b=="."){this.wrap=a('<div class="'+c.slice(1)+'"></div>')}else{if(b=="<"){this.wrap=a(c)}}this.wrap.appendTo(this.op.insertDom)}}};ajk.Autocomplete.prototype._bindEvent=function(){this._onKeyup();this._onMouseover();this._onClick();this._onFocus();this._onBlur();this._isEnterWrap();this._onMousedown()};ajk.Autocomplete.prototype._onKeyup=function(){var b=this;b.el.on("keyup",function(c){b._updateKeyword();switch(c.keyCode){case 35:case 36:case 16:case 17:case 18:case 37:case 39:break;case 40:b.cursor(+1,true);break;case 38:b.cursor(-1,true);break;case 13:if(b.cursorIndex!=-1){b.select(b.wrap.find(b.op.itemSelector).eq(b.cursorIndex))}break;default:b._inputCheck(b.keyword);break}})};ajk.Autocomplete.prototype._isEnterWrap=function(){var b=this;b.wrap.on("mouseover",function(){b._delay=true});b.wrap.on("mouseout",function(){b._delay=false})};ajk.Autocomplete.prototype._onMouseover=function(){var b=this;b.wrap.on("mouseover",b.op.itemSelector,function(){b.cursorIndex=_index=a(this).index();b.cursor(_index)})};ajk.Autocomplete.prototype._onClick=function(){var b=this;b.wrap.on("click",b.op.itemSelector,function(){b.select(a(this))})};ajk.Autocomplete.prototype._onFocus=function(){var b=this;b.el.on("focus",function(){b._updateKeyword();b._inputCheck(b.keyword);if(b.trigger("onfocus",arguments)!==false){b.el.css("border-color","#f60")}})};ajk.Autocomplete.prototype._onMousedown=function(){var b=this;b.wrap.on("mousedown",function(c){c.preventDefault();b.cancelBlur=true;if(b.wrap.find(c.target).length>0){delete b.cancelBlur}})};ajk.Autocomplete.prototype._onBlur=function(){var b=this;b.el.on("blur",function(){if(b.cancelBlur){delete b.cancelBlur;return}if(b.trigger("onblur",arguments)!==false){b.el.css("border-color","#ccc");if(b._delay){setTimeout(function(){b.hide()},150)}else{b.hide()}}})};ajk.Autocomplete.prototype._updateKeyword=function(b){this.keyword=b||this.el.val()};ajk.Autocomplete.prototype._inputCheck=function(b){if(a.trim(b)===""){this.trigger("empty");if(this.op.emptyFetch){this.input(b)}}else{this.input(b)}};ajk.Autocomplete.prototype._checkSource=function(){var b=this;if(a.isFunction(b.op.dataSource)){b.sourceChecked=_.debounce(b.op.dataSource,b.op.debounce)}else{if(a.isArray(b.op.dataSource)){b.sourceChecked=b.op.dataSource}}};ajk.Autocomplete.prototype._updateData=function(){var c=this;if(a.isFunction(c.sourceChecked)){if(c.op.hasCache){c.dataCache.get(c.keyword,b)}else{c.sourceChecked(c.keyword,b)}}else{if(a.isArray(c.sourceChecked)){c.dataCenter=c.sourceChecked;c._render()}}function b(d){c.dataCenter=d;c._render()}};ajk.Autocomplete.prototype._render=function(){this.wrap.html(this.op.template(this.dataCenter));this.resetCursored();if(this.wrap.find(this.op.itemSelector).length>0){this.show()}else{this.hide()}};ajk.Autocomplete.prototype.show=function(){this.wrap.show()};ajk.Autocomplete.prototype.hide=function(){this.wrap.hide()};ajk.Autocomplete.prototype.resetCursored=function(){this.cursorIndex=-1;this.wrap.find(this.op.itemSelector).removeClass(this.op.cursorClass)};ajk.Autocomplete.prototype.cursor=function(f,e){var c=this,j,b,d={},h=arguments[1]===undefined?false:arguments[1],g=c.wrap.find(c.op.itemSelector);if(!h){j=f}else{j=c.cursorIndex+f;if(j>g.length-1){j=0}else{if(j<0){j=g.length-1}}}b=g.eq(j);d={index:j,item:b,data:c.dataCenter[j]};c.cursorIndex=j;if(c.trigger("cursored",[d])!==false){g.removeClass(c.op.cursorClass);b.addClass(c.op.cursorClass)}};ajk.Autocomplete.prototype.select=function(e){var d=this,g=e.index(),f={index:g,item:e,data:d.dataCenter[g]};var c=this.trigger("beforeSelected",[f]);var b=e.find(d.op.keySelector).text();d.el.val(c||b);if(this.trigger("selected",[f])!==false){d.hide()}};ajk.Autocomplete.prototype.input=function(b){if(this.trigger("inputed",arguments)!==false){self.keyword=b;this._updateData()}}})(jQuery);APF.Namespace.register("ajk.UserLogin");(function(){var a;ajk.UserLogin=a=ajk.inherit(ajk.Observer,function(c){var b=this;b._op=$.extend({},{userbox:"#userbox"},c||{});b._userDate=null;b._init()});a.prototype._init=function(){var b=this;b.userbox=$(b._op.userbox);if(APF.Utils.getCookie("aQQ_ajkauthinfos")){b._op.getUserInfo({},function(c){if(c.code===0){b._userDate=c.data;b.updateUserInfo()}b._bindEvent()})}else{b._bindEvent()}};a.prototype._bindEvent=function(){var b=this;if(!b.isLogin()){new ajk.DropDown($(".brokerlogin>.link"),$(".brokerlogin>ul"))}new ajk.DropDown($(".userlogin>.link"),$(".userlogin>ul"))};a.prototype.updateUserInfo=function(){var b=this;if(!b.isLogin()){return}var c=b.getUserHtml();b.userbox.html(c)};a.prototype.isLogin=function(){return this._userDate&&this._userDate.user_id};a.prototype.getUserHtml=function(){var c=this._userDate;var k=c.menu_list;var b="";for(var f=0,d=k.length;f<d;f++){var h=k[f];for(var e=0,l=h.length;e<l;e++){b=b+'<li><a href="'+h[e].url+'">'+h[e].name+"</a></li>"}if(f<d-1){b=b+'<li class="hr"></li>'}}var g='<div class="userlogin userblock userblockfirst"><i class="icon icon-people"></i><a class="link" href="'+c.entry_url+'" rel="nofollow" title="'+c.user_name+'">'+c.user_name+'</a><i class="triangle-down"></i><ul>'+b+"</ul></div>";return g}})();(function(a){a(function(){var b=function(c){var e=c;var d=setTimeout(function(){e.hide()},500);e.data("hiddenTimer",d)};a("#footer").on("click","[data-target]",function(d){d.preventDefault();var c=a(this).data("target");a("#"+c).toggle()});a("#footer").on("mouseout","[data-target]",function(){var c=a(this).data("target");b(a("#"+c))});a("#loan_link, #other_city, #map_link, #house_link, #seo_qa").hover(function(){var c=a(this).data("hiddenTimer");clearTimeout(c)},function(){b(a(this))})})})(jQuery);APF.Namespace.register("ajk.pc");(function($){var sideBar;ajk.pc.sideBar=sideBar=function(op){this._op=$.extend({},{sideBarBox:$(".sidebar"),toTop:$(".sidebar-top"),sidebarNav:$(".sidebar-mod a"),minWidth:1280,minTop:400},op||{});this.init()};sideBar.prototype.init=function(){var self=this;self.addLinkSoj("a[data-soj]");self.checkVisible();$(window).on("scroll resize",function(){self.checkVisible()});self._op.toTop.on("click",function(e){self.sendSoj({site:"anjuke-npv",pn:"track_back_top_click"});$("html,body").animate({scrollTop:0},100)});$("#sid_survey").on("click",function(){self.sendSoj({site:"anjuke-npv",pn:"track_survey_click"})})};sideBar.prototype.checkVisible=function(){var self=this,winWidth=$(window).width(),scrollTop=$(window).scrollTop();if(winWidth>self._op.minWidth){self._op.sideBarBox.show();self._op.sideBarBox.stop().animate({right:"0px"},100);self._op.toTop.removeClass("sd-top-sig")}else{self._op.sideBarBox.stop().animate({right:"-40px"},100);self._op.toTop.addClass("sd-top-sig")}if(scrollTop>self._op.minTop){self._op.toTop.show()}else{self._op.toTop.hide()}self.slideNav()};sideBar.prototype.slideNav=function(){var self=this;self._op.sidebarNav.hover(function(){var hoverWidth=$(this).children(".sidebar-nav-hover").hasClass("sidebar-sao")?"130px":"90px";$(this).children(".sidebar-nav-hover").stop().animate({width:hoverWidth},100)},function(){$(this).children(".sidebar-nav-hover").stop().animate({width:"0px"},100)})};sideBar.prototype.sendSoj=function(op){var self=this;if(ajk&&ajk.Logger){ajk.Logger.sendSoj({page:op.pn,site:op.site,pageName:op.pn})}else{if(J&&J.site&&J.site.trackEvent){J.site.trackEvent(op.pn)}}};sideBar.prototype.addLinkSoj=function(selector,attr,param){$("body").on("click",selector,function(e){var soj=$(this).data(attr||"soj")||$(this).attr(attr||"data-soj"),_soj=$.trim(soj),href=$.trim($(this).attr("href")),_param=param||"from",_target=$(this).attr("target"),_hasTarget=_target!==undefined,_href;if(!_soj){return}if(!href){return}if(href.toLowerCase().indexOf("javascript")===0){return}e.preventDefault();e.stopPropagation();href=href.replace(/(&from=(.)*$)|(\?from=(.)*$)/,"");_href=(href.indexOf("?")!==-1)?href+"&"+_param+"="+_soj:href+"?"+_param+"="+_soj;if(_hasTarget){if(!
/*@cc_on!@*/
0){var winoper=window.open(_href,_target);winoper&&winoper.focus()}else{var _el=document.createElement("a");_el.href=_href;_el.target=_target;$(_el).appendTo("body").get(0).click();$(_el).remove()}}else{location.href=_href}})}})(jQuery);$(function(){$("#navigation>li").hover(function(){$(this).addClass("hover")},function(){$(this).removeClass("hover")});var a=$(".nav-triangle");a.each(function(d,c){var g=$(this);var e=g.parent().parent(),f=0;e&&(f=(e.width()-14)/2);g.css("left",f)});var b=$("#user_box");b.hover(function(){b.addClass("hover")},function(){b.removeClass("hover")})});(function(b){APF.Namespace.register("ajk.VideoPlayer");var a=ajk.VideoPlayer=ajk.inherit(ajk.Observer,function(c){this.op=b.extend({videoPath:"http://www.zhangxinxu.com/study/media/cat.mp4",supplied:"webmv, ogv, m4v",size:{width:"100%",height:"350px"},useStateClassSkin:true,autoBlur:false,smoothPlayBar:true,keyEnabled:false,remainingDuration:true,toggleDuration:true},c);this.dom={videoBox:b(this.op.container),videoWin:b(".jp-jplayer"),playBtn:b(".jp-play"),stopBtn:b(".jp-stop"),repeatBtn:b(".jp-repeat"),toggleBtn:b("[toggle]"),volumnMax:b(".jp-volume-max"),volumnBar:b(".jp-volume-bar"),stateDialog:b(".jp-state-dialog"),networkDialog:b(".jp-networkError-dialog"),closeBtn:b(".jp-btn-close"),reloadBtn:b(".jp-btn-reload"),tipsTitle:b(".jp-state-text"),tipsBtn:b(".jp-state-button")},this.state={waiting:undefined,reloadTimes:0,errored:false,stalled:false,finished:false};this.tips={errored:{title:"视频信息获取失败，请刷新重试",btn:"刷新"},stalled:{title:"视频加载中…",btn:false},finished:{title:"视频播放完毕",btn:"重新播放"}};this.init();this.acts()});a.prototype.init=function(){var c=this;c.dom.videoWin.jPlayer({ready:function(){b(this).jPlayer("setMedia",{m4v:c.op.videoPath})},error:function(d){c.handleError(d)},swfPath:c.op.swfPath,supplied:c.op.supplied,size:c.op.size,preload:"none",useStateClassSkin:true,autoBlur:false,smoothPlayBar:true,keyEnabled:false,remainingDuration:true,toggleDuration:true})};a.prototype.acts=function(){var c=this;c.dom.volumnMax.click(function(d){b(this).addClass("active")});c.dom.repeatBtn.click(function(){b(this).toggleClass("active")});c.dom.volumnBar.click(function(){c.dom.volumnMax.removeClass("active")});c.dom.videoWin.on(b.jPlayer.event.waiting,function(d){c.state.stalled=true;c.state.waiting=setTimeout(function(){if(c.state.stalled&&!c.state.errored){c.showTips(c.tips.stalled)}},3000)});c.dom.videoWin.on(b.jPlayer.event.playing,function(d){c.state.finished=false;c.state.errored=false;c.state.stalled=false;clearTimeout(c.state.waiting);c.hideTips()});c.dom.videoWin.on(b.jPlayer.event.ended,function(d){c.state.finished=true;c.showTips(c.tips.finished);if(c.op.sendEndSoj&&c.op.sendEndSoj.length>0){if(ajk&&ajk.Logger&&ajk.Logger.sendSoj){ajk.Logger.sendSoj({page:c.op.sendEndSoj,pageName:c.op.sendEndSoj,site:"anjuke-npv"})}else{if(window.J&&J.site&&J.site.trackEvent){J.site.trackEvent(c.op.sendEndSoj)}}}});c.dom.videoWin.on(b.jPlayer.event.error,function(d){c.state.errored=true;c.showTips(c.tips.errored)});c.dom.closeBtn.click(function(){c.dom.stateDialog.hide()});c.dom.reloadBtn.click(function(){if(c.state.errored){if(++c.state.reloadTimes>=5){location.reload()}else{c.play()}}else{if(c.state.finished){c.hideTips();c.play()}}})};a.prototype.show=function(c){var d=this;c?d.dom.videoBox.show():d.dom.videoBox.hide()};a.prototype.showTips=function(f){var d=this;var e=f.title;var c=f.btn;if(e){d.dom.tipsTitle.html(e)}if(c){d.dom.tipsBtn.show();d.dom.tipsBtn.html(c)}if(c===false){d.dom.tipsBtn.hide()}d.dom.networkDialog.show()};a.prototype.hideTips=function(d,c){this.dom.networkDialog.hide()};a.prototype.play=function(d){var c=this;switch(d){case"play":c.dom.videoWin.jPlayer("play");break;case"stop":c.dom.videoWin.jPlayer("stop");break;case"repeat":c.dom.repeatBtn.trigger("click");break;default:c.dom.videoWin.jPlayer("play")}};a.prototype.resetMedia=function(d){var c=this;c.dom.videoWin.jPlayer("setMedia",{m4v:d})};a.prototype.handleError=function(c){}})(jQuery);APF.Namespace.register("SwitchWidthMap");(function(f){SwitchWidthMap.Switch=SwitchObj=function(g){this.roomCount=a(f("#room_pic_wrap"));this.panoramaCount=0;if(f("#qj_pic_wrap").length>0){this.panoramaCount=1}this.hxCount=a(f("#hx_pic_wrap"));this.surroundCount=a(f("#surround_pic_wrap"));this.allImgNum=this.roomCount+this.hxCount+this.surroundCount+this.panoramaCount;this.count=1;this.speed=300;this.lazyLoadNum=g.lazyLoadNum||2;if(f.trim(g.speed)!==""){this.speed=g.speed}this.initLeft=0;this.initRight=0;this.initHx=0;this.initSurround=0;this.item={zhankengFirst:f("#zhankeng_first"),zhankengLast:f("#zhankeng_last"),switchLeftMask:f("#switch_left_mask"),switchRightMask:f("#switch_right_mask"),tabMask:f(".switch_mask"),switchWrap:f("#switch_wrap"),roomPicWrap:f("#room_pic_wrap"),hxPicWrap:f("#hx_pic_wrap"),surroundPicWrap:f("#surround_pic_wrap"),switchTabWrap:f("#switch_tab_wrap"),switchLeftBtn:f("#switch_left_btn"),switchRightBtn:f("#switch_right_btn"),roomTab:f("#room_tab"),panoramaTab:f("#panoramaTab"),hxTab:f("#hx_tab"),surroundTab:f("#surround_tab"),mapTab:f("#map_tab"),innerSwitcher:f("#inner_switcher"),$orImgs:f(".img_wrap img"),videoImg:f(".img_video"),videoEntrance:f("#video-player-icon,.img_wrap>img")};this.marginLeft=+f("#room_pic_wrap").children(".img_wrap").css("margin-left").replace("px","")||0;this.imgWidth=f("#room_pic_wrap").children(".img_wrap").width();this.switchMaskWidth=this.item.switchLeftMask.width();this.imgSwitchWidth=this.imgWidth+this.marginLeft;this.mapSwitchWidth=this.imgSwitchWidth+this.switchMaskWidth+this.marginLeft;if(g.initFirst){this.initFirst=g.initFirst}this.init()};SwitchObj.prototype.init=function(){var g=this;if(this.initFirst){this.initFirst(this)}this.setFirstAndLastImg();this.bindEvent();var h=f(".switch_tag");g.item.mapTab.css({height:g.item.switchTabWrap.height()-(h.height()+2)*(h.length-1)-2});this.setArrowTitle();this.addSoj()};SwitchObj.prototype.videoToggle=function(h){var g=this;if(!window.VideoPlayer){return}if(h=="on"){g.item.videoImg.find("img,.video-player").hide();VideoPlayer.show(true);setTimeout(function(){VideoPlayer.play("play")},200)}else{setTimeout(function(){g.item.videoImg.find("img,.video-player").show();VideoPlayer.show(false);VideoPlayer.play("stop")},200)}};SwitchObj.prototype.bindEvent=function(){var g=this;g.item.videoEntrance.on("click",function(h){g.videoToggle("on")});g.item.switchLeftMask.on("click",function(l){l.preventDefault();if(!g.item.switchWrap.is(":animated")){var k=g.item.switchWrap.css("left").replace("px",""),j=g.getThisImgIndex(Math.abs(k)),m=g.item.$orImgs.length;if(j==0){j=m}for(var h=0;h<g.lazyLoadNum;h++){d(f(g.item.$orImgs[j-1-h]))}g.item.switchWrap.animate({left:g.getLeftPX()},g.speed,function(){g.countMM();if(g.isBeyondFirst()){g.setCount(g.allImgNum);g.item.switchWrap.animate({left:g.initRight},0,function(){})}if(g.isGetRoom()){c(g.item.roomTab)}else{if(g.isGetHx()){c(g.item.hxTab)}else{if(g.isGetSurround()){c(g.item.surroundTab)}else{if(g.isPanorama()){c(g.item.panoramaTab)}}}}g.setArrowTitle()})}g.videoToggle()});g.item.switchRightMask.on("click",function(l){l.preventDefault();if(!g.item.switchWrap.is(":animated")){var k=g.item.switchWrap.css("left").replace("px",""),j=g.getThisImgIndex(Math.abs(k));for(var h=0;h<g.lazyLoadNum;h++){d(f(g.item.$orImgs[j+1+h]))}g.item.switchWrap.animate({left:g.getRightPX()},g.speed,function(){g.countPP();if(g.isBeyondLast()){g.setCount(1);g.item.switchWrap.animate({left:g.initLeft},0,function(){})}if(g.isGetRoom()){c(g.item.roomTab)}else{if(g.isGetHx()){c(g.item.hxTab)}else{if(g.isGetSurround()){c(g.item.surroundTab)}else{if(g.isPanorama()){c(g.item.panoramaTab)}}}}g.setArrowTitle()})}g.videoToggle()});g.item.switchTabWrap.on("click",".switch_tag",function(m){var j=false;g.item.switchTabWrap.find(".switch_tag").each(function(n,o){if(f(o).attr("id")=="panoramaTab"){j=true}});m.preventDefault();var k=f(this).index()+1,l=this;g.item.innerSwitcher.removeClass("margin_hide");if(!g.item.switchWrap.is(":animated")){var h=g.getTabSwitchPX(k);if(j){if(k=="4"){g.setCount(g.roomCount+g.hxCount+2);h=(parseInt(g.initSurround)-600)+"px"}}g.item.switchWrap.animate({left:h},g.speed,function(){var p=g.item.switchWrap.css("left").replace("px",""),o=g.getThisImgIndex(Math.abs(p));for(var n=0;n<g.lazyLoadNum;n++){d(f(g.item.$orImgs[o+n]))}});c(f(l));g.setArrowTitle()}g.sendSoj({site:"anjuke-npv",pn:f(this).data("track")});g.videoToggle()})};SwitchObj.prototype.setArrowTitle=function(){var j=this.count,h=this,g=["室内图片","全景看房","户型图片","环境图片"];f.each(["#prev-title","#next-title"],function(m,o){var n=h.allImgNum,l=0;if(m===0){l=j-1>0?j-1:n}else{l=j+1>n?1:j+1}f.each(["isGetRoom","isPanorama","isGetHx","isGetSurround"],function(p,k){if(h[k](l)){f(o).html(g[p]);return false}})})};SwitchObj.prototype.getThisImgIndex=function(l){var h=this,g=Math.abs(h.initLeft),k=h.item.switchWrap.width()-h.item.zhankengFirst.width()-h.item.zhankengLast.width(),j=l-g;return j/h.imgSwitchWidth};SwitchObj.prototype.setFirstAndLastImg=function(){var j=this,h=this.item.$orImgs,o=h.clone(),g=o.length,n=j.item.zhankengFirst.children(".zhankeng_img1"),l=j.item.zhankengFirst.children(".zhankeng_img2"),m=j.item.zhankengLast.children(".zhankeng_img1"),k=j.item.zhankengLast.children(".zhankeng_img2");n.append(o[g-2]);l.append(o[g-1]);m.append(o[0]);k.append(o[1]);j.initLeft=-j.item.zhankengFirst.width()+j.switchMaskWidth;j.initRight=-(j.item.switchWrap.width()-j.item.zhankengLast.width()-j.marginLeft-j.imgWidth-j.switchMaskWidth);j.initHx=-(j.item.zhankengFirst.width()+j.item.roomPicWrap.width()-j.switchMaskWidth);j.initSurround=-(j.item.zhankengFirst.width()+j.item.roomPicWrap.width()+j.item.hxPicWrap.width()-j.switchMaskWidth);j.item.switchWrap.animate({left:j.initLeft},0,function(){});d(f(n).children());d(f(l).children());d(f(m).children());d(f(k).children());d(f(f(".img_wrap img")[1]));d(f(f(".img_wrap img")[2]));d(f(f(".img_wrap img")[3]))};SwitchObj.prototype.countPP=function(){++this.count};SwitchObj.prototype.countMM=function(){--this.count};SwitchObj.prototype.setCount=function(g){if(g!==undefined){this.count=g}};SwitchObj.prototype.isGetFirst=function(){return this.count===0};SwitchObj.prototype.isGetRoom=function(g){if(f.type(g)==="undefined"){g=this.count}return g>=1&&g<=this.roomCount};SwitchObj.prototype.isPanorama=function(g){if(f.type(g)==="undefined"){g=this.count}return g>=(this.roomCount+1)&&g<=this.roomCount+this.panoramaCount};SwitchObj.prototype.isGetHx=function(g){if(f.type(g)==="undefined"){g=this.count}return g>=(this.roomCount+this.panoramaCount+1)&&g<=(this.roomCount+this.panoramaCount+this.hxCount)};SwitchObj.prototype.isGetSurround=function(g){if(f.type(g)==="undefined"){g=this.count}return g>=(this.roomCount+this.panoramaCount+this.hxCount+1)&&g<=(this.roomCount+this.panoramaCount+this.hxCount+this.surroundCount)};SwitchObj.prototype.isBeyondFirst=function(){return this.count===0};SwitchObj.prototype.isBeyondLast=function(){return this.count===this.allImgNum+1};SwitchObj.prototype.getLeftPX=function(g){return"+="+this.imgSwitchWidth+"px"};SwitchObj.prototype.getRightPX=function(){var g="";g="-="+this.imgSwitchWidth+"px";return g};SwitchObj.prototype.getTabSwitchPX=function(h){var g=this;switch(h){case 1:g.setCount(1);return g.initLeft;break;case 2:g.setCount(g.roomCount+1);return g.initHx;break;case 3:g.setCount(g.roomCount+g.hxCount+1);return g.initSurround;break}};SwitchObj.prototype.addSoj=function(h){var g=this;g.item.switchLeftMask.click(function(j){g.sendSoj({site:"anjuke-npv",pn:f(this).data("track")})});g.item.switchRightMask.click(function(j){g.sendSoj({site:"anjuke-npv",pn:f(this).data("track")})})};SwitchObj.prototype.sendSoj=function(h){var g=this;if(ajk&&ajk.Logger){ajk.Logger.sendSoj({page:h.pn,site:h.site,pageName:h.pn})}else{if(J&&J.site&&J.site.trackEvent){J.site.trackEvent(h.pn)}}};var e=b();function d(j){var h=f.trim(j.data("src"));if(!h){return}var g=new Image;g.onload=function(){j.attr("src",g.src)};g.src=e?h+"?t=5":h}function b(){return false;var g=new Image();g.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA";return g&&g.width===2}function a(g){return g.children().length}function c(g){g.addClass("switch_tag_now").siblings().removeClass("switch_tag_now")}})(jQuery);(function(a){a(".peitao-item-more").click(function(){a(this).hide();a(".house-info-peitao").find(".none").removeClass("none")})})(jQuery);APF.Namespace.register("ajk");(function(a){ajk.ReadMore=ajk.inherit(ajk.Observer,function(d,f){var e=a(d);var c=this;var b=d.selector;e.each(function(g,h){if(!(c instanceof ajk.ReadMore)){return new ajk.ReadMore(h,f)}var j={speed:100,collapsedHeight:200,heightMargin:16,moreLink:'<a href="#">显示全部</a>',lessLink:'<a href="#">收起</a>',embedBlockCSS:false,blockCSS:"display:block; width:100%;",embedLinkCSS:true,linkCSS:"display:block;text-align:right",startOpen:false,scrollTop:100,scrollContainer:window};c.readmore="readmore";c.cssEmbedded={};c.el=a(h);c.options=a.extend({},j,f);c.options.selector=b;c.embedCSS(c.options);c.init();a(window).resize(c,c.resizeBoxes);a(window).load(c,c.resizeBoxes)})});ajk.ReadMore.uniqueIdCounter=0;ajk.ReadMore.prototype.uniqueId=function(c){var b=++ajk.ReadMore.uniqueIdCounter;return String(c==null?"rmjs-":c)+b};ajk.ReadMore.prototype.init=function(){var d=this;var f=d.el;f.data({defaultHeight:d.options.collapsedHeight,heightMargin:d.options.heightMargin});d.setBoxHeights(f);var b=f.data("collapsedHeight"),e=f.data("heightMargin");if(f.outerHeight(true)<=b+e){d.trigger("blockProcessed",d,f,false)}else{var g=f.attr("id")||d.uniqueId(),c=d.options.startOpen?d.options.lessLink:d.options.moreLink;f.attr({"data-readmore":"","aria-expanded":d.options.startOpen,id:g});f.after(a(c).on("click",(function(h){return function(j){h.toggle.call(h,this,f[0],j)}})(d)).attr({"data-readmore-toggle":g,"aria-controls":g}));if(!d.options.startOpen){f.css({height:b})}d.trigger("blockProcessed",d,f,true)}};ajk.ReadMore.prototype.toggle=function(l,g,d){var m=this;if(d){d.preventDefault()}if(!l){l=a('[aria-controls="'+m.element.id+'"]')[0]}if(!g){g=m.element}var k=a(g),b="",e="",h=false,f=k.data("collapsedHeight");if(k.height()<=f){b=k.data("expandedHeight")+"px";e="lessLink";h=true}else{b=f;e="moreLink"}m.trigger("beforeToggle",l,k,!h);k.css({height:b});if(!h){var n=k.offset().top;var c=a(m.options.scrollContainer);var j=c.scrollTop();if(j>n-m.options.scrollTop){c.scrollTop(n-m.options.scrollTop)}}k.on("transitionend",(function(o){return function(){o.trigger("afterToggle",l,k,h);a(this).attr({"aria-expanded":h}).off("transitionend")}})(m));a(l).replaceWith(a(m.options[e]).on("click",(function(o){return function(p){o.toggle.call(o,this,g,p)}})(m)).attr({"data-readmore-toggle":k.attr("id"),"aria-controls":k.attr("id")}))};ajk.ReadMore.prototype.debounce=function(c,e,b){var d;return function(){var j=this,h=arguments;var g=function(){d=null;if(!b){c.apply(j,h)}};var f=b&&!d;clearTimeout(d);d=setTimeout(g,e);if(f){c.apply(j,h)}}};ajk.ReadMore.prototype.setBoxHeights=function(d){var g=d.clone().css({height:"auto",width:d.width(),maxHeight:"none",overflow:"hidden"}).insertAfter(d),c=g.outerHeight(),f=parseInt(g.css({maxHeight:""}).css("max-height").replace(/[^-\d\.]/g,""),10),e=d.data("defaultHeight");g.remove();var b=f||d.data("collapsedHeight")||e;d.data({expandedHeight:c,maxHeight:f,collapsedHeight:b}).css({maxHeight:"none"})};ajk.ReadMore.prototype.embedCSS=function(c){var b=this;if(!b.cssEmbedded[b.options.selector]){var d=" ";if(b.options.embedBlockCSS&&b.options.blockCSS!==""){d+=b.options.selector+" + [data-readmore]{ "+b.options.blockCSS+"}"}if(b.options.embedLinkCSS&&b.options.linkCSS!==""){d+=b.options.selector+" + [data-readmore-toggle]{"+b.options.linkCSS+"}"}d+=b.options.selector+"[data-readmore]{transition: height "+b.options.speed+"ms;overflow: hidden;}";(function(g,e){var f=g.createElement("style");f.type="text/css";if(f.styleSheet){f.styleSheet.cssText=e}else{f.appendChild(g.createTextNode(e))}g.getElementsByTagName("head")[0].appendChild(f)}(document,d));b.cssEmbedded[b.options.selector]=true}};ajk.ReadMore.prototype.resizeBoxes=function(c){var b=c.data;return b.debounce(function(){a("[data-readmore]").each(function(){var d=a(this),e=(d.attr("aria-expanded")==="true");b.setBoxHeights(d);d.css({height:d.data((e?"expandedHeight":"collapsedHeight"))})})},100)}})(jQuery);function HouseInfoGeneral(){var link_info=link_info;var getLinks=$("#proLinks");if(getLinks.length!=0&&link_info){var param={BrokerId:link_info.broker_id,ProId:link_info.prop_id,CommId:link_info.comm_id,searchUrl:link_info.prop_search_url_pre};$.ajax({url:"/ajax/ajaxviewpropsaley/",type:"get",data:param,success:function(data){var obj=eval("("+data+")");if(obj.num==0){getLinks.hide()}else{var housetag=obj.housetag,xqutag=obj.xqutag;(housetag.length!=0||xqutag.length!=0)?getLinks.show():getLinks.hide();if(housetag.length!=0){var houseHtml="";housetag.each(function(v,i){houseHtml+='<a href="'+param.searchUrl+housetag[i]+'" target="_blank" rel="nofollow">'+housetag[i]+"</a>"});getLinks.eq(0).append(houseHtml)}}}})}var houseExplainReadMore=new ajk.ReadMore($(".js-house-explain"),{collapsedHeight:160,moreLink:'<a class="readmore-icon" href="javascript:;"><span class="iconfont" >\uE097</span>显示全部</a>',lessLink:'<a class="readmore-icon" href="javascript:;"><span class="iconfont" >\uE096</span>收起</a>'});$(".houseInfo-desc .tips-icon-truesingleold").hover(function(e){$(".houseInfo-desc .tips-box-truesingleold").show()},function(e){$(".houseInfo-desc .tips-box-truesingleold").hide()})}APF.Namespace.register("CommMap");(function(b){CommMap.Map=BaiduMap=function(f){var d=this,e={minZoom:f.minZoom,maxZoom:f.maxZoom};this.showItems=["traffic","business","school","medical"];if(f.bmapOps){e=b.extend(e,f.bmapOps)}if(f.initFirst){this.initFirst=f.initFirst}if(f.showBtns){this.showItems=f.showBtns}this.map=new BMap.Map("bmap",e);this.common=f.common;this.point=new BMap.Point(f.common.point.lng,f.common.point.lat);this.radius=f.radius||2000;this.capacity=f.capacity||30;this.config={traffic:{keyword:["地铁","公交"],data:{subway:{className:"ftr_subway",data:null},bus:{className:"ftr_bus",data:null}}},business:{keyword:["餐饮","超市","卖场","银行","ATM"],data:{restaurant:{className:"ftr_restaurant",data:null},supermarkert:{className:"ftr_supermarkert",data:null},mall:{className:"ftr_mall",data:null},bank:{className:"ftr_bank",data:null},ATM:{className:"ftr_ATM",data:null}}},school:{keyword:["大学","中学","小学","幼儿园"],data:{school:{className:"ftr_school",data:null}}},medical:{keyword:["医院"],data:{hospital:{className:"ftr_hospital",data:null}}},hotel:{keyword:["酒店"],data:{hotel:{className:"ftr_hotel",data:null}}},park:{keyword:["公园"],data:{park:{className:"ftr_park",data:null}}}};this.map.centerAndZoom(d.point,f.initScale);this.init()};BaiduMap.prototype.addOverlays=function(){var d=this;function e(){}e.prototype=new BMap.Overlay();e.prototype.initialize=function(){var g=this.$node=new c().node;g.children(".common_name").html(d.common.name);g.on("mouseover mouseout",function(h){if(h.type==="mouseover"){}else{if(h.type==="mouseout"){}}});d.map.getPanes().labelPane.appendChild(g[0]);return g[0]};e.prototype.draw=function(){var g=d.map.pointToOverlayPixel(d.point);this.$node.css({left:g.x-15+"px",top:g.y-58+"px"})};var f=new BMap.Circle(d.point,1000,{strokeColor:"#CCC297",fillColor:"#CCC297",fillOpacity:0.3,strokeWeight:1,strokeOpacity:0.5});d.map.addOverlay(f);d.map.addOverlay(new e())};BaiduMap.prototype.getSurroundData=function(){var d=this;var f=new BMap.LocalSearch(d.point,{onSearchComplete:function(m){d.setKind(m);var n=true;for(var k=0,h=d.showItems.length;k<h;k++){var l=d.config[d.showItems[k]].data;if(l){for(var j in l){if(l[j].data==null){n=false}break}}}if(n){d.bindSwitchEvent()}}});f.setPageCapacity(d.capacity);for(var e=0;e<d.showItems.length;e++){var g=d.config[d.showItems[e]].keyword;f.searchNearby(g,d.point,d.radius)}};BaiduMap.prototype.setKind=function(e){var d=this;b.each(e,function(){var j=this,h={};switch(j.keyword){case"地铁":h.type="traffic";h.subType="subway";break;case"公交":h.type="traffic";h.subType="bus";break;case"餐饮":h.type="business";h.subType="restaurant";break;case"超市":h.type="business";h.subType="supermarkert";break;case"卖场":h.type="business";h.subType="mall";break;case"银行":h.type="business";h.subType="bank";break;case"ATM":h.type="business";h.subType="ATM";break;case"大学":h.type="school";h.subType="school";break;case"中学":h.type="school";h.subType="school";break;case"小学":h.type="school";h.subType="school";break;case"幼儿园":h.type="school";h.subType="school";break;case"医院":h.type="medical";h.subType="hospital";break;case"酒店":h.type="hotel";h.subType="hotel";break;case"公园":h.type="park";h.subType="park";break}var f=g(j);function g(l){var k=[];b.each(l,function(){var m=this;if(m.push&&m.length>0){k=m}});return k}b.each(f,function(){if(this.point!==undefined&&(d.map.getDistance(new BMap.Point(this.point.lng,this.point.lat),d.point)).toFixed(0)>d.radius){if(f.indexOf){f.splice(f.indexOf(this),1)}}});d.config[h.type]["data"][h.subType]["data"]=f})};BaiduMap.prototype.setSurroundData=function(e){var d=this;b.each(d.config[e]["data"],function(){var h=this,g=h.className,j=h.data;b.each(j,function(){if(this.point!==undefined&&(d.map.getDistance(new BMap.Point(this.point.lng,this.point.lat),d.point)).toFixed(0)<d.radius){f(this,g)}})});function f(h,g){function j(m,k){var l=this;this.p=new BMap.Point(m.point.lng,m.point.lat);this.d=(d.map.getDistance(l.p,d.point)).toFixed(0);this.o=m;this.c=k}j.prototype=new BMap.Overlay();j.prototype.initialize=function(){var k=this.$node=new a().node;k.addClass(this.c);if(!this.o.address||this.o.address.length<=0){this.o.address=""}k.children(".layout_detail").children(".layout_title").html(this.o.title);k.children(".layout_detail").children(".layout_title").attr("title",this.o.title);k.children(".layout_detail").children(".distance_tag").children(".distance").html(this.d);k.children(".layout_detail").children(".distance_address").html(this.o.address);d.map.getPanes().labelPane.appendChild(k[0]);return k[0]};j.prototype.draw=function(){var k=d.map.pointToOverlayPixel(this.p);this.$node.css({left:k.x-15,top:k.y-30})};d.map.addOverlay(new j(h,g))}};BaiduMap.prototype.bindSwitchEvent=function(){var d=this;if(d.showItems.length>0){d.setSurroundData(d.showItems[0])}else{d.setSurroundData("traffic")}b("#map_tag_wrap a").on("click",function(h){d.map.clearOverlays();d.addOverlays();d.setSurroundData(b(this).attr("id"));var g=b("body").data("page")||"";var f=g+"_map_"+b(this).attr("id");if(ajk&&ajk.Logger){ajk.Logger.sendSoj({page:f,pageName:f,site:"anjuke-npv"})}else{J.site.trackEvent(f)}b(this).addClass("map_action selected");b(this).siblings("a").removeClass("map_action").removeClass("selected")});b("#map_tag_wrap a").hover(function(f){if(b(this).hasClass("selected")){return}b(this).addClass("map_action")},function(){if(b(this).hasClass("selected")){return}b(this).removeClass("map_action")});b("#traffic_map_wrap").on("click","#zoomout_btn",function(f){d.map.setZoom(d.map.getZoom()+1)});b("#traffic_map_wrap").on("click","#zoomin_btn",function(f){d.map.setZoom(d.map.getZoom()-1)})};BaiduMap.prototype.init=function(e){var d=this;d.initFirst&&d.initFirst(d);d.addOverlays();d.getSurroundData()};function c(){this.node=b('<div class="common" id="common"><p class="common_name"></p><i class="common_arrow_ico"></i><i class="common_pos_ico"></i></div>')}function a(){this.node=b('<div class="layout_wrap"><div class="layout_detail"><h5 class="layout_title" title=""></h5><p class="distance_address"></p><div class="distance_tag"><i></i><span class="distance"></span>m</div><i class="layout_detail_down"></i></div></div>')}})(jQuery);(function(j){var e="0.4.2",k="hasOwnProperty",b=/[\.\/]/,a="*",g=function(){},f=function(n,m){return n-m},d,h,l={n:{}},c=function(m,C){m=String(m);var v=l,s=h,w=Array.prototype.slice.call(arguments,2),y=c.listeners(m),x=0,u=false,p,o=[],t={},q=[],n=d,A=[];d=m;h=0;for(var r=0,B=y.length;r<B;r++){if("zIndex" in y[r]){o.push(y[r].zIndex);if(y[r].zIndex<0){t[y[r].zIndex]=y[r]}}}o.sort(f);while(o[x]<0){p=t[o[x++]];q.push(p.apply(C,w));if(h){h=s;return q}}for(r=0;r<B;r++){p=y[r];if("zIndex" in p){if(p.zIndex==o[x]){q.push(p.apply(C,w));if(h){break}do{x++;p=t[o[x]];p&&q.push(p.apply(C,w));if(h){break}}while(p)}else{t[p.zIndex]=p}}else{q.push(p.apply(C,w));if(h){break}}}h=s;d=n;return q.length?q:null};c._events=l;c.listeners=function(m){var u=m.split(b),s=l,y,t,n,q,x,p,r,v,w=[s],o=[];for(q=0,x=u.length;q<x;q++){v=[];for(p=0,r=w.length;p<r;p++){s=w[p].n;t=[s[u[q]],s[a]];n=2;while(n--){y=t[n];if(y){v.push(y);o=o.concat(y.f||[])}}}w=v}return o};c.on=function(m,p){m=String(m);if(typeof p!="function"){return function(){}}var r=m.split(b),q=l;for(var n=0,o=r.length;n<o;n++){q=q.n;q=q.hasOwnProperty(r[n])&&q[r[n]]||(q[r[n]]={n:{}})}q.f=q.f||[];for(n=0,o=q.f.length;n<o;n++){if(q.f[n]==p){return g}}q.f.push(p);return function(s){if(+s==+s){p.zIndex=+s}}};c.f=function(n){var m=[].slice.call(arguments,1);return function(){c.apply(null,[n,null].concat(m).concat([].slice.call(arguments,0)))}};c.stop=function(){h=1};c.nt=function(m){if(m){return new RegExp("(?:\\.|\\/|^)"+m+"(?:\\.|\\/|$)").test(d)}return d};c.nts=function(){return d.split(b)};c.off=c.unbind=function(n,s){if(!n){c._events=l={n:{}};return}var u=n.split(b),t,w,o,q,x,p,r,v=[l];for(q=0,x=u.length;q<x;q++){for(p=0;p<v.length;p+=o.length-2){o=[p,1];t=v[p].n;if(u[q]!=a){if(t[u[q]]){o.push(t[u[q]])}}else{for(w in t){if(t[k](w)){o.push(t[w])}}}v.splice.apply(v,o)}}for(q=0,x=v.length;q<x;q++){t=v[q];while(t.n){if(s){if(t.f){for(p=0,r=t.f.length;p<r;p++){if(t.f[p]==s){t.f.splice(p,1);break}}!t.f.length&&delete t.f}for(w in t.n){if(t.n[k](w)&&t.n[w].f){var m=t.n[w].f;for(p=0,r=m.length;p<r;p++){if(m[p]==s){m.splice(p,1);break}}!m.length&&delete t.n[w].f}}}else{delete t.f;for(w in t.n){if(t.n[k](w)&&t.n[w].f){delete t.n[w].f}}}t=t.n}}};c.version=e;c.toString=function(){return"You are running Eve "+e};(typeof module!="undefined"&&module.exports)?(module.exports=c):(typeof define!="undefined"?(define("eve",[],function(){return c})):(j.eve=c))})(window||this);(function(b,a){if(typeof define==="function"&&define.amd){define(["eve"],function(c){return a(b,c)})}else{a(b,b.eve)}}(this,function(be,u){function aG(g){if(aG.is(g,"function")){return af?g():u.on("drag.DOMload",g)}else{if(aG.is(g,aW)){return aG._engine.create[bq](aG,g.splice(0,3+aG.is(g[0],aA))).add(g)}else{var b=Array.prototype.slice.call(arguments,0);if(aG.is(b[b.length-1],"function")){var d=b.pop();return af?d.call(aG._engine.create[bq](aG,b)):u.on("drag.DOMload",function(){d.call(aG._engine.create[bq](aG,b))})}else{return aG._engine.create[bq](aG,arguments)}}}}aG.version="2.1.2";aG.eve=u;var af,a=/[, ]+/,bf={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},a9=/\{(\d+)\}/g,bt="prototype",ab="hasOwnProperty",ao={doc:document,win:be},q={was:Object.prototype[ab].call(ao.win,"Drag"),is:ao.win.Drag},bo=function(){this.ca=this.customAttributes={}},aR,a6="appendChild",bq="apply",bn="concat",T=("ontouchstart" in ao.win)||ao.win.DocumentTouch&&ao.doc instanceof DocumentTouch,aL="",aF=" ",br=String,z="split",K="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[z](aF),bg={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},bu=br.prototype.toLowerCase,aj=Math,l=aj.max,a4=aj.min,al=aj.abs,a7=aj.pow,aJ=aj.PI,aA="number",aa="string",aW="array",aS="toString",aU="fill",aP=Object.prototype.toString,bi={},j="push",f=aG._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,x=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,ak={"NaN":1,"Infinity":1,"-Infinity":1},c=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,Y=aj.round,w="setAttribute",ae=parseFloat,M=parseInt,bb=br.prototype.toUpperCase,p=aG._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://smallmo.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Drag",transform:"",width:0,x:0,y:0},ai=aG._availableAnimAttrs={blur:aA,"clip-rect":"csv",cx:aA,cy:aA,fill:"colour","fill-opacity":aA,"font-size":aA,height:aA,opacity:aA,path:"path",r:aA,rx:aA,ry:aA,stroke:"colour","stroke-opacity":aA,"stroke-width":aA,transform:"transform",width:aA,x:aA,y:aA},W=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]/g,a1=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,m={hs:1,rg:1},aZ=/,?([achlmqrstvxz]),?/gi,aO=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,Z=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,aE=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/ig,aK=aG._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,aI={},a8=function(g,d){return g.key-d.key},r=function(g,d){return ae(g)-ae(d)},C=function(){},bk=function(b){return b},an=aG._rectPath=function(b,R,d,g,E){if(E){return[["M",b+E,R],["l",d-E*2,0],["a",E,E,0,0,1,E,E],["l",0,g-E*2],["a",E,E,0,0,1,-E,E],["l",E*2-d,0],["a",E,E,0,0,1,-E,-E],["l",0,E*2-g],["a",E,E,0,0,1,E,-E],["z"]]}return[["M",b,R],["l",d,0],["l",0,g],["l",-d,0],["z"]]},D=function(b,E,g,d){if(d==null){d=g}return[["M",b,E],["m",0,-d],["a",g,d,0,1,1,0,2*d],["a",g,d,0,1,1,0,-2*d],["z"]]},H=aG._getPath={path:function(b){return b.attr("path")},circle:function(d){var b=d.attrs;return D(b.cx,b.cy,b.r)},ellipse:function(d){var b=d.attrs;return D(b.cx,b.cy,b.rx,b.ry)},rect:function(d){var b=d.attrs;return an(b.x,b.y,b.width,b.height,b.r)},image:function(d){var b=d.attrs;return an(b.x,b.y,b.width,b.height)},text:function(b){var d=b._getBBox();return an(d.x,d.y,d.width,d.height)},set:function(b){var d=b._getBBox();return an(d.x,d.y,d.width,d.height)}},F=aG.mapPath=function(bx,S){if(!S){return bx}var bv,R,g,b,bw,E,d;bx=O(bx);for(g=0,bw=bx.length;g<bw;g++){d=bx[g];for(b=1,E=d.length;b<E;b+=2){bv=S.x(d[b],d[b+1]);R=S.y(d[b],d[b+1]);d[b]=bv;d[b+1]=R}}return bx};aG._g=ao;aG.type=(ao.win.SVGAngle||ao.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML");if(aG.type=="VML"){var at=ao.doc.createElement("div"),ax;at.innerHTML='<v:shape adj="1"/>';ax=at.firstChild;ax.style.behavior="url(#default#VML)";if(!(ax&&typeof ax.adj=="object")){return(aG.type=aL)}at=null}aG.svg=!(aG.vml=aG.type=="VML");aG._Paper=bo;aG.fn=aR=bo.prototype=aG.prototype;aG._id=0;aG._oid=0;aG.is=function(d,b){b=bu.call(b);if(b=="finite"){return !ak[ab](+d)}if(b=="array"){return d instanceof Array}return(b=="null"&&d===null)||(b==typeof d&&d!==null)||(b=="object"&&d===Object(d))||(b=="array"&&Array.isArray&&Array.isArray(d))||aP.call(d).slice(8,-1).toLowerCase()==b};function P(g){if(typeof g=="function"||Object(g)!==g){return g}var d=new g.constructor;for(var b in g){if(g[ab](b)){d[b]=P(g[b])}}return d}aG.angle=function(R,bv,g,S,d,E){if(d==null){var b=R-g,bw=bv-S;if(!b&&!bw){return 0}return(180+aj.atan2(-bw,-b)*180/aJ+360)%360}else{return aG.angle(R,bv,d,E)-aG.angle(g,S,d,E)}};aG.rad=function(b){return b%360*aJ/180};aG.deg=function(b){return b*180/aJ%360};aG.snapTo=function(d,E,b){b=aG.is(b,"finite")?b:10;if(aG.is(d,aW)){var g=d.length;while(g--){if(al(d[g]-E)<=b){return d[g]}}}else{d=+d;var R=E%d;if(R<b){return E-R}if(R>d-b){return E-R+d}}return E};var h=aG.createUUID=(function(b,d){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(b,d).toUpperCase()}})(/[xy]/g,function(g){var d=aj.random()*16|0,b=g=="x"?d:(d&3|8);return b.toString(16)});aG.setWindow=function(b){u("drag.setWindow",aG,ao.win,b);ao.win=b;ao.doc=ao.win.document;if(aG._engine.initWin){aG._engine.initWin(ao.win)}};var aY=function(g){if(aG.vml){var b=/^\s+|\s+$/g;var R;try{var S=new ActiveXObject("htmlfile");S.write("<body>");S.close();R=S.body}catch(bv){R=createPopup().document.body}var d=R.createTextRange();aY=av(function(bw){try{R.style.color=br(bw).replace(b,aL);var bx=d.queryCommandValue("ForeColor");bx=((bx&255)<<16)|(bx&65280)|((bx&16711680)>>>16);return"#"+("000000"+bx.toString(16)).slice(-6)}catch(by){return"none"}})}else{var E=ao.doc.createElement("i");E.title="Rapha\xebl Colour Picker";E.style.display="none";ao.doc.body.appendChild(E);aY=av(function(bw){E.style.color=bw;return ao.doc.defaultView.getComputedStyle(E,aL).getPropertyValue("color")})}return aY(g)},aw=function(){return"hsb("+[this.h,this.s,this.b]+")"},G=function(){return"hsl("+[this.h,this.s,this.l]+")"},v=function(){return this.hex},aM=function(S,R,d){if(R==null&&aG.is(S,"object")&&"r" in S&&"g" in S&&"b" in S){d=S.b;R=S.g;S=S.r}if(R==null&&aG.is(S,aa)){var E=aG.getRGB(S);S=E.r;R=E.g;d=E.b}if(S>1||R>1||d>1){S/=255;R/=255;d/=255}return[S,R,d]},aQ=function(S,R,d,bv){S*=255;R*=255;d*=255;var E={r:S,g:R,b:d,hex:aG.rgb(S,R,d),toString:v};aG.is(bv,"finite")&&(E.opacity=bv);return E};aG._path2string=function(){return this.join(",").replace(aZ,"$1")};function a2(E,g){for(var b=0,d=E.length;b<d;b++){if(E[b]===g){return E.push(E.splice(b,1)[0])}}}function av(E,d,b){function g(){var R=Array.prototype.slice.call(arguments,0),bv=R.join("\u2400"),S=g.cache=g.cache||{},bw=g.count=g.count||[];if(S[ab](bv)){a2(bw,bv);return b?b(S[bv]):S[bv]}bw.length>=1000&&delete S[bw.shift()];bw.push(bv);S[bv]=E[bq](d,R);return b?b(S[bv]):S[bv]}return g}var bd=aG._preload=function(g,d){var b=ao.doc.createElement("img");b.style.cssText="position:absolute;left:-9999em;top:-9999em";b.onload=function(){d.call(this);this.onload=null;ao.doc.body.removeChild(this)};b.onerror=function(){ao.doc.body.removeChild(this)};ao.doc.body.appendChild(b);b.src=g};function ah(){return this.hex}aG.getRGB=av(function(b){if(!b||!!((b=br(b)).indexOf("-")+1)){return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ah}}if(b=="none"){return{r:-1,g:-1,b:-1,hex:"none",toString:ah}}!(m[ab](b.toLowerCase().substring(0,2))||b.charAt()=="#")&&(b=aY(b));var R,d,g,bv,E,bx,bw,S=b.match(x);if(S){if(S[2]){bv=M(S[2].substring(5),16);g=M(S[2].substring(3,5),16);d=M(S[2].substring(1,3),16)}if(S[3]){bv=M((bx=S[3].charAt(3))+bx,16);g=M((bx=S[3].charAt(2))+bx,16);d=M((bx=S[3].charAt(1))+bx,16)}if(S[4]){bw=S[4][z](a1);d=ae(bw[0]);bw[0].slice(-1)=="%"&&(d*=2.55);g=ae(bw[1]);bw[1].slice(-1)=="%"&&(g*=2.55);bv=ae(bw[2]);bw[2].slice(-1)=="%"&&(bv*=2.55);S[1].toLowerCase().slice(0,4)=="rgba"&&(E=ae(bw[3]));bw[3]&&bw[3].slice(-1)=="%"&&(E/=100)}if(S[5]){bw=S[5][z](a1);d=ae(bw[0]);bw[0].slice(-1)=="%"&&(d*=2.55);g=ae(bw[1]);bw[1].slice(-1)=="%"&&(g*=2.55);bv=ae(bw[2]);bw[2].slice(-1)=="%"&&(bv*=2.55);(bw[0].slice(-3)=="deg"||bw[0].slice(-1)=="\xb0")&&(d/=360);S[1].toLowerCase().slice(0,4)=="hsba"&&(E=ae(bw[3]));bw[3]&&bw[3].slice(-1)=="%"&&(E/=100);return aG.hsb2rgb(d,g,bv,E)}if(S[6]){bw=S[6][z](a1);d=ae(bw[0]);bw[0].slice(-1)=="%"&&(d*=2.55);g=ae(bw[1]);bw[1].slice(-1)=="%"&&(g*=2.55);bv=ae(bw[2]);bw[2].slice(-1)=="%"&&(bv*=2.55);(bw[0].slice(-3)=="deg"||bw[0].slice(-1)=="\xb0")&&(d/=360);S[1].toLowerCase().slice(0,4)=="hsla"&&(E=ae(bw[3]));bw[3]&&bw[3].slice(-1)=="%"&&(E/=100);return aG.hsl2rgb(d,g,bv,E)}S={r:d,g:g,b:bv,toString:ah};S.hex="#"+(16777216|bv|(g<<8)|(d<<16)).toString(16).slice(1);aG.is(E,"finite")&&(S.opacity=E);return S}return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ah}},aG);aG.hsb=av(function(E,g,d){return aG.hsb2rgb(E,g,d).hex});aG.hsl=av(function(g,d,b){return aG.hsl2rgb(g,d,b).hex});aG.rgb=av(function(R,E,d){return"#"+(16777216|d|(E<<8)|(R<<16)).toString(16).slice(1)});aG.getColor=function(d){var g=this.getColor.start=this.getColor.start||{h:0,s:1,b:d||0.75},b=this.hsb2rgb(g.h,g.s,g.b);g.h+=0.075;if(g.h>1){g.h=0;g.s-=0.2;g.s<=0&&(this.getColor.start={h:0,s:1,b:g.b})}return b.hex};aG.getColor.reset=function(){delete this.start};aG.parsePathString=function(b){if(!b){return null}var g=Q(b);if(g.arr){return aN(g.arr)}var E={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},d=[];if(aG.is(b,aW)&&aG.is(b[0],aW)){d=aN(b)}if(!d.length){br(b).replace(aO,function(S,R,bx){var bw=[],bv=R.toLowerCase();bx.replace(aE,function(bz,by){by&&bw.push(+by)});if(bv=="m"&&bw.length>2){d.push([R][bn](bw.splice(0,2)));bv="l";R=R=="m"?"l":"L"}if(bv=="r"){d.push([R][bn](bw))}else{while(bw.length>=E[bv]){d.push([R][bn](bw.splice(0,E[bv])));if(!E[bv]){break}}}})}d.toString=aG._path2string;g.arr=aN(d);return d};aG.parseTransformString=av(function(d){if(!d){return null}var g={r:3,s:4,t:2,m:6},b=[];if(aG.is(d,aW)&&aG.is(d[0],aW)){b=aN(d)}if(!b.length){br(d).replace(Z,function(R,E,bw){var bv=[],S=bu.call(E);bw.replace(aE,function(by,bx){bx&&bv.push(+bx)});b.push([E][bn](bv))})}b.toString=aG._path2string;return b});var Q=function(d){var b=Q.ps=Q.ps||{};if(b[d]){b[d].sleep=100}else{b[d]={sleep:100}}setTimeout(function(){for(var g in b){if(b[ab](g)&&g!=d){b[g].sleep--;!b[g].sleep&&delete b[g]}}});return b[d]};aG._removedFactory=function(b){return function(){u("raphael.log",null,"Rapha\xebl: you are calling to method \u201c"+b+"\u201d of removed object",b)}};var ad=aG.pathBBox=function(bF){var by=Q(bF);if(by.bbox){return P(by.bbox)}if(!bF){return{x:0,y:0,width:0,height:0,x2:0,y2:0}}bF=O(bF);var bB=0,bA=0,S=[],g=[],E;for(var bw=0,bE=bF.length;bw<bE;bw++){E=bF[bw];if(E[0]=="M"){bB=E[1];bA=E[2];S.push(bB);g.push(bA)}else{var bx=curveDim(bB,bA,E[1],E[2],E[3],E[4],E[5],E[6]);S=S[bn](bx.min.x,bx.max.x);g=g[bn](bx.min.y,bx.max.y);bB=E[5];bA=E[6]}}var b=a4[bq](0,S),bC=a4[bq](0,g),bv=l[bq](0,S),R=l[bq](0,g),d=bv-b,bD=R-bC,bz={x:b,y:bC,x2:bv,y2:R,width:d,height:bD,cx:b+d/2,cy:bC+bD/2};by.bbox=P(bz);return bz},aN=function(d){var b=P(d);b.toString=aG._path2string;return b},aq=aG._pathToRelative=function(E){var bw=Q(E);if(bw.rel){return aN(bw.rel)}if(!aG.is(E,aW)||!aG.is(E&&E[0],aW)){E=aG.parsePathString(E)}var bz=[],bB=0,bA=0,bE=0,bD=0,g=0;if(E[0][0]=="M"){bB=E[0][1];bA=E[0][2];bE=bB;bD=bA;g++;bz.push(["M",bB,bA])}for(var bv=g,bF=E.length;bv<bF;bv++){var b=bz[bv]=[],bC=E[bv];if(bC[0]!=bu.call(bC[0])){b[0]=bu.call(bC[0]);switch(b[0]){case"a":b[1]=bC[1];b[2]=bC[2];b[3]=bC[3];b[4]=bC[4];b[5]=bC[5];b[6]=+(bC[6]-bB).toFixed(3);b[7]=+(bC[7]-bA).toFixed(3);break;case"v":b[1]=+(bC[1]-bA).toFixed(3);break;case"m":bE=bC[1];bD=bC[2];default:for(var S=1,bx=bC.length;S<bx;S++){b[S]=+(bC[S]-((S%2)?bB:bA)).toFixed(3)}}}else{b=bz[bv]=[];if(bC[0]=="m"){bE=bC[1]+bB;bD=bC[2]+bA}for(var R=0,d=bC.length;R<d;R++){bz[bv][R]=bC[R]}}var by=bz[bv].length;switch(bz[bv][0]){case"z":bB=bE;bA=bD;break;case"h":bB+=+bz[bv][by-1];break;case"v":bA+=+bz[bv][by-1];break;default:bB+=+bz[bv][by-2];bA+=+bz[bv][by-1]}}bz.toString=aG._path2string;bw.rel=aN(bz);return bz},t=aG._pathToAbsolute=function(bA){var g=Q(bA);if(g.abs){return aN(g.abs)}if(!aG.is(bA,aW)||!aG.is(bA&&bA[0],aW)){bA=aG.parsePathString(bA)}if(!bA||!bA.length){return[["M",0,0]]}var bG=[],bv=0,S=0,by=0,bx=0,E=0;if(bA[0][0]=="M"){bv=+bA[0][1];S=+bA[0][2];by=bv;bx=S;E++;bG[0]=["M",bv,S]}var bF=bA.length==3&&bA[0][0]=="M"&&bA[1][0].toUpperCase()=="R"&&bA[2][0].toUpperCase()=="Z";for(var bz,b,bD=E,bw=bA.length;bD<bw;bD++){bG.push(bz=[]);b=bA[bD];if(b[0]!=bb.call(b[0])){bz[0]=bb.call(b[0]);switch(bz[0]){case"A":bz[1]=b[1];bz[2]=b[2];bz[3]=b[3];bz[4]=b[4];bz[5]=b[5];bz[6]=+(b[6]+bv);bz[7]=+(b[7]+S);break;case"V":bz[1]=+b[1]+S;break;case"H":bz[1]=+b[1]+bv;break;case"R":var R=[bv,S][bn](b.slice(1));for(var bC=2,bE=R.length;bC<bE;bC++){R[bC]=+R[bC]+bv;R[++bC]=+R[bC]+S}bG.pop();bG=bG[bn](catmullRom2bezier(R,bF));break;case"M":by=+b[1]+bv;bx=+b[2]+S;default:for(bC=1,bE=b.length;bC<bE;bC++){bz[bC]=+b[bC]+((bC%2)?bv:S)}}}else{if(b[0]=="R"){R=[bv,S][bn](b.slice(1));bG.pop();bG=bG[bn](catmullRom2bezier(R,bF));bz=["R"][bn](b.slice(-2))}else{for(var bB=0,d=b.length;bB<d;bB++){bz[bB]=b[bB]}}}switch(bz[0]){case"Z":bv=by;S=bx;break;case"H":bv=bz[1];break;case"V":S=bz[1];break;case"M":by=bz[bz.length-2];bx=bz[bz.length-1];default:bv=bz[bz.length-2];S=bz[bz.length-1]}}bG.toString=aG._path2string;g.abs=aN(bG);return bG},bs=function(d,E,b,g){return[d,E,b,g,b,g]},a5=function(d,E,bv,R,b,g){var S=1/3,bw=2/3;return[S*d+bw*bv,S*E+bw*R,S*b+bw*bv,S*g+bw*R,b,g]},X=function(bC,b7,bL,bJ,bD,bx,E,bB,b6,bE){var bI=aJ*120/180,b=aJ/180*(+bD||0),bP=[],bM,b3=av(function(b9,cc,b8){var cb=b9*aj.cos(b8)-cc*aj.sin(b8),ca=b9*aj.sin(b8)+cc*aj.cos(b8);return{x:cb,y:ca}});if(!bE){bM=b3(bC,b7,-b);bC=bM.x;b7=bM.y;bM=b3(bB,b6,-b);bB=bM.x;b6=bM.y;var d=aj.cos(aJ/180*bD),bz=aj.sin(aJ/180*bD),bR=(bC-bB)/2,bQ=(b7-b6)/2;var b1=(bR*bR)/(bL*bL)+(bQ*bQ)/(bJ*bJ);if(b1>1){b1=aj.sqrt(b1);bL=b1*bL;bJ=b1*bJ}var g=bL*bL,bU=bJ*bJ,bW=(bx==E?-1:1)*aj.sqrt(al((g*bU-g*bQ*bQ-bU*bR*bR)/(g*bQ*bQ+bU*bR*bR))),bG=bW*bL*bQ/bJ+(bC+bB)/2,bF=bW*-bJ*bR/bL+(b7+b6)/2,bw=aj.asin(((b7-bF)/bJ).toFixed(9)),bv=aj.asin(((b6-bF)/bJ).toFixed(9));bw=bC<bG?aJ-bw:bw;bv=bB<bG?aJ-bv:bv;bw<0&&(bw=aJ*2+bw);bv<0&&(bv=aJ*2+bv);if(E&&bw>bv){bw=bw-aJ*2}if(!E&&bv>bw){bv=bv-aJ*2}}else{bw=bE[0];bv=bE[1];bG=bE[2];bF=bE[3]}var bA=bv-bw;if(al(bA)>bI){var bH=bv,bK=bB,by=b6;bv=bw+bI*(E&&bv>bw?1:-1);bB=bG+bL*aj.cos(bv);b6=bF+bJ*aj.sin(bv);bP=X(bB,b6,bL,bJ,bD,0,E,bK,by,[bv,bH,bG,bF])}bA=bv-bw;var S=aj.cos(bw),b5=aj.sin(bw),R=aj.cos(bv),b4=aj.sin(bv),bS=aj.tan(bA/4),bV=4/3*bL*bS,bT=4/3*bJ*bS,b2=[bC,b7],b0=[bC+bV*b5,b7-bT*S],bZ=[bB+bV*b4,b6-bT*R],bX=[bB,b6];b0[0]=2*b2[0]-b0[0];b0[1]=2*b2[1]-b0[1];if(bE){return[b0,bZ,bX][bn](bP)}else{bP=[b0,bZ,bX][bn](bP).join()[z](",");var bN=[];for(var bY=0,bO=bP.length;bY<bO;bY++){bN[bY]=bY%2?b3(bP[bY-1],bP[bY],b).y:b3(bP[bY],bP[bY+1],b).x}return bN}},O=aG._path2curve=av(function(bE,bz){var bx=!bz&&Q(bE);if(!bz&&bx.curve){return aN(bx.curve)}var E=t(bE),bA=bz&&t(bz),bB={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},d={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},S=function(bI,bJ,bG){var bF,bK,bH={T:1,Q:1};if(!bI){return["C",bJ.x,bJ.y,bJ.x,bJ.y,bJ.x,bJ.y]}!(bI[0] in bH)&&(bJ.qx=bJ.qy=null);switch(bI[0]){case"M":bJ.X=bI[1];bJ.Y=bI[2];break;case"A":bI=["C"][bn](X[bq](0,[bJ.x,bJ.y][bn](bI.slice(1))));break;case"S":if(bG=="C"||bG=="S"){bF=bJ.x*2-bJ.bx;bK=bJ.y*2-bJ.by}else{bF=bJ.x;bK=bJ.y}bI=["C",bF,bK][bn](bI.slice(1));break;case"T":if(bG=="Q"||bG=="T"){bJ.qx=bJ.x*2-bJ.qx;bJ.qy=bJ.y*2-bJ.qy}else{bJ.qx=bJ.x;bJ.qy=bJ.y}bI=["C"][bn](a5(bJ.x,bJ.y,bJ.qx,bJ.qy,bI[1],bI[2]));break;case"Q":bJ.qx=bI[1];bJ.qy=bI[2];bI=["C"][bn](a5(bJ.x,bJ.y,bI[1],bI[2],bI[3],bI[4]));break;case"L":bI=["C"][bn](bs(bJ.x,bJ.y,bI[1],bI[2]));break;case"H":bI=["C"][bn](bs(bJ.x,bJ.y,bI[1],bJ.y));break;case"V":bI=["C"][bn](bs(bJ.x,bJ.y,bJ.x,bI[1]));break;case"Z":bI=["C"][bn](bs(bJ.x,bJ.y,bJ.X,bJ.Y));break}return bI},b=function(bF,bG){if(bF[bG].length>7){bF[bG].shift();var bH=bF[bG];while(bH.length){bF.splice(bG++,0,["C"][bn](bH.splice(0,6)))}bF.splice(bG,1);bC=l(E.length,bA&&bA.length||0)}},g=function(bJ,bI,bG,bF,bH){if(bJ&&bI&&bJ[bH][0]=="M"&&bI[bH][0]!="M"){bI.splice(bH,0,["M",bF.x,bF.y]);bG.bx=0;bG.by=0;bG.x=bJ[bH][1];bG.y=bJ[bH][2];bC=l(E.length,bA&&bA.length||0)}};for(var bw=0,bC=l(E.length,bA&&bA.length||0);bw<bC;bw++){E[bw]=S(E[bw],bB);b(E,bw);bA&&(bA[bw]=S(bA[bw],d));bA&&b(bA,bw);g(E,bA,bB,d,bw);g(bA,E,d,bB,bw);var bv=E[bw],bD=bA&&bA[bw],R=bv.length,by=bA&&bD.length;bB.x=bv[R-2];bB.y=bv[R-1];bB.bx=ae(bv[R-4])||bB.x;bB.by=ae(bv[R-3])||bB.y;d.bx=bA&&(ae(bD[by-4])||d.x);d.by=bA&&(ae(bD[by-3])||d.y);d.x=bA&&bD[by-2];d.y=bA&&bD[by-1]}if(!bA){bx.curve=aN(E)}return bA?[E,bA]:E},null,aN),s=aG._parseDots=av(function(by){var bx=[];for(var S=0,bz=by.length;S<bz;S++){var b={},bw=by[S].match(/^([^:]*):?([\d\.]*)/);b.color=aG.getRGB(bw[1]);if(b.color.error){return null}b.color=b.color.hex;bw[2]&&(b.offset=bw[2]+"%");bx.push(b)}for(S=1,bz=bx.length-1;S<bz;S++){if(!bx[S].offset){var g=ae(bx[S-1].offset||0),E=0;for(var R=S+1;R<bz;R++){if(bx[R].offset){E=bx[R].offset;break}}if(!E){E=100;R=bz}E=ae(E);var bv=(E-g)/(R-S+1);for(;S<R;S++){g+=bv;bx[S].offset=g+"%"}}}return bx}),az=aG._tear=function(b,d){b==d.top&&(d.top=b.prev);b==d.bottom&&(d.bottom=b.next);b.next&&(b.next.prev=b.prev);b.prev&&(b.prev.next=b.next)},ag=aG._tofront=function(b,d){if(d.top===b){return}az(b,d);b.next=null;b.prev=d.top;d.top.next=b;d.top=b},o=aG._toback=function(b,d){if(d.bottom===b){return}az(b,d);b.next=d.bottom;b.prev=null;d.bottom.prev=b;d.bottom=b},A=aG._insertafter=function(d,b,g){az(d,g);b==g.top&&(g.top=d);b.next&&(b.next.prev=d);d.next=b.next;d.prev=b;b.next=d},aH=aG._insertbefore=function(d,b,g){az(d,g);b==g.bottom&&(g.bottom=d);b.prev&&(b.prev.next=d);d.prev=b.prev;b.prev=d;d.next=b},a3=aG.toMatrix=function(g,b){var E=ad(g),d={_:{transform:aL},getBBox:function(){return E}};aD(d,b);return d.matrix},L=aG.transformPath=function(d,b){return F(d,a3(d,b))},aD=aG._extractTransform=function(d,bJ){if(bJ==null){return d._.transform}bJ=br(bJ).replace(/\.{3}|\u2026/g,d._.transform||aL);var bB=aG.parseTransformString(bJ),bz=0,bx=0,bw=0,bD=1,bC=1,bK=d._,bE=new au;bK.transform=bB||[];if(bB){for(var bF=0,by=bB.length;bF<by;bF++){var bA=bB[bF],b=bA.length,R=br(bA[0]).toLowerCase(),bI=bA[0]!=R,bv=bI?bE.invert():0,bH,E,bG,g,S;if(R=="t"&&b==3){if(bI){bH=bv.x(0,0);E=bv.y(0,0);bG=bv.x(bA[1],bA[2]);g=bv.y(bA[1],bA[2]);bE.translate(bG-bH,g-E)}else{bE.translate(bA[1],bA[2])}}else{if(R=="r"){if(b==2){S=S||d.getBBox(1);bE.rotate(bA[1],S.x+S.width/2,S.y+S.height/2);bz+=bA[1]}else{if(b==4){if(bI){bG=bv.x(bA[2],bA[3]);g=bv.y(bA[2],bA[3]);bE.rotate(bA[1],bG,g)}else{bE.rotate(bA[1],bA[2],bA[3])}bz+=bA[1]}}}else{if(R=="s"){if(b==2||b==3){S=S||d.getBBox(1);bE.scale(bA[1],bA[b-1],S.x+S.width/2,S.y+S.height/2);bD*=bA[1];bC*=bA[b-1]}else{if(b==5){if(bI){bG=bv.x(bA[3],bA[4]);g=bv.y(bA[3],bA[4]);bE.scale(bA[1],bA[2],bG,g)}else{bE.scale(bA[1],bA[2],bA[3],bA[4])}bD*=bA[1];bC*=bA[2]}}}else{if(R=="m"&&b==7){bE.add(bA[1],bA[2],bA[3],bA[4],bA[5],bA[6])}}}}bK.dirtyT=1;d.matrix=bE}}d.matrix=bE;bK.sx=bD;bK.sy=bC;bK.deg=bz;bK.dx=bx=bE.e;bK.dy=bw=bE.f;if(bD==1&&bC==1&&!bz&&bK.bbox){bK.bbox.x+=+bx;bK.bbox.y+=+bw}else{bK.dirtyT=1}},k=function(d){var b=d[0];switch(b.toLowerCase()){case"t":return[b,0,0];case"m":return[b,1,0,0,1,0,0];case"r":if(d.length==4){return[b,0,d[2],d[3]]}else{return[b,0]}case"s":if(d.length==5){return[b,1,1,d[3],d[4]]}else{if(d.length==3){return[b,1,1]}else{return[b,1]}}}},ap=aG._equaliseTransform=function(R,E){E=br(E).replace(/\.{3}|\u2026/g,R);R=aG.parseTransformString(R)||[];E=aG.parseTransformString(E)||[];var b=l(R.length,E.length),bx=[],by=[],g=0,d,S,bw,bv;for(;g<b;g++){bw=R[g]||k(E[g]);bv=E[g]||k(bw);if((bw[0]!=bv[0])||(bw[0].toLowerCase()=="r"&&(bw[2]!=bv[2]||bw[3]!=bv[3]))||(bw[0].toLowerCase()=="s"&&(bw[3]!=bv[3]||bw[4]!=bv[4]))){return}bx[g]=[];by[g]=[];for(d=0,S=l(bw.length,bv.length);d<S;d++){d in bw&&(bx[g][d]=bw[d]);d in bv&&(by[g][d]=bv[d])}}return{from:bx,to:by}};aG._getContainer=function(b,R,g,E){var d;d=E==null&&!aG.is(b,"object")?ao.doc.getElementById(b):b;if(d==null){return}if(d.tagName){if(R==null){return{container:d,width:d.style.pixelWidth||d.offsetWidth,height:d.style.pixelHeight||d.offsetHeight}}else{return{container:d,width:R,height:g}}}return{container:1,x:b,y:R,width:g,height:E}};aG.pathToRelative=aq;aG._engine={};aG.path2curve=O;aG.matrix=function(E,g,bw,bv,S,R){return new au(E,g,bw,bv,S,R)};function au(E,g,bw,bv,S,R){if(E!=null){this.a=+E;this.b=+g;this.c=+bw;this.d=+bv;this.e=+S;this.f=+R}else{this.a=1;this.b=0;this.c=0;this.d=1;this.e=0;this.f=0}}(function(g){g.add=function(bE,bB,bz,bx,bv,S){var R=[[],[],[]],E=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],bD=[[bE,bz,bv],[bB,bx,S],[0,0,1]],bC,bA,by,bw;if(bE&&bE instanceof au){bD=[[bE.a,bE.c,bE.e],[bE.b,bE.d,bE.f],[0,0,1]]}for(bC=0;bC<3;bC++){for(bA=0;bA<3;bA++){bw=0;for(by=0;by<3;by++){bw+=E[bC][by]*bD[by][bA]}R[bC][bA]=bw}}this.a=R[0][0];this.b=R[1][0];this.c=R[0][1];this.d=R[1][1];this.e=R[0][2];this.f=R[1][2]};g.invert=function(){var R=this,E=R.a*R.d-R.b*R.c;return new au(R.d/E,-R.b/E,-R.c/E,R.a/E,(R.c*R.f-R.d*R.e)/E,(R.b*R.e-R.a*R.f)/E)};g.clone=function(){return new au(this.a,this.b,this.c,this.d,this.e,this.f)};g.translate=function(E,R){this.add(1,0,0,1,E,R)};g.scale=function(R,bv,E,S){bv==null&&(bv=R);(E||S)&&this.add(1,0,0,1,E,S);this.add(R,0,0,bv,0,0);(E||S)&&this.add(1,0,0,1,-E,-S)};g.rotate=function(R,E,bw){R=aG.rad(R);E=E||0;bw=bw||0;var bv=+aj.cos(R).toFixed(9),S=+aj.sin(R).toFixed(9);this.add(bv,S,-S,bv,E,bw);this.add(1,0,0,1,-E,-bw)};g.x=function(E,R){return E*this.a+R*this.c+this.e};g.y=function(E,R){return E*this.b+R*this.d+this.f};g.get=function(E){return +this[br.fromCharCode(97+E)].toFixed(4)};g.toString=function(){return aG.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()};g.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"};g.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]};function d(E){return E[0]*E[0]+E[1]*E[1]}function b(E){var R=aj.sqrt(d(E));E[0]&&(E[0]/=R);E[1]&&(E[1]/=R)}g.split=function(){var R={};R.dx=this.e;R.dy=this.f;var bv=[[this.a,this.c],[this.b,this.d]];R.scalex=aj.sqrt(d(bv[0]));b(bv[0]);R.shear=bv[0][0]*bv[1][0]+bv[0][1]*bv[1][1];bv[1]=[bv[1][0]-bv[0][0]*R.shear,bv[1][1]-bv[0][1]*R.shear];R.scaley=aj.sqrt(d(bv[1]));b(bv[1]);R.shear/=R.scaley;var E=-bv[0][1],S=bv[1][1];if(S<0){R.rotate=aG.deg(aj.acos(S));if(E<0){R.rotate=360-R.rotate}}else{R.rotate=aG.deg(aj.asin(E))}R.isSimple=!+R.shear.toFixed(9)&&(R.scalex.toFixed(9)==R.scaley.toFixed(9)||!R.rotate);R.isSuperSimple=!+R.shear.toFixed(9)&&R.scalex.toFixed(9)==R.scaley.toFixed(9)&&!R.rotate;R.noRotation=!+R.shear.toFixed(9)&&!R.rotate;return R};g.toTransformString=function(E){var R=E||this[z]();if(R.isSimple){R.scalex=+R.scalex.toFixed(4);R.scaley=+R.scaley.toFixed(4);R.rotate=+R.rotate.toFixed(4);return(R.dx||R.dy?"t"+[R.dx,R.dy]:aL)+(R.scalex!=1||R.scaley!=1?"s"+[R.scalex,R.scaley,0,0]:aL)+(R.rotate?"r"+[R.rotate,0,0]:aL)}else{return"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}})(au.prototype);var N=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);if((navigator.vendor=="Apple Computer, Inc.")&&(N&&N[1]<4||navigator.platform.slice(0,2)=="iP")||(navigator.vendor=="Google Inc."&&N&&N[1]<8)){aR.safari=function(){var b=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){b.remove()})}}else{aR.safari=C}var I=function(){this.returnValue=false},bm=function(){return this.originalEvent.preventDefault()},aT=function(){this.cancelBubble=true},ay=function(){return this.originalEvent.stopPropagation()},bp=function(d){var b=ao.doc.documentElement.scrollTop||ao.doc.body.scrollTop,g=ao.doc.documentElement.scrollLeft||ao.doc.body.scrollLeft;return{x:d.clientX+g,y:d.clientY+b}},ar=(function(){if(ao.doc.addEventListener){return function(R,g,d,b){var E=function(bv){var bw=bp(bv);return d.call(b,bv,bw.x,bw.y)};R.addEventListener(g,E,false);if(T&&bg[g]){var S=function(by){var bz=bp(by),bw=by;for(var bv=0,bx=by.targetTouches&&by.targetTouches.length;bv<bx;bv++){if(by.targetTouches[bv].target==R){by=by.targetTouches[bv];by.originalEvent=bw;by.preventDefault=bm;by.stopPropagation=ay;break}}return d.call(b,by,bz.x,bz.y)};R.addEventListener(bg[g],S,false)}return function(){R.removeEventListener(g,E,false);if(T&&bg[g]){R.removeEventListener(bg[g],E,false)}return true}}}else{if(ao.doc.attachEvent){return function(S,E,g,d){var R=function(bx){bx=bx||ao.win.event;var bw=ao.doc.documentElement.scrollTop||ao.doc.body.scrollTop,by=ao.doc.documentElement.scrollLeft||ao.doc.body.scrollLeft,bv=bx.clientX+by,bz=bx.clientY+bw;bx.preventDefault=bx.preventDefault||I;bx.stopPropagation=bx.stopPropagation||aT;return g.call(d,bx,bv,bz)};S.attachEvent("on"+E,R);var b=function(){S.detachEvent("on"+E,R);return true};return b}}}})(),aX=[],bh=function(bw){var bz=bw.clientX,by=bw.clientY,bB=ao.doc.documentElement.scrollTop||ao.doc.body.scrollTop,bC=ao.doc.documentElement.scrollLeft||ao.doc.body.scrollLeft,g,E=aX.length;while(E--){g=aX[E];if(T&&bw.touches){var S=bw.touches.length,R;while(S--){R=bw.touches[S];if(R.identifier==g.el._drag.id){bz=R.clientX;by=R.clientY;(bw.originalEvent?bw.originalEvent:bw).preventDefault();break}}}else{bw.preventDefault()}var d=g.el.node,b,bv=d.nextSibling,bA=d.parentNode,bx=d.style.display;ao.win.opera&&bA.removeChild(d);d.style.display="none";b=g.el.paper.getElementByPoint(bz,by);d.style.display=bx;ao.win.opera&&(bv?bA.insertBefore(d,bv):bA.appendChild(d));b&&u("drag.drag.over."+g.el.id,g.el,b);bz+=bC;by+=bB;u("drag.drag.move."+g.el.id,g.move_scope||g.el,bz-g.el._drag.x,by-g.el._drag.y,bz,by,bw)}},e=function(g){aG.unmousemove(bh).unmouseup(e);var d=aX.length,b;while(d--){b=aX[d];b.el._drag={};u("drag.drag.end."+b.el.id,b.end_scope||b.start_scope||b.move_scope||b.el,g)}aX=[]},a0=aG.el={};for(var am=K.length;am--;){(function(b){aG[b]=a0[b]=function(g,d){if(aG.is(g,"function")){this.events=this.events||[];this.events.push({name:b,f:g,unbind:ar(this.shape||this.node||ao.doc,b,g,d||this)})}return this};aG["un"+b]=a0["un"+b]=function(E){var g=this.events||[],d=g.length;while(d--){if(g[d].name==b&&(aG.is(E,"undefined")||g[d].f==E)){g[d].unbind();g.splice(d,1);!g.length&&delete this.events}}return this}})(K[am])}a0.data=function(d,E){var g=aI[this.id]=aI[this.id]||{};if(arguments.length==0){return g}if(arguments.length==1){if(aG.is(d,"object")){for(var b in d){if(d[ab](b)){this.data(b,d[b])}}return this}u("drag.data.get."+this.id,this,g[d],d);return g[d]}g[d]=E;u("drag.data.set."+this.id,this,E,d);return this};a0.removeData=function(b){if(b==null){aI[this.id]={}}else{aI[this.id]&&delete aI[this.id][b]}return this};var bc=[];aR.circle=function(b,E,g){var d=aG._engine.circle(this,b||0,E||0,g||0);this.__set__&&this.__set__.push(d);return d};aR.rect=function(b,S,d,E,R){var g=aG._engine.rect(this,b||0,S||0,d||0,E||0,R||0);this.__set__&&this.__set__.push(g);return g};aR.ellipse=function(b,R,E,g){var d=aG._engine.ellipse(this,b||0,R||0,E||0,g||0);this.__set__&&this.__set__.push(d);return d};aR.path=function(b){b&&!aG.is(b,aa)&&!aG.is(b[0],aW)&&(b+=aL);var d=aG._engine.path(aG.format[bq](aG,arguments),this);this.__set__&&this.__set__.push(d);return d};aR.image=function(R,b,S,d,E){var g=aG._engine.image(this,R||"about:blank",b||0,S||0,d||0,E||0);this.__set__&&this.__set__.push(g);return g};aR.text=function(b,E,g){var d=aG._engine.text(this,b||0,E||0,br(g));this.__set__&&this.__set__.push(d);return d};aR.set=function(d){!aG.is(d,"array")&&(d=Array.prototype.splice.call(arguments,0,arguments.length));var b=new ac(d);this.__set__&&this.__set__.push(b);b.paper=this;b.type="set";return b};aR.setStart=function(b){this.__set__=b||this.set()};aR.setFinish=function(d){var b=this.__set__;delete this.__set__;return b};aR.setSize=function(d,b){return aG._engine.setSize.call(this,d,b)};aR.setViewBox=function(b,R,d,E,g){return aG._engine.setViewBox.call(this,b,R,d,E,g)};aR.top=aR.bottom=null;aR.drag=aG;var ba=function(g){var R=g.getBoundingClientRect(),bx=g.ownerDocument,S=bx.body,b=bx.documentElement,E=b.clientTop||S.clientTop||0,bv=b.clientLeft||S.clientLeft||0,bw=R.top+(ao.win.pageYOffset||b.scrollTop||S.scrollTop)-E,d=R.left+(ao.win.pageXOffset||b.scrollLeft||S.scrollLeft)-bv;return{y:bw,x:d}};var n=aG.easing_formulas={linear:function(b){return b},"<":function(b){return a7(b,1.7)},">":function(b){return a7(b,0.48)},"<>":function(bw){var E=0.48-bw/1.04,g=aj.sqrt(0.1734+E*E),b=g-E,bv=a7(al(b),1/3)*(b<0?-1:1),S=-g-E,R=a7(al(S),1/3)*(S<0?-1:1),d=bv+R+0.5;return(1-d)*3*d*d+d*d*d},backIn:function(d){var b=1.70158;return d*d*((b+1)*d-b)},backOut:function(d){d=d-1;var b=1.70158;return d*d*((b+1)*d+b)+1},elastic:function(b){if(b==!!b){return b}return a7(2,-10*b)*aj.sin((b-0.075)*(2*aJ)/0.3)+1},bounce:function(E){var d=7.5625,g=2.75,b;if(E<(1/g)){b=d*E*E}else{if(E<(2/g)){E-=(1.5/g);b=d*E*E+0.75}else{if(E<(2.5/g)){E-=(2.25/g);b=d*E*E+0.9375}else{E-=(2.625/g);b=d*E*E+0.984375}}}return b}};n.easeIn=n["ease-in"]=n["<"];n.easeOut=n["ease-out"]=n[">"];n.easeInOut=n["ease-in-out"]=n["<>"];n["back-in"]=n.backIn;n["back-out"]=n.backOut;var V=[],aC=be.requestAnimationFrame||be.webkitRequestAnimationFrame||be.mozRequestAnimationFrame||be.oRequestAnimationFrame||be.msRequestAnimationFrame||function(b){setTimeout(b,16)},bl=function(){var bv=+new Date,bD=0;for(;bD<V.length;bD++){var bJ=V[bD];if(bJ.el.removed||bJ.paused){continue}var E=bv-bJ.start,bB=bJ.ms,bA=bJ.easing,bE=bJ.from,by=bJ.diff,d=bJ.to,bx=bJ.t,S=bJ.el,bz={},b,bH={},bL;if(bJ.initstatus){E=(bJ.initstatus*bJ.anim.top-bJ.prev)/(bJ.percent-bJ.prev)*bB;bJ.status=bJ.initstatus;delete bJ.initstatus;bJ.stop&&V.splice(bD--,1)}else{bJ.status=(bJ.prev+(bJ.percent-bJ.prev)*(E/bB))/bJ.anim.top}if(E<0){continue}if(E<bB){var g=bA(E/bB);for(var bC in bE){if(bE[ab](bC)){switch(ai[bC]){case aA:b=+bE[bC]+g*bB*by[bC];break;case"colour":b="rgb("+[B(Y(bE[bC].r+g*bB*by[bC].r)),B(Y(bE[bC].g+g*bB*by[bC].g)),B(Y(bE[bC].b+g*bB*by[bC].b))].join(",")+")";break;case"path":b=[];for(var bG=0,bw=bE[bC].length;bG<bw;bG++){b[bG]=[bE[bC][bG][0]];for(var bF=1,bI=bE[bC][bG].length;bF<bI;bF++){b[bG][bF]=+bE[bC][bG][bF]+g*bB*by[bC][bG][bF]}b[bG]=b[bG].join(aF)}b=b.join(aF);break;case"transform":if(by[bC].real){b=[];for(bG=0,bw=bE[bC].length;bG<bw;bG++){b[bG]=[bE[bC][bG][0]];for(bF=1,bI=bE[bC][bG].length;bF<bI;bF++){b[bG][bF]=bE[bC][bG][bF]+g*bB*by[bC][bG][bF]}}}else{var bK=function(bM){return +bE[bC][bM]+g*bB*by[bC][bM]};b=[["m",bK(0),bK(1),bK(2),bK(3),bK(4),bK(5)]]}break;case"csv":if(bC=="clip-rect"){b=[];bG=4;while(bG--){b[bG]=+bE[bC][bG]+g*bB*by[bC][bG]}}break;default:var R=[][bn](bE[bC]);b=[];bG=S.paper.customAttributes[bC].length;while(bG--){b[bG]=+R[bG]+g*bB*by[bC][bG]}break}bz[bC]=b}}S.attr(bz);(function(bO,bM,bN){setTimeout(function(){u("drag.anim.frame."+bO,bM,bN)})})(S.id,S,bJ.anim)}else{(function(bO,bN,bM){setTimeout(function(){u("drag.anim.frame."+bN.id,bN,bM);u("drag.anim.finish."+bN.id,bN,bM);aG.is(bO,"function")&&bO.call(bN)})})(bJ.callback,S,bJ.anim);S.attr(d);V.splice(bD--,1);if(bJ.repeat>1&&!bJ.next){for(bL in d){if(d[ab](bL)){bH[bL]=bJ.totalOrigin[bL]}}bJ.el.attr(bH);aB(bJ.anim,bJ.el,bJ.anim.percents[0],null,bJ.totalOrigin,bJ.repeat-1)}if(bJ.next&&!bJ.stop){aB(bJ.anim,bJ.el,bJ.next,null,bJ.totalOrigin,bJ.repeat)}}}aG.svg&&S&&S.paper&&S.paper.safari();V.length&&aC(bl)},B=function(b){return b>255?255:b<0?0:b};a0.onAnimation=function(b){b?u.on("drag.anim.frame."+this.id,b):u.unbind("drag.anim.frame."+this.id);return this};function bj(R,g){var d=[],E={};this.ms=g;this.times=1;if(R){for(var b in R){if(R[ab](b)){E[ae(b)]=R[b];d.push(ae(b))}}d.sort(r)}this.anim=E;this.top=d[d.length-1];this.percents=d}bj.prototype.delay=function(d){var b=new bj(this.anim,this.ms);b.times=this.times;b.del=+d||0;return b};bj.prototype.repeat=function(d){var b=new bj(this.anim,this.ms);b.del=this.del;b.times=aj.floor(l(d,0))||1;return b};function aB(bN,g,b,bL,bv,bz){b=ae(b);var bU,S,by,bV=[],bF,bE,R,bH=bN.ms,bM={},E={},bB={};if(bL){for(bQ=0,bA=V.length;bQ<bA;bQ++){var bS=V[bQ];if(bS.el.id==g.id&&bS.anim==bN){if(bS.percent!=b){V.splice(bQ,1);by=1}else{S=bS}g.attr(bS.totalOrigin);break}}}else{bL=+E}for(var bQ=0,bA=bN.percents.length;bQ<bA;bQ++){if(bN.percents[bQ]==b||bN.percents[bQ]>bL*bN.top){b=bN.percents[bQ];bE=bN.percents[bQ-1]||0;bH=bH/bN.top*(b-bE);bF=bN.percents[bQ+1];bU=bN.anim[b];break}else{if(bL){g.attr(bN.anim[bN.percents[bQ]])}}}if(!bU){return}if(!S){for(var bJ in bU){if(bU[ab](bJ)){if(ai[ab](bJ)||g.paper.customAttributes[ab](bJ)){bM[bJ]=g.attr(bJ);(bM[bJ]==null)&&(bM[bJ]=p[bJ]);E[bJ]=bU[bJ];switch(ai[bJ]){case aA:bB[bJ]=(E[bJ]-bM[bJ])/bH;break;case"colour":bM[bJ]=aG.getRGB(bM[bJ]);var bK=aG.getRGB(E[bJ]);bB[bJ]={r:(bK.r-bM[bJ].r)/bH,g:(bK.g-bM[bJ].g)/bH,b:(bK.b-bM[bJ].b)/bH};break;case"path":var bw=O(bM[bJ],E[bJ]),bD=bw[1];bM[bJ]=bw[0];bB[bJ]=[];for(bQ=0,bA=bM[bJ].length;bQ<bA;bQ++){bB[bJ][bQ]=[0];for(var bP=1,bR=bM[bJ][bQ].length;bP<bR;bP++){bB[bJ][bQ][bP]=(bD[bQ][bP]-bM[bJ][bQ][bP])/bH}}break;case"transform":var bX=g._,bW=ap(bX[bJ],E[bJ]);if(bW){bM[bJ]=bW.from;E[bJ]=bW.to;bB[bJ]=[];bB[bJ].real=true;for(bQ=0,bA=bM[bJ].length;bQ<bA;bQ++){bB[bJ][bQ]=[bM[bJ][bQ][0]];for(bP=1,bR=bM[bJ][bQ].length;bP<bR;bP++){bB[bJ][bQ][bP]=(E[bJ][bQ][bP]-bM[bJ][bQ][bP])/bH}}}else{var bI=(g.matrix||new au),bT={_:{transform:bX.transform},getBBox:function(){return g.getBBox(1)}};bM[bJ]=[bI.a,bI.b,bI.c,bI.d,bI.e,bI.f];aD(bT,E[bJ]);E[bJ]=bT._.transform;bB[bJ]=[(bT.matrix.a-bI.a)/bH,(bT.matrix.b-bI.b)/bH,(bT.matrix.c-bI.c)/bH,(bT.matrix.d-bI.d)/bH,(bT.matrix.e-bI.e)/bH,(bT.matrix.f-bI.f)/bH]}break;case"csv":var d=br(bU[bJ])[z](a),bx=br(bM[bJ])[z](a);if(bJ=="clip-rect"){bM[bJ]=bx;bB[bJ]=[];bQ=bx.length;while(bQ--){bB[bJ][bQ]=(d[bQ]-bM[bJ][bQ])/bH}}E[bJ]=d;break;default:d=[][bn](bU[bJ]);bx=[][bn](bM[bJ]);bB[bJ]=[];bQ=g.paper.customAttributes[bJ].length;while(bQ--){bB[bJ][bQ]=((d[bQ]||0)-(bx[bQ]||0))/bH}break}}}}var bG=bU.easing,bO=aG.easing_formulas[bG];if(!bO){bO=br(bG).match(c);if(bO&&bO.length==5){var bC=bO;bO=function(bY){return CubicBezierAtTime(bY,+bC[1],+bC[2],+bC[3],+bC[4],bH)}}else{bO=bk}}R=bU.start||bN.start||+new Date;bS={anim:bN,percent:b,timestamp:R,start:R+(bN.del||0),status:0,initstatus:bL||0,stop:false,ms:bH,easing:bO,from:bM,diff:bB,to:E,el:g,callback:bU.callback,prev:bE,next:bF,repeat:bz||bN.times,origin:g.attr(),totalOrigin:bv};V.push(bS);if(bL&&!S&&!by){bS.stop=true;bS.start=new Date-bH*bL;if(V.length==1){return bl()}}if(by){bS.start=new Date-bS.ms*bL}V.length==1&&aC(bl)}else{S.initstatus=bL;S.start=new Date-S.ms*bL}u("drag.anim.start."+g.id,g,bN)}aG.animation=function(R,d,bv,S){if(R instanceof bj){return R}if(aG.is(bv,"function")||!bv){S=S||bv||null;bv=null}R=Object(R);d=+d||0;var E={},g,b;for(b in R){if(R[ab](b)&&ae(b)!=b&&ae(b)+"%"!=b){g=true;E[b]=R[b]}}if(!g){return new bj(R,d)}else{bv&&(E.easing=bv);S&&(E.callback=S);return new bj({100:E},d)}};a0.animate=function(E,b,S,R){var d=this;if(d.removed){R&&R.call(d);return d}var g=E instanceof bj?E:aG.animation(E,b,S,R);aB(g,d,g.percents[0],null,d.attr());return d};a0.setTime=function(d,b){if(d&&b!=null){this.status(d,a4(b,d.ms)/d.ms)}return this};a0.status=function(R,E){var d=[],g=0,b,S;if(E!=null){aB(R,this,-1,a4(E,1));return this}else{b=V.length;for(;g<b;g++){S=V[g];if(S.el.id==this.id&&(!R||S.anim==R)){if(R){return S.status}d.push({anim:S.anim,status:S.status})}}if(R){return 0}return d}};a0.pause=function(d){for(var b=0;b<V.length;b++){if(V[b].el.id==this.id&&(!d||V[b].anim==d)){if(u("drag.anim.pause."+this.id,this,V[b].anim)!==false){V[b].paused=true}}}return this};a0.resume=function(d){for(var b=0;b<V.length;b++){if(V[b].el.id==this.id&&(!d||V[b].anim==d)){var g=V[b];if(u("drag.anim.resume."+this.id,this,g.anim)!==false){delete g.paused;this.status(g.anim,g.status)}}}return this};a0.stop=function(d){for(var b=0;b<V.length;b++){if(V[b].el.id==this.id&&(!d||V[b].anim==d)){if(u("drag.anim.stop."+this.id,this,V[b].anim)!==false){V.splice(b--,1)}}}return this};function U(d){for(var b=0;b<V.length;b++){if(V[b].el.paper==d){V.splice(b--,1)}}}u.on("drag.remove",U);u.on("drag.clear",U);a0.toString=function(){return"Rapha\xebl\u2019s object"};var ac=function(b){this.items=[];this.length=0;this.type="set";if(b){for(var d=0,g=b.length;d<g;d++){if(b[d]&&(b[d].constructor==a0.constructor||b[d].constructor==ac)){this[this.items.length]=this.items[this.items.length]=b[d];this.length++}}}},aV=ac.prototype;aV.push=function(){var E,b;for(var d=0,g=arguments.length;d<g;d++){E=arguments[d];if(E&&(E.constructor==a0.constructor||E.constructor==ac)){b=this.items.length;this[b]=this.items[b]=E;this.length++}}return this};aV.pop=function(){this.length&&delete this[this.length--];return this.items.pop()};aV.forEach=function(E,b){for(var d=0,g=this.items.length;d<g;d++){if(E.call(b,this.items[d],d)===false){return this}}return this};for(var y in a0){if(a0[ab](y)){aV[y]=(function(b){return function(){var d=arguments;return this.forEach(function(g){g[b][bq](g,d)})}})(y)}}aV.attr=function(d,S){if(d&&aG.is(d,aW)&&aG.is(d[0],"object")){for(var b=0,R=d.length;b<R;b++){this.items[b].attr(d[b])}}else{for(var g=0,E=this.items.length;g<E;g++){this.items[g].attr(d,S)}}return this};aV.clear=function(){while(this.length){this.pop()}};aV.splice=function(E,bv,bw){E=E<0?l(this.length+E,0):E;bv=l(0,a4(this.length-E,bv));var g=[],b=[],d=[],R;for(R=2;R<arguments.length;R++){d.push(arguments[R])}for(R=0;R<bv;R++){b.push(this[E+R])}for(;R<this.length-E;R++){g.push(this[E+R])}var S=d.length;for(R=0;R<S+g.length;R++){this.items[E+R]=this[E+R]=R<S?d[R]:g[R-S]}R=this.items.length=this.length-=bv-S;while(this[R]){delete this[R++]}return new ac(b)};aV.exclude=function(g){for(var b=0,d=this.length;b<d;b++){if(this[b]==g){this.splice(b,1);return true}}};aV.animate=function(g,b,bv,bx){(aG.is(bv,"function")||!bv)&&(bx=bv||null);var S=this.items.length,E=S,by,bw=this,R;if(!S){return this}bx&&(R=function(){!--S&&bx.call(bw)});bv=aG.is(bv,aa)?bv:R;var d=aG.animation(g,b,bv,R);by=this.items[--E].animate(d);while(E--){this.items[E]&&!this.items[E].removed&&this.items[E].animateWith(by,d,d);(this.items[E]&&!this.items[E].removed)||S--}return this};aV.insertAfter=function(d){var b=this.items.length;while(b--){this.items[b].insertAfter(d)}return this};aG.registerFont=function(d){if(!d.face){return d}this.fonts=this.fonts||{};var E={w:d.w,face:{},glyphs:{}},g=d.face["font-family"];for(var bv in d.face){if(d.face[ab](bv)){E.face[bv]=d.face[bv]}}if(this.fonts[g]){this.fonts[g].push(E)}else{this.fonts[g]=[E]}if(!d.svg){E.face["units-per-em"]=M(d.face["units-per-em"],10);for(var R in d.glyphs){if(d.glyphs[ab](R)){var S=d.glyphs[R];E.glyphs[R]={w:S.w,k:{},d:S.d&&"M"+S.d.replace(/[mlcxtrv]/g,function(bw){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[bw]||"M"})+"z"};if(S.k){for(var b in S.k){if(S[ab](b)){E.glyphs[R].k[b]=S.k[b]}}}}}}return d};aR.getFont=function(bw,bx,d,E){E=E||"normal";d=d||"normal";bx=+bx||{normal:400,bold:700,lighter:300,bolder:800}[bx]||400;if(!aG.fonts){return}var R=aG.fonts[bw];if(!R){var g=new RegExp("(^|\\s)"+bw.replace(/[^\w\d\s+!~.:_-]/g,aL)+"(\\s|$)","i");for(var b in aG.fonts){if(aG.fonts[ab](b)){if(g.test(b)){R=aG.fonts[b];break}}}}var S;if(R){for(var bv=0,by=R.length;bv<by;bv++){S=R[bv];if(S.face["font-weight"]==bx&&(S.face["font-style"]==d||!S.face["font-style"])&&S.face["font-stretch"]==E){break}}}return S};aR.print=function(bw,bv,b,bz,bB,bJ,g,d){bJ=bJ||"middle";g=l(a4(g||0,1),-1);d=l(a4(d||1,3),1);var bI=br(b)[z](aL),bF=0,bH=0,bD=aL,bK;aG.is(bz,"string")&&(bz=this.getFont(bz));if(bz){bK=(bB||16)/bz.face["units-per-em"];var R=bz.face.bbox[z](a),by=+R[0],E=R[3]-R[1],S=0,bA=+R[1]+(bJ=="baseline"?E+(+bz.face.descent):E/2);for(var bE=0,bx=bI.length;bE<bx;bE++){if(bI[bE]=="\n"){bF=0;bG=0;bH=0;S+=E*d}else{var bC=bH&&bz.glyphs[bI[bE-1]]||{},bG=bz.glyphs[bI[bE]];bF+=bH?(bC.w||bz.w)+(bC.k&&bC.k[bI[bE]]||0)+(bz.w*g):0;bH=1}if(bG&&bG.d){bD+=aG.transformPath(bG.d,["t",bF*bK,S*bK,"s",bK,bK,by,bA,"t",(bw-by)/bK,(bv-bA)/bK])}}}return this.path(bD).attr({fill:"#000",stroke:"none"})};aR.add=function(E){if(aG.is(E,"array")){var g=this.set(),d=0,R=E.length,b;for(;d<R;d++){b=E[d]||{};bf[ab](b.type)&&g.push(this[b.type]().attr(b))}}return g};aG.format=function(d,g){var b=aG.is(g,aW)?[0][bn](g):arguments;d&&aG.is(d,aa)&&b.length-1&&(d=d.replace(a9,function(R,E){return b[++E]==null?aL:b[E]}));return d||aL};aG.fullfill=(function(){var g=/\{([^\}]+)\}/g,b=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,d=function(S,R,bv){var E=bv;R.replace(b,function(by,bx,bw,bA,bz){bx=bx||bA;if(E){if(bx in E){E=E[bx]}typeof E=="function"&&bz&&(E=E())}});E=(E==null||E==bv?S:E)+"";return E};return function(R,E){return String(R).replace(g,function(bv,S){return d(bv,S,E)})}})();aG.ninja=function(){q.was?(ao.win.Drag=q.is):delete Drag;return aG};aG.st=aV;(function(E,d,g){if(E.readyState==null&&E.addEventListener){E.addEventListener(d,g=function(){E.removeEventListener(d,g,false);E.readyState="complete"},false);E.readyState="loading"}function b(){(/in/).test(E.readyState)?setTimeout(b,9):aG.eve("drag.DOMload")}b()})(document,"DOMContentLoaded");u.on("drag.DOMload",function(){af=true});(function(){if(!aG.svg){return}var g="hasOwnProperty",bQ=String,bC=parseFloat,bF=parseInt,bv=Math,bR=bv.max,bH=bv.abs,bx=bv.pow,bw=/[, ]+/,bO=aG.eve,bG="",bz=" ";var bD="http://www.w3.org/1999/xlink",bN={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},bJ={};aG.toString=function(){return"Your browser supports SVG.\nYou are running Rapha\xebl "+this.version};var by=function(bS,E){if(E){if(typeof bS=="string"){bS=by(bS)}for(var S in E){if(E[g](S)){if(S.substring(0,6)=="xlink:"){bS.setAttributeNS(bD,S.substring(6),bQ(E[S]))}else{bS.setAttribute(S,bQ(E[S]))}}}}else{bS=aG._g.doc.createElementNS("http://www.w3.org/2000/svg",bS);bS.style&&(bS.style.webkitTapHighlightColor="rgba(0,0,0,0)")}return bS},b=function(bZ,b3){var b1="linear",S=bZ.id+b3,bX=0.5,bV=0.5,bT=bZ.node,E=bZ.paper,b5=bT.style,bS=aG._g.doc.getElementById(S);if(!bS){b3=bQ(b3).replace(aG._radial_gradient,function(b8,b6,b9){b1="radial";if(b6&&b9){bX=bC(b6);bV=bC(b9);var b7=((bV>0.5)*2-1);bx(bX-0.5,2)+bx(bV-0.5,2)>0.25&&(bV=bv.sqrt(0.25-bx(bX-0.5,2))*b7+0.5)&&bV!=0.5&&(bV=bV.toFixed(5)-0.00001*b7)}return bG});b3=b3.split(/\s*\-\s*/);if(b1=="linear"){var bW=b3.shift();bW=-bC(bW);if(isNaN(bW)){return null}var bU=[0,0,bv.cos(aG.rad(bW)),bv.sin(aG.rad(bW))],b2=1/(bR(bH(bU[2]),bH(bU[3]))||1);bU[2]*=b2;bU[3]*=b2;if(bU[2]<0){bU[0]=-bU[2];bU[2]=0}if(bU[3]<0){bU[1]=-bU[3];bU[3]=0}}var b0=aG._parseDots(b3);if(!b0){return null}S=S.replace(/[\(\)\s,\xb0#]/g,"_");if(bZ.gradient&&S!=bZ.gradient.id){E.defs.removeChild(bZ.gradient);delete bZ.gradient}if(!bZ.gradient){bS=by(b1+"Gradient",{id:S});bZ.gradient=bS;by(bS,b1=="radial"?{fx:bX,fy:bV}:{x1:bU[0],y1:bU[1],x2:bU[2],y2:bU[3],gradientTransform:bZ.matrix.invert()});E.defs.appendChild(bS);for(var bY=0,b4=b0.length;bY<b4;bY++){bS.appendChild(by("stop",{offset:b0[bY].offset?b0[bY].offset:bY?"100%":"0%","stop-color":b0[bY].color||"#fff"}))}}}by(bT,{fill:"url(#"+S+")",opacity:1,"fill-opacity":1});b5.fill=bG;b5.opacity=1;b5.fillOpacity=1;return 1},d=function(S){var E=S.getBBox(1);by(S.pattern,{patternTransform:S.matrix.invert()+" translate("+E.x+","+E.y+")"})},bK={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},bA=function(bW,bU,bV){bU=bK[bQ(bU).toLowerCase()];if(bU){var bS=bW.attrs["stroke-width"]||"1",E={round:bS,square:bS,butt:0}[bW.attrs["stroke-linecap"]||bV["stroke-linecap"]]||0,bT=[],S=bU.length;while(S--){bT[S]=bU[S]*bS+((S%2)?1:-1)*E}by(bW.node,{"stroke-dasharray":bT.join(",")})}},bL=function(b1,b9){var b5=b1.node,b2=b1.attrs,bZ=b5.style.visibility;b5.style.visibility="hidden";for(var b4 in b9){if(b9[g](b4)){if(!aG._availableAttrs[g](b4)){continue}var b3=b9[b4];b2[b4]=b3;switch(b4){case"blur":b1.blur(b3);break;case"title":var ca=b5.getElementsByTagName("title");if(ca.length&&(ca=ca[0])){ca.firstChild.nodeValue=b3}else{ca=by("title");var cb=aG._g.doc.createTextNode(b3);ca.appendChild(cb);b5.appendChild(ca)}break;case"href":case"target":var b7=b5.parentNode;if(b7.tagName.toLowerCase()!="a"){var bU=by("a");b7.insertBefore(bU,b5);bU.appendChild(b5);b7=bU}if(b4=="target"){b7.setAttributeNS(bD,"show",b3=="blank"?"new":b3)}else{b7.setAttributeNS(bD,b4,b3)}break;case"cursor":b5.style.cursor=b3;break;case"transform":b1.transform(b3);break;case"arrow-start":addArrow(b1,b3);break;case"arrow-end":addArrow(b1,b3,1);break;case"clip-rect":var S=bQ(b3).split(bw);if(S.length==4){b1.clip&&b1.clip.parentNode.parentNode.removeChild(b1.clip.parentNode);var bS=by("clipPath"),b6=by("rect");bS.id=aG.createUUID();by(b6,{x:S[0],y:S[1],width:S[2],height:S[3]});bS.appendChild(b6);b1.paper.defs.appendChild(bS);by(b5,{"clip-path":"url(#"+bS.id+")"});b1.clip=b6}if(!b3){var b0=b5.getAttribute("clip-path");if(b0){var b8=aG._g.doc.getElementById(b0.replace(/(^url\(#|\)$)/g,bG));b8&&b8.parentNode.removeChild(b8);by(b5,{"clip-path":bG});delete b1.clip}}break;case"path":if(b1.type=="path"){by(b5,{d:b3?b2.path=aG._pathToAbsolute(b3):"M0,0"});b1._.dirty=1;if(b1._.arrows){"startString" in b1._.arrows&&addArrow(b1,b1._.arrows.startString);"endString" in b1._.arrows&&addArrow(b1,b1._.arrows.endString,1)}}break;case"width":b5.setAttribute(b4,b3);b1._.dirty=1;if(b2.fx){b4="x";b3=b2.x}else{break}case"x":if(b2.fx){b3=-b2.x-(b2.width||0)}case"rx":if(b4=="rx"&&b1.type=="rect"){break}case"cx":b5.setAttribute(b4,b3);b1.pattern&&d(b1);b1._.dirty=1;break;case"height":b5.setAttribute(b4,b3);b1._.dirty=1;if(b2.fy){b4="y";b3=b2.y}else{break}case"y":if(b2.fy){b3=-b2.y-(b2.height||0)}case"ry":if(b4=="ry"&&b1.type=="rect"){break}case"cy":b5.setAttribute(b4,b3);b1.pattern&&d(b1);b1._.dirty=1;break;case"r":if(b1.type=="rect"){by(b5,{rx:b3,ry:b3})}else{b5.setAttribute(b4,b3)}b1._.dirty=1;break;case"src":if(b1.type=="image"){b5.setAttributeNS(bD,"href",b3)}break;case"stroke-width":if(b1._.sx!=1||b1._.sy!=1){b3/=bR(bH(b1._.sx),bH(b1._.sy))||1}if(b1.paper._vbSize){b3*=b1.paper._vbSize}b5.setAttribute(b4,b3);if(b2["stroke-dasharray"]){bA(b1,b2["stroke-dasharray"],b9)}if(b1._.arrows){"startString" in b1._.arrows&&addArrow(b1,b1._.arrows.startString);"endString" in b1._.arrows&&addArrow(b1,b1._.arrows.endString,1)}break;case"stroke-dasharray":bA(b1,b3,b9);break;case"fill":var bV=bQ(b3).match(aG._ISURL);if(bV){bS=by("pattern");var bY=by("image");bS.id=aG.createUUID();by(bS,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1});by(bY,{x:0,y:0,"xlink:href":bV[1]});bS.appendChild(bY);(function(cc){aG._preload(bV[1],function(){var cd=this.offsetWidth,ce=this.offsetHeight;by(cc,{width:cd,height:ce});by(bY,{width:cd,height:ce});b1.paper.safari()})})(bS);b1.paper.defs.appendChild(bS);by(b5,{fill:"url(#"+bS.id+")"});b1.pattern=bS;b1.pattern&&d(b1);break}var bT=aG.getRGB(b3);if(!bT.error){delete b9.gradient;delete b2.gradient;!aG.is(b2.opacity,"undefined")&&aG.is(b9.opacity,"undefined")&&by(b5,{opacity:b2.opacity});!aG.is(b2["fill-opacity"],"undefined")&&aG.is(b9["fill-opacity"],"undefined")&&by(b5,{"fill-opacity":b2["fill-opacity"]})}else{if((b1.type=="circle"||b1.type=="ellipse"||bQ(b3).charAt()!="r")&&b(b1,b3)){if("opacity" in b2||"fill-opacity" in b2){var E=aG._g.doc.getElementById(b5.getAttribute("fill").replace(/^url\(#|\)$/g,bG));if(E){var bW=E.getElementsByTagName("stop");by(bW[bW.length-1],{"stop-opacity":("opacity" in b2?b2.opacity:1)*("fill-opacity" in b2?b2["fill-opacity"]:1)})}}b2.gradient=b3;b2.fill="none";break}}bT[g]("opacity")&&by(b5,{"fill-opacity":bT.opacity>1?bT.opacity/100:bT.opacity});case"stroke":bT=aG.getRGB(b3);b5.setAttribute(b4,bT.hex);b4=="stroke"&&bT[g]("opacity")&&by(b5,{"stroke-opacity":bT.opacity>1?bT.opacity/100:bT.opacity});if(b4=="stroke"&&b1._.arrows){"startString" in b1._.arrows&&addArrow(b1,b1._.arrows.startString);"endString" in b1._.arrows&&addArrow(b1,b1._.arrows.endString,1)}break;case"gradient":(b1.type=="circle"||b1.type=="ellipse"||bQ(b3).charAt()!="r")&&b(b1,b3);break;case"opacity":if(b2.gradient&&!b2[g]("stroke-opacity")){by(b5,{"stroke-opacity":b3>1?b3/100:b3})}case"fill-opacity":if(b2.gradient){E=aG._g.doc.getElementById(b5.getAttribute("fill").replace(/^url\(#|\)$/g,bG));if(E){bW=E.getElementsByTagName("stop");by(bW[bW.length-1],{"stop-opacity":b3})}break}default:b4=="font-size"&&(b3=bF(b3,10)+"px");var bX=b4.replace(/(\-.)/g,function(cc){return cc.substring(1).toUpperCase()});b5.style[bX]=b3;b1._.dirty=1;b5.setAttribute(b4,b3);break}}}bE(b1,b9);b5.style.visibility=bZ},bP=1.2,bE=function(E,bU){if(E.type!="text"||!(bU[g]("text")||bU[g]("font")||bU[g]("font-size")||bU[g]("x")||bU[g]("y"))){return}var bZ=E.attrs,bS=E.node,b1=bS.firstChild?bF(aG._g.doc.defaultView.getComputedStyle(bS.firstChild,bG).getPropertyValue("font-size"),10):10;if(bU[g]("text")){bZ.text=bU.text;while(bS.firstChild){bS.removeChild(bS.firstChild)}var bT=bQ(bU.text).split("\n"),S=[],bX;for(var bV=0,b0=bT.length;bV<b0;bV++){bX=by("tspan");bV&&by(bX,{dy:b1*bP,x:bZ.x});bX.appendChild(aG._g.doc.createTextNode(bT[bV]));bS.appendChild(bX);S[bV]=bX}}else{S=bS.getElementsByTagName("tspan");for(bV=0,b0=S.length;bV<b0;bV++){if(bV){by(S[bV],{dy:b1*bP,x:bZ.x})}else{by(S[0],{dy:0})}}}by(bS,{x:bZ.x,y:bZ.y});E._.dirty=1;var bW=E._getBBox(),bY=bZ.y-(bW.y+bW.height/2);bY&&aG.is(bY,"finite")&&by(S[0],{dy:bY})},bI=function(S,E){var bT=0,bS=0;this[0]=this.node=S;S.drag=true;this.id=aG._oid++;S.dragid=this.id;this.matrix=aG.matrix();this.realPath=null;this.paper=E;this.attrs=this.attrs||{};this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1};!E.bottom&&(E.bottom=this);this.prev=E.top;E.top&&(E.top.next=this);E.top=this;this.next=null},bB=aG.el;bI.prototype=bB;bB.constructor=bI;aG._engine.path=function(E,bT){var S=by("path");bT.canvas&&bT.canvas.appendChild(S);var bS=new bI(S,bT);bS.type="path";bL(bS,{fill:"none",stroke:"#000",path:E});return bS};bB.rotate=function(S,E,bT){if(this.removed){return this}S=bQ(S).split(bw);if(S.length-1){E=bC(S[1]);bT=bC(S[2])}S=bC(S[0]);(bT==null)&&(E=bT);if(E==null||bT==null){var bS=this.getBBox(1);E=bS.x+bS.width/2;bT=bS.y+bS.height/2}this.transform(this._.transform.concat([["r",S,E,bT]]));return this};bB.scale=function(bU,bS,E,bT){if(this.removed){return this}bU=bQ(bU).split(bw);if(bU.length-1){bS=bC(bU[1]);E=bC(bU[2]);bT=bC(bU[3])}bU=bC(bU[0]);(bS==null)&&(bS=bU);(bT==null)&&(E=bT);if(E==null||bT==null){var S=this.getBBox(1)}E=E==null?S.x+S.width/2:E;bT=bT==null?S.y+S.height/2:bT;this.transform(this._.transform.concat([["s",bU,bS,E,bT]]));return this};bB.translate=function(S,E){if(this.removed){return this}S=bQ(S).split(bw);if(S.length-1){E=bC(S[1])}S=bC(S[0])||0;E=+E||0;this.transform(this._.transform.concat([["t",S,E]]));return this};bB.transform=function(S){var bS=this._;if(S==null){return bS.transform}aG._extractTransform(this,S);this.clip&&by(this.clip,{transform:this.matrix.invert()});this.pattern&&d(this);this.node&&by(this.node,{transform:this.matrix});if(bS.sx!=1||bS.sy!=1){var E=this.attrs[g]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":E})}return this};bB.hide=function(){!this.removed&&this.paper.safari(this.node.style.display="none");return this};bB.show=function(){!this.removed&&this.paper.safari(this.node.style.display="");return this};bB.remove=function(){if(this.removed||!this.node.parentNode){return}var S=this.paper;S.__set__&&S.__set__.exclude(this);bO.unbind("drag.*.*."+this.id);if(this.gradient){S.defs.removeChild(this.gradient)}aG._tear(this,S);if(this.node.parentNode.tagName.toLowerCase()=="a"){this.node.parentNode.parentNode.removeChild(this.node.parentNode)}else{this.node.parentNode.removeChild(this.node)}for(var E in this){this[E]=typeof this[E]=="function"?aG._removedFactory(E):null}this.removed=true};bB._getBBox=function(){if(this.node.style.display=="none"){this.show();var E=true}var bS={};try{bS=this.node.getBBox()}catch(S){}finally{bS=bS||{}}E&&this.hide();return bS};bB.attr=function(E,bZ){if(this.removed){return this}if(E==null){var bW={};for(var bY in this.attrs){if(this.attrs[g](bY)){bW[bY]=this.attrs[bY]}}bW.gradient&&bW.fill=="none"&&(bW.fill=bW.gradient)&&delete bW.gradient;bW.transform=this._.transform;return bW}if(bZ==null&&aG.is(E,"string")){if(E=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient){return this.attrs.gradient}if(E=="transform"){return this._.transform}var bX=E.split(bw),bT={};for(var bU=0,b1=bX.length;bU<b1;bU++){E=bX[bU];if(E in this.attrs){bT[E]=this.attrs[E]}else{if(aG.is(this.paper.customAttributes[E],"function")){bT[E]=this.paper.customAttributes[E].def}else{bT[E]=aG._availableAttrs[E]}}}return b1-1?bT:bT[bX[0]]}if(bZ==null&&aG.is(E,"array")){bT={};for(bU=0,b1=E.length;bU<b1;bU++){bT[E[bU]]=this.attr(E[bU])}return bT}if(bZ!=null){var S={};S[E]=bZ}else{if(E!=null&&aG.is(E,"object")){S=E}}for(var b0 in S){bO("drag.attr."+b0+"."+this.id,this,S[b0])}for(b0 in this.paper.customAttributes){if(this.paper.customAttributes[g](b0)&&S[g](b0)&&aG.is(this.paper.customAttributes[b0],"function")){var bV=this.paper.customAttributes[b0].apply(this,[].concat(S[b0]));this.attrs[b0]=S[b0];for(var bS in bV){if(bV[g](bS)){S[bS]=bV[bS]}}}}bL(this,S);return this};bB.insertAfter=function(E){if(this.removed){return this}var S=E.node||E[E.length-1].node;if(S.nextSibling){S.parentNode.insertBefore(this.node,S.nextSibling)}else{S.parentNode.appendChild(this.node)}aG._insertafter(this,E,this.paper);return this};bB.insertBefore=function(E){if(this.removed){return this}var S=E.node||E[0].node;S.parentNode.insertBefore(this.node,S);aG._insertbefore(this,E,this.paper);return this};bB.blur=function(S){var E=this;if(+S!==0){var bS=by("filter"),bT=by("feGaussianBlur");E.attrs.blur=S;bS.id=aG.createUUID();by(bT,{stdDeviation:+S||1.5});bS.appendChild(bT);E.paper.defs.appendChild(bS);E._blur=bS;by(E.node,{filter:"url(#"+bS.id+")"})}else{if(E._blur){E._blur.parentNode.removeChild(E._blur);delete E._blur;delete E.attrs.blur}E.node.removeAttribute("filter")}return E};aG._engine.circle=function(S,E,bV,bU){var bT=by("circle");S.canvas&&S.canvas.appendChild(bT);var bS=new bI(bT,S);bS.attrs={cx:E,cy:bV,r:bU,fill:"none",stroke:"#000"};bS.type="circle";by(bT,bS.attrs);return bS};aG._engine.rect=function(bS,E,bX,S,bV,bW){var bU=by("rect");bS.canvas&&bS.canvas.appendChild(bU);var bT=new bI(bU,bS);bT.attrs={x:E,y:bX,width:S,height:bV,r:bW||0,rx:bW||0,ry:bW||0,fill:"none",stroke:"#000"};bT.type="rect";by(bU,bT.attrs);return bT};aG._engine.ellipse=function(S,E,bW,bV,bU){var bT=by("ellipse");S.canvas&&S.canvas.appendChild(bT);var bS=new bI(bT,S);bS.attrs={cx:E,cy:bW,rx:bV,ry:bU,fill:"none",stroke:"#000"};bS.type="ellipse";by(bT,bS.attrs);return bS};aG._engine.image=function(bS,bW,E,bX,S,bV){var bU=by("image");by(bU,{x:E,y:bX,width:S,height:bV,preserveAspectRatio:"none"});bU.setAttributeNS(bD,"href",bW);bS.canvas&&bS.canvas.appendChild(bU);var bT=new bI(bU,bS);bT.attrs={x:E,y:bX,width:S,height:bV,src:bW};bT.type="image";return bT};aG._engine.text=function(S,E,bV,bU){var bT=by("text");S.canvas&&S.canvas.appendChild(bT);var bS=new bI(bT,S);bS.attrs={x:E,y:bV,"text-anchor":"middle",text:bU,font:aG._availableAttrs.font,stroke:"none",fill:"#000"};bS.type="text";bL(bS,bS.attrs);return bS};aG._engine.setSize=function(S,E){this.width=S||this.width;this.height=E||this.height;this.canvas.setAttribute("width",this.width);this.canvas.setAttribute("height",this.height);if(this._viewBox){this.setViewBox.apply(this,this._viewBox)}return this};aG._engine.create=function(){var bT=aG._getContainer.apply(0,arguments),S=bT&&bT.container,bX=bT.x,bW=bT.y,bS=bT.width,bY=bT.height;if(!S){throw new Error("SVG container not found.")}var E=by("svg"),bV="overflow:hidden;",bU;bX=bX||0;bW=bW||0;bS=bS||512;bY=bY||342;by(E,{height:bY,version:1.1,width:bS,xmlns:"http://www.w3.org/2000/svg"});if(S==1){E.style.cssText=bV+"position:absolute;left:"+bX+"px;top:"+bW+"px";aG._g.doc.body.appendChild(E);bU=1}else{E.style.cssText=bV+"position:relative";if(S.firstChild){S.insertBefore(E,S.firstChild)}else{S.appendChild(E)}}S=new aG._Paper;S.width=bS;S.height=bY;S.canvas=E;S.clear();S._left=S._top=0;bU&&(S.renderfix=function(){});S.renderfix();return S};aG.prototype.renderfix=function(){var bV=this.canvas,E=bV.style,bU;try{bU=bV.getScreenCTM()||bV.createSVGMatrix()}catch(bT){bU=bV.createSVGMatrix()}var bS=-bU.e%1,S=-bU.f%1;if(bS||S){if(bS){this._left=(this._left+bS)%1;E.left=this._left+"px"}if(S){this._top=(this._top+S)%1;E.top=this._top+"px"}}};aG.prototype.clear=function(){aG.eve("drag.clear",this);var E=this.canvas;while(E.firstChild){E.removeChild(E.firstChild)}this.bottom=this.top=null;(this.desc=by("desc")).appendChild(aG._g.doc.createTextNode("Created By Liyu"));E.appendChild(this.desc);E.appendChild(this.defs=by("defs"))};aG.prototype.remove=function(){bO("drag.remove",this);this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var E in this){this[E]=typeof this[E]=="function"?aG._removedFactory(E):null}};var bM=aG.st;for(var R in bB){if(bB[g](R)&&!bM[g](R)){bM[R]=(function(E){return function(){var S=arguments;return this.forEach(function(bS){bS[E].apply(bS,S)})}})(R)}}})();(function(){if(!aG.vml){return}var g="hasOwnProperty",bS=String,bB=parseFloat,bw=Math,bP=bw.round,bV=bw.max,bQ=bw.min,bG=bw.abs,bJ="fill",bx=/[, ]+/,bO=aG.eve,bK=" progid:DXImageTransform.Microsoft",bz=" ",bE="",bR={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},by=/([clmz]),?([^clmz]*)/gi,bH=/ progid:\S+Blur\([^\)]+\)/g,bU=/-?[^,\s-]+/g,d="position:absolute;left:0;top:0;width:1px;height:1px",b=21600,bN={path:1,rect:1,image:1},bF={circle:1,ellipse:1},R=function(b4){var b1=/[ahqstv]/ig,bW=aG._pathToAbsolute;bS(b4).match(b1)&&(bW=aG._path2curve);b1=/[clmz]/g;if(bW==aG._pathToAbsolute&&!bS(b4).match(b1)){var b0=bS(b4).replace(by,function(b8,ca,b6){var b9=[],b5=ca.toLowerCase()=="m",b7=bR[ca];b6.replace(bU,function(cb){if(b5&&b9.length==2){b7+=b9+bR[ca=="m"?"l":"L"];b9=[]}b9.push(bP(cb*b))});return b7+b9});return b0}var b2=bW(b4),S,E;b0=[];for(var bY=0,b3=b2.length;bY<b3;bY++){S=b2[bY];E=b2[bY][0].toLowerCase();E=="z"&&(E="x");for(var bX=1,bZ=S.length;bX<bZ;bX++){E+=bP(S[bX]*b)+(bX!=bZ-1?",":bE)}b0.push(E)}return b0.join(bz)},bC=function(bX,bW,S){var E=aG.matrix();E.rotate(-bX,0.5,0.5);return{dx:E.x(bW,S),dy:E.y(bW,S)}},bD=function(b3,b2,b1,bY,bX,bZ){var cb=b3._,b5=b3.matrix,E=cb.fillpos,b4=b3.node,b0=b4.style,bW=1,S="",b7,b9=b/b2,b8=b/b1;b0.visibility="hidden";if(!b2||!b1){return}b4.coordsize=bG(b9)+bz+bG(b8);b0.rotation=bZ*(b2*b1<0?-1:1);if(bZ){var ca=bC(bZ,bY,bX);bY=ca.dx;bX=ca.dy}b2<0&&(S+="x");b1<0&&(S+=" y")&&(bW=-1);b0.flip=S;b4.coordorigin=(bY*-b9)+bz+(bX*-b8);if(E||cb.fillsize){var b6=b4.getElementsByTagName(bJ);b6=b6&&b6[0];b4.removeChild(b6);if(E){ca=bC(bZ,b5.x(E[0],E[1]),b5.y(E[0],E[1]));b6.position=ca.dx*bW+bz+ca.dy*bW}if(cb.fillsize){b6.size=cb.fillsize[0]*bG(b2)+bz+cb.fillsize[1]*bG(b1)}b4.appendChild(b6)}b0.visibility="visible"};aG.toString=function(){return"Your browser doesn\u2019t support SVG. Falling down to VML.\nYou are running Rapha\xebl "+this.version};var bL=function(cb,cl){cb.attrs=cb.attrs||{};var cg=cb.node,cp=cb.attrs,b7=cg.style,b3,cj=bN[cb.type]&&(cl.x!=cp.x||cl.y!=cp.y||cl.width!=cp.width||cl.height!=cp.height||cl.cx!=cp.cx||cl.cy!=cp.cy||cl.rx!=cp.rx||cl.ry!=cp.ry||cl.r!=cp.r),ca=bF[cb.type]&&(cp.cx!=cl.cx||cp.cy!=cl.cy||cp.r!=cl.r||cp.rx!=cl.rx||cp.ry!=cl.ry),cs=cb;for(var b8 in cl){if(cl[g](b8)){cp[b8]=cl[b8]}}if(cj){cp.path=aG._getPath[cb.type](cb);cb._.dirty=1}cl.href&&(cg.href=cl.href);cl.title&&(cg.title=cl.title);cl.target&&(cg.target=cl.target);cl.cursor&&(b7.cursor=cl.cursor);"blur" in cl&&cb.blur(cl.blur);if(cl.path&&cb.type=="path"||cj){cg.path=R(~bS(cp.path).toLowerCase().indexOf("r")?aG._pathToAbsolute(cp.path):cp.path);if(cb.type=="image"){cb._.fillpos=[cp.x,cp.y];cb._.fillsize=[cp.width,cp.height];bD(cb,1,1,0,0,0)}}"transform" in cl&&cb.transform(cl.transform);if(ca){var bY=+cp.cx,bW=+cp.cy,b2=+cp.rx||+cp.r||0,b1=+cp.ry||+cp.r||0;cg.path=aG.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",bP((bY-b2)*b),bP((bW-b1)*b),bP((bY+b2)*b),bP((bW+b1)*b),bP(bY*b));cb._.dirty=1}if("clip-rect" in cl){var S=bS(cl["clip-rect"]).split(bx);if(S.length==4){S[2]=+S[2]+(+S[0]);S[3]=+S[3]+(+S[1]);var b9=cg.clipRect||aG._g.doc.createElement("div"),cr=b9.style;cr.clip=aG.format("rect({1}px {2}px {3}px {0}px)",S);if(!cg.clipRect){cr.position="absolute";cr.top=0;cr.left=0;cr.width=cb.paper.width+"px";cr.height=cb.paper.height+"px";cg.parentNode.insertBefore(b9,cg);b9.appendChild(cg);cg.clipRect=b9}}if(!cl["clip-rect"]){cg.clipRect&&(cg.clipRect.style.clip="auto")}}if(cb.textpath){var cn=cb.textpath.style;cl.font&&(cn.font=cl.font);cl["font-family"]&&(cn.fontFamily='"'+cl["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,bE)+'"');cl["font-size"]&&(cn.fontSize=cl["font-size"]);cl["font-weight"]&&(cn.fontWeight=cl["font-weight"]);cl["font-style"]&&(cn.fontStyle=cl["font-style"])}if("arrow-start" in cl){addArrow(cs,cl["arrow-start"])}if("arrow-end" in cl){addArrow(cs,cl["arrow-end"],1)}if(cl.opacity!=null||cl["stroke-width"]!=null||cl.fill!=null||cl.src!=null||cl.stroke!=null||cl["stroke-width"]!=null||cl["stroke-opacity"]!=null||cl["fill-opacity"]!=null||cl["stroke-dasharray"]!=null||cl["stroke-miterlimit"]!=null||cl["stroke-linejoin"]!=null||cl["stroke-linecap"]!=null){var ch=cg.getElementsByTagName(bJ),co=false;ch=ch&&ch[0];!ch&&(co=ch=bT(bJ));if(cb.type=="image"&&cl.src){ch.src=cl.src}cl.fill&&(ch.on=true);if(ch.on==null||cl.fill=="none"||cl.fill===null){ch.on=false}if(ch.on&&cl.fill){var b0=bS(cl.fill).match(aG._ISURL);if(b0){ch.parentNode==cg&&cg.removeChild(ch);ch.rotate=true;ch.src=b0[1];ch.type="tile";var E=cb.getBBox(1);ch.position=E.x+bz+E.y;cb._.fillpos=[E.x,E.y];aG._preload(b0[1],function(){cb._.fillsize=[this.offsetWidth,this.offsetHeight]})}else{ch.color=aG.getRGB(cl.fill).hex;ch.src=bE;ch.type="solid";if(aG.getRGB(cl.fill).error&&(cs.type in {circle:1,ellipse:1}||bS(cl.fill).charAt()!="r")&&addGradientFill(cs,cl.fill,ch)){cp.fill="none";cp.gradient=cl.fill;ch.rotate=false}}}if("fill-opacity" in cl||"opacity" in cl){var bZ=((+cp["fill-opacity"]+1||2)-1)*((+cp.opacity+1||2)-1)*((+aG.getRGB(cl.fill).o+1||2)-1);bZ=bQ(bV(bZ,0),1);ch.opacity=bZ;if(ch.src){ch.color="none"}}cg.appendChild(ch);var b4=(cg.getElementsByTagName("stroke")&&cg.getElementsByTagName("stroke")[0]),cq=false;!b4&&(cq=b4=bT("stroke"));if((cl.stroke&&cl.stroke!="none")||cl["stroke-width"]||cl["stroke-opacity"]!=null||cl["stroke-dasharray"]||cl["stroke-miterlimit"]||cl["stroke-linejoin"]||cl["stroke-linecap"]){b4.on=true}(cl.stroke=="none"||cl.stroke===null||b4.on==null||cl.stroke==0||cl["stroke-width"]==0)&&(b4.on=false);var cf=aG.getRGB(cl.stroke);b4.on&&cl.stroke&&(b4.color=cf.hex);bZ=((+cp["stroke-opacity"]+1||2)-1)*((+cp.opacity+1||2)-1)*((+cf.o+1||2)-1);var cc=(bB(cl["stroke-width"])||1)*0.75;bZ=bQ(bV(bZ,0),1);cl["stroke-width"]==null&&(cc=cp["stroke-width"]);cl["stroke-width"]&&(b4.weight=cc);cc&&cc<1&&(bZ*=cc)&&(b4.weight=1);b4.opacity=bZ;cl["stroke-linejoin"]&&(b4.joinstyle=cl["stroke-linejoin"]||"miter");b4.miterlimit=cl["stroke-miterlimit"]||8;cl["stroke-linecap"]&&(b4.endcap=cl["stroke-linecap"]=="butt"?"flat":cl["stroke-linecap"]=="square"?"square":"round");if("stroke-dasharray" in cl){var ce={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};b4.dashstyle=ce[g](cl["stroke-dasharray"])?ce[cl["stroke-dasharray"]]:bE}cq&&cg.appendChild(b4)}if(cs.type=="text"){cs.paper.canvas.style.display=bE;var ci=cs.paper.span,cd=100,bX=cp.font&&cp.font.match(/\d+(?:\.\d*)?(?=px)/);b7=ci.style;cp.font&&(b7.font=cp.font);cp["font-family"]&&(b7.fontFamily=cp["font-family"]);cp["font-weight"]&&(b7.fontWeight=cp["font-weight"]);cp["font-style"]&&(b7.fontStyle=cp["font-style"]);bX=bB(cp["font-size"]||bX&&bX[0])||10;b7.fontSize=bX*cd+"px";cs.textpath.string&&(ci.innerHTML=bS(cs.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var b6=ci.getBoundingClientRect();cs.W=cp.w=(b6.right-b6.left)/cd;cs.H=cp.h=(b6.bottom-b6.top)/cd;cs.X=cp.x;cs.Y=cp.y+cs.H/2;("x" in cl||"y" in cl)&&(cs.path.v=aG.format("m{0},{1}l{2},{1}",bP(cp.x*b),bP(cp.y*b),bP(cp.x*b)+1));var b5=["x","y","text","font","font-family","font-weight","font-style","font-size"];for(var ck=0,cm=b5.length;ck<cm;ck++){if(b5[ck] in cl){cs._.dirty=1;break}}switch(cp["text-anchor"]){case"start":cs.textpath.style["v-text-align"]="left";cs.bbx=cs.W/2;break;case"end":cs.textpath.style["v-text-align"]="right";cs.bbx=-cs.W/2;break;default:cs.textpath.style["v-text-align"]="center";cs.bbx=0;break}cs.textpath.style["v-text-kern"]=true}},bI=function(S,E){this[0]=this.node=S;S.drag=true;this.id=aG._oid++;S.dragid=this.id;this.X=0;this.Y=0;this.attrs={};this.paper=E;this.matrix=aG.matrix();this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1};!E.bottom&&(E.bottom=this);this.prev=E.top;E.top&&(E.top.next=this);E.top=this;this.next=null};var bA=aG.el;bI.prototype=bA;bA.constructor=bI;bA.transform=function(bY){if(bY==null){return this._.transform}var b0=this.paper._viewBoxShift,bZ=b0?"s"+[b0.scale,b0.scale]+"-1-1t"+[b0.dx,b0.dy]:bE,b3;if(b0){b3=bY=bS(bY).replace(/\.{3}|\u2026/g,this._.transform||bE)}aG._extractTransform(this,bZ+bY);var b4=this.matrix.clone(),b6=this.skew,bW=this.node,b2,bX=~bS(this.attrs.fill).indexOf("-"),E=!bS(this.attrs.fill).indexOf("url(");b4.translate(1,1);if(E||bX||this.type=="image"){b6.matrix="1 0 0 1";b6.offset="0 0";b2=b4.split();if((bX&&b2.noRotation)||!b2.isSimple){bW.style.filter=b4.toFilter();var b1=this.getBBox(),S=this.getBBox(1),b7=b1.x-S.x,b5=b1.y-S.y;bW.coordorigin=(b7*-b)+bz+(b5*-b);bD(this,1,1,b7,b5,0)}else{bW.style.filter=bE;bD(this,b2.scalex,b2.scaley,b2.dx,b2.dy,b2.rotate)}}else{bW.style.filter=bE;b6.matrix=bS(b4);b6.offset=b4.offset()}b3&&(this._.transform=b3);return this};bA.rotate=function(S,E,bX){if(this.removed){return this}if(S==null){return}S=bS(S).split(bx);if(S.length-1){E=bB(S[1]);bX=bB(S[2])}S=bB(S[0]);(bX==null)&&(E=bX);if(E==null||bX==null){var bW=this.getBBox(1);E=bW.x+bW.width/2;bX=bW.y+bW.height/2}this._.dirtyT=1;this.transform(this._.transform.concat([["r",S,E,bX]]));return this};bA.translate=function(S,E){if(this.removed){return this}S=bS(S).split(bx);if(S.length-1){E=bB(S[1])}S=bB(S[0])||0;E=+E||0;if(this._.bbox){this._.bbox.x+=S;this._.bbox.y+=E}this.transform(this._.transform.concat([["t",S,E]]));return this};bA.scale=function(bY,bW,E,bX){if(this.removed){return this}bY=bS(bY).split(bx);if(bY.length-1){bW=bB(bY[1]);E=bB(bY[2]);bX=bB(bY[3]);isNaN(E)&&(E=null);isNaN(bX)&&(bX=null)}bY=bB(bY[0]);(bW==null)&&(bW=bY);(bX==null)&&(E=bX);if(E==null||bX==null){var S=this.getBBox(1)}E=E==null?S.x+S.width/2:E;bX=bX==null?S.y+S.height/2:bX;this.transform(this._.transform.concat([["s",bY,bW,E,bX]]));this._.dirtyT=1;return this};bA.hide=function(){!this.removed&&(this.node.style.display="none");return this};bA.show=function(){!this.removed&&(this.node.style.display=bE);return this};bA._getBBox=function(){if(this.removed){return{}}return{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}};bA.remove=function(){if(this.removed||!this.node.parentNode){return}this.paper.__set__&&this.paper.__set__.exclude(this);aG.eve.unbind("drag.*.*."+this.id);aG._tear(this,this.paper);this.node.parentNode.removeChild(this.node);this.shape&&this.shape.parentNode.removeChild(this.shape);for(var E in this){this[E]=typeof this[E]=="function"?aG._removedFactory(E):null}this.removed=true};bA.attr=function(E,b3){if(this.removed){return this}if(E==null){var b0={};for(var b2 in this.attrs){if(this.attrs[g](b2)){b0[b2]=this.attrs[b2]}}b0.gradient&&b0.fill=="none"&&(b0.fill=b0.gradient)&&delete b0.gradient;b0.transform=this._.transform;return b0}if(b3==null&&aG.is(E,"string")){if(E==bJ&&this.attrs.fill=="none"&&this.attrs.gradient){return this.attrs.gradient}var b1=E.split(bx),bX={};for(var bY=0,b5=b1.length;bY<b5;bY++){E=b1[bY];if(E in this.attrs){bX[E]=this.attrs[E]}else{if(aG.is(this.paper.customAttributes[E],"function")){bX[E]=this.paper.customAttributes[E].def}else{bX[E]=aG._availableAttrs[E]}}}return b5-1?bX:bX[b1[0]]}if(this.attrs&&b3==null&&aG.is(E,"array")){bX={};for(bY=0,b5=E.length;bY<b5;bY++){bX[E[bY]]=this.attr(E[bY])}return bX}var S;if(b3!=null){S={};S[E]=b3}b3==null&&aG.is(E,"object")&&(S=E);for(var b4 in S){bO("drag.attr."+b4+"."+this.id,this,S[b4])}if(S){for(b4 in this.paper.customAttributes){if(this.paper.customAttributes[g](b4)&&S[g](b4)&&aG.is(this.paper.customAttributes[b4],"function")){var bZ=this.paper.customAttributes[b4].apply(this,[].concat(S[b4]));this.attrs[b4]=S[b4];for(var bW in bZ){if(bZ[g](bW)){S[bW]=bZ[bW]}}}}if(S.text&&this.type=="text"){this.textpath.string=S.text}bL(this,S)}return this};bA.insertAfter=function(E){if(this.removed){return this}if(E.constructor==aG.st.constructor){E=E[E.length-1]}if(E.node.nextSibling){E.node.parentNode.insertBefore(this.node,E.node.nextSibling)}else{E.node.parentNode.appendChild(this.node)}aG._insertafter(this,E,this.paper);return this};bA.insertBefore=function(E){if(this.removed){return this}if(E.constructor==aG.st.constructor){E=E[0]}E.node.parentNode.insertBefore(this.node,E.node);aG._insertbefore(this,E,this.paper);return this};bA.blur=function(E){var S=this.node.runtimeStyle,bW=S.filter;bW=bW.replace(bH,bE);if(+E!==0){this.attrs.blur=E;S.filter=bW+bz+bK+".Blur(pixelradius="+(+E||1.5)+")";S.margin=aG.format("-{0}px 0 0 -{0}px",bP(+E||1.5))}else{S.filter=bW;S.margin=0;delete this.attrs.blur}return this};aG._engine.path=function(bX,S){var bY=bT("shape");bY.style.cssText=d;bY.coordsize=b+bz+b;bY.coordorigin=S.coordorigin;var bZ=new bI(bY,S),E={fill:"none",stroke:"#000"};bX&&(E.path=bX);bZ.type="path";bZ.path=[];bZ.Path=bE;bL(bZ,E);S.canvas.appendChild(bY);var bW=bT("skew");bW.on=true;bY.appendChild(bW);bZ.skew=bW;bZ.transform(bE);return bZ};aG._engine.rect=function(S,b0,bY,b1,bW,E){var b2=aG._rectPath(b0,bY,b1,bW,E),bX=S.path(b2),bZ=bX.attrs;bX.X=bZ.x=b0;bX.Y=bZ.y=bY;bX.W=bZ.width=b1;bX.H=bZ.height=bW;bZ.r=E;bZ.path=b2;bX.type="rect";return bX};aG._engine.ellipse=function(S,E,b0,bZ,bY){var bX=S.path(),bW=bX.attrs;bX.X=E-bZ;bX.Y=b0-bY;bX.W=bZ*2;bX.H=bY*2;bX.type="ellipse";bL(bX,{cx:E,cy:b0,rx:bZ,ry:bY});return bX};aG._engine.circle=function(S,E,bZ,bY){var bX=S.path(),bW=bX.attrs;bX.X=E-bY;bX.Y=bZ-bY;bX.W=bX.H=bY*2;bX.type="circle";bL(bX,{cx:E,cy:bZ,r:bY});return bX};aG._engine.image=function(S,E,b1,bZ,b2,bX){var b4=aG._rectPath(b1,bZ,b2,bX),bY=S.path(b4).attr({stroke:"none"}),b0=bY.attrs,bW=bY.node,b3=bW.getElementsByTagName(bJ)[0];b0.src=E;bY.X=b0.x=b1;bY.Y=b0.y=bZ;bY.W=b0.width=b2;bY.H=b0.height=bX;b0.path=b4;bY.type="image";b3.parentNode==bW&&bW.removeChild(b3);b3.rotate=true;b3.src=E;b3.type="tile";bY._.fillpos=[b1,bZ];bY._.fillsize=[b2,bX];bW.appendChild(b3);bD(bY,1,1,0,0,0);return bY};aG._engine.text=function(E,b0,bZ,b1){var bX=bT("shape"),b3=bT("path"),bW=bT("textpath");b0=b0||0;bZ=bZ||0;b1=b1||"";b3.v=aG.format("m{0},{1}l{2},{1}",bP(b0*b),bP(bZ*b),bP(b0*b)+1);b3.textpathok=true;bW.string=bS(b1);bW.on=true;bX.style.cssText=d;bX.coordsize=b+bz+b;bX.coordorigin="0 0";var S=new bI(bX,E),bY={fill:"#000",stroke:"none",font:aG._availableAttrs.font,text:b1};S.shape=bX;S.path=b3;S.textpath=bW;S.type="text";S.attrs.text=bS(b1);S.attrs.x=b0;S.attrs.y=bZ;S.attrs.w=1;S.attrs.h=1;bL(S,bY);bX.appendChild(bW);bX.appendChild(b3);E.canvas.appendChild(bX);var b2=bT("skew");b2.on=true;bX.appendChild(b2);S.skew=b2;S.transform(bE);return S};aG._engine.setSize=function(bW,E){var S=this.canvas.style;this.width=bW;this.height=E;bW==+bW&&(bW+="px");E==+E&&(E+="px");S.width=bW;S.height=E;S.clip="rect(0 "+bW+" "+E+" 0)";if(this._viewBox){aG._engine.setViewBox.apply(this,this._viewBox)}return this};aG._engine.setViewBox=function(bZ,bY,b0,bW,bX){aG.eve("drag.setViewBox",this,this._viewBox,[bZ,bY,b0,bW,bX]);var E=this.width,b2=this.height,b3=1/bV(b0/E,bW/b2),b1,S;if(bX){b1=b2/bW;S=E/b0;if(b0*b1<E){bZ-=(E-b0*b1)/2/b1}if(bW*S<b2){bY-=(b2-bW*S)/2/S}}this._viewBox=[bZ,bY,b0,bW,!!bX];this._viewBoxShift={dx:-bZ,dy:-bY,scale:b3};this.forEach(function(b4){b4.transform("...")});return this};var bT;aG._engine.initWin=function(bW){var S=bW.document;S.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!S.namespaces.rvml&&S.namespaces.add("rvml","urn:schemas-microsoft-com:vml");bT=function(bX){return S.createElement("<rvml:"+bX+' class="rvml">')}}catch(E){bT=function(bX){return S.createElement("<"+bX+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}};aG._engine.initWin(aG._g.win);aG._engine.create=function(){var bW=aG._getContainer.apply(0,arguments),E=bW.container,b2=bW.height,b3,S=bW.width,b1=bW.x,b0=bW.y;if(!E){throw new Error("VML container not found.")}var bY=new aG._Paper,bZ=bY.canvas=aG._g.doc.createElement("div"),bX=bZ.style;b1=b1||0;b0=b0||0;S=S||512;b2=b2||342;bY.width=S;bY.height=b2;S==+S&&(S+="px");b2==+b2&&(b2+="px");bY.coordsize=b*1000+bz+b*1000;bY.coordorigin="0 0";bY.span=aG._g.doc.createElement("span");bY.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;";bZ.appendChild(bY.span);bX.cssText=aG.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",S,b2);if(E==1){aG._g.doc.body.appendChild(bZ);bX.left=b1+"px";bX.top=b0+"px";bX.position="absolute"}else{if(E.firstChild){E.insertBefore(bZ,E.firstChild)}else{E.appendChild(bZ)}}bY.renderfix=function(){};return bY};aG.prototype.clear=function(){aG.eve("drag.clear",this);this.canvas.innerHTML=bE;this.span=aG._g.doc.createElement("span");this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";this.canvas.appendChild(this.span);this.bottom=this.top=null};aG.prototype.remove=function(){aG.eve("drag.remove",this);this.canvas.parentNode.removeChild(this.canvas);for(var E in this){this[E]=typeof this[E]=="function"?aG._removedFactory(E):null}return true};var bM=aG.st;for(var bv in bA){if(bA[g](bv)&&!bM[g](bv)){bM[bv]=(function(E){return function(){var S=arguments;return this.forEach(function(bW){bW[E].apply(bW,S)})}})(bv)}}})();q.was?(ao.win.Drag=aG):(Drag=aG);return aG}));APF.Namespace.register("line.charts");(function(b,a){a.CreateChart=function(g,f,c,e,d){this.tabs=[];this.obj=g;this.datas=f;this.items=c;this.position=[];this.priceTab=[];this.monthTab=[];this.colletion=[];this.defaultColor="#333";this.options=d||{};this.paper=Drag(g,"100%","100%");this.extraData=e;this.init()};a.CreateChart.prototype={init:function(){var c=b(this.obj).width();this.createAxis(7,30,c-65,0,40)},createAxis:function(e,d,m,l,f){this.axisWidth=m;var g=Drag.svg?0.5:0.1,k,c;for(var h=0;h<e;h++){c=h?(((h*d)+f)+g):((h+1)*f+g);this.paper.path([["M","0",c],["L",m,c]]).attr({stroke:(h==e-1)?"#CCC":"#EFEFEF"});this.position.push(c)}this.paper.path([["M",(m+g),c],["L",(m+g),(d-l)]]).attr({stroke:"#CCC"});if(this.datas.status!="ok"){this.noData(false);return}this.createTimeTabs();if(!this.options.chartData){this.addtitle();this.noData(true);this.createPriceTab(6);this.setOneYearData()}else{this.addtitle();this.noData(true);this.createPriceTab(6);var j=this.getFirstTab();this.setToggleData(j);if(j){b("#rentTrend").addClass("nav-scroll");b(".ctr-rentTrend").addClass("ctr-show");b(b(".mod-toggle-nav").find(".nav-item")[j-1]).addClass("hover")}}},animate:function(h,k,j,g,d){var f=0,e=this,c=[];return(function(){var l=(arguments.callee),m=k.slice(0,++f);h.animate({path:m},80,"linear",function(){if(k[f-1]){l(h,k,j);var n=e.paper.circle(k[f-2][1],k[f-2][2],0).attr({stroke:g,fill:d,"stroke-width":2});c.push(n)}else{if(f==(k.length+1)){j&&j(c);l=null}}})})()},createTimeTabs:function(){if(this.options.selfDrawTab){this.setIdxTitle(this.getFirstTab());var g=this.options.toggleNav.find(this.options.toggleItem);var f=this.options.currentTab;var e=b(this.options.toggleNav[f||0]);g.addClass("chartItems");e.addClass("hover");this.bindEvent();return}else{for(var c=0;c<4;c++){var d=document.createElement("a");d.href="javascript:;";if(!c){this.chartItem=d;this.chartItem.className="chartTimeTab";this.obj.appendChild(this.chartItem)}else{this.tabs.push(d);d.className="chartItems";d.innerHTML=this.items[c-1];this.chartItem.appendChild(d)}}this.addClass(this.tabs[1],"hover");this.bindEvent()}},getFirstTab:function(){var d;for(var c in this.options.chartData){if(!d){d=c}}return d},create:function(d,f,e,c){var g=document.createElement(d);if(e){g.className=e}if(c){g.innerHTML=c}f.appendChild(g);return g},addtitle:function(){if(this.options.isCurrHouse){this.logo=this.create("i",this.obj,"iconfont thishouse","&#xE009;")}},dragPath:function(F,y,s,k,q,z,f,g,d,j,n){var H=[],l=this,e=[];s=parseInt(s);var r=this.extraData.avgPrice?Math.max(j,this.extraData.avgPrice):j,C=this.extraData.avgPrice?Math.min(k,this.extraData.avgPrice):k,v=(r-C)/5;var o=this.returnRange(v)+"",c=(o.substring(1)),h=new RegExp("\\d{"+c.length+"}$"),w=C.toString()?C.toString().replace(h,c):0,B=[],E=parseInt(o/30),D=[],h=/(?:\d{2})$/;for(var A=0;A<6;A++){B.push(parseInt(w)+(A*o));var u=l.formatePrice(parseInt(w)+(A*o));this.priceTab[A].attr({text:u+"\u5143",y:(this.position[5-A]),x:(this.axisWidth+8)})}for(var A=0;A<this.monthTab.length;A++){var G="";if(l.options.chartData){this.monthTab[A].attr("text",q[A])}else{if(n){G=q[A].substring(0,4)+"."+parseInt(h.exec(q[A])[0]);this.monthTab[A].attr({"font-family":"Microsoft Yahei"})}else{G=parseInt(h.exec(q[A])[0])+"\u6708"}if(this.monthTab[A].attr("text")==G){continue}else{this.monthTab[A].attr("text",G)}}}for(var A=0;A<F.length;A++){var m=(190.5-((F[A]-w)/E));(m<0)&&(m=5);D.push(["L",(this.monthTab[A].attr("x")),(m)])}D[0][0]="M";var t=this.paper.path().attr({stroke:z,"stroke-width":2});this.colletion.push(t);var x=this.extraData.avgPrice;this.animate(t,D,function(p){l.callBack(p,g,d);var I=((175.5-((x-w)/E)));if(I<22.5){I=22.5}l.setStyle(l.logo,{top:I,left:(D[D.length-1][1]-8)})},z,f)},formatePrice:function(f){var e=f+"",c=e.length,d=e;switch(c){case 4:d=e.substr(0,1)+","+e.substr(1);break;case 5:d=e.substr(0,2)+","+e.substr(2);break;case 6:d=e.substr(0,3)+","+e.substr(3);break;case 7:d=e.substr(0,1)+","+e.substr(1,3)+","+e.substr(4);break;case 8:d=e.substr(0,2)+","+e.substr(2,3)+","+e.substr(5);break;case 9:d=e.substr(0,3)+","+e.substr(3,3)+","+e.substr(6);break}return d},clearOverLay:function(){var e=this.colletion.concat(this.monthTab);for(var c=e.length-1,d=0;c>=d;c--){e[c].remove()}this.setStyle(this.logo,{top:-999,left:-999});this.colletion=[];this.monthTab=[]},callBack:function(d,c,e){var h=this;var j=document.getElementById("chartOverLay");for(var f=0,g=d.length;f<g;f++){(function(k){h.colletion.push(d[k]);d[k].animate({r:c},500,"linear").data("index",k).attr({cursor:"pointer"});d[k].mouseover(function(o){if(this.data("index")<(e.title.length-3)){h.addClass(j,"chartRight");h.setStyle(j,{left:parseInt(d[k].attr("cx")-27),top:parseInt(d[k].attr("cy")-116),display:"block"});b(".linechart .lp_arw").removeClass("lp_arw_rgt").addClass("lp_arw_lft");b(".linechart .lp_arw-up").removeClass("lp_arw-up_rgt").addClass("lp_arw-up_lft")}else{h.removeClass(j,"chartRight");h.setStyle(j,{left:parseInt(d[k].attr("cx")-153),top:parseInt(d[k].attr("cy")-116),display:"block"});b(".linechart .lp_arw").removeClass("lp_arw_lft").addClass("lp_arw_rgt");b(".linechart .lp_arw-up").removeClass("lp_arw-up_lft").addClass("lp_arw-up_rgt")}var m=/\d{2}$/;var n=j.getElementsByTagName("span");if(h.options.chartData){j.getElementsByTagName("h3")[0].innerHTML=e.title[k];var q=[];var l=b("#chartOverLay");l.find("tr").hide();for(line in e.lineData){var p=parseInt(line.substring(4));l.find('[data-id="'+p+'"]').show();n[p-1].innerHTML=e.lineData[line][k]}}else{j.getElementsByTagName("h3")[0].innerHTML=e.title[k].substring(0,4)+"年"+parseInt(e.title[k].substring(4))+"月";n[0].innerHTML=e.community[k];n[1].innerHTML=e.area[k]}this.animate({r:7},"linear")});d[k].mouseout(function(){var l=d[k].attr("fill").toLowerCase();if(h.options.chartData){d[k].attr("fill",l);this.animate({r:4},"linear");h.setStyle(j,{display:"none"});return}if(d[k].attr("fill").toLowerCase()=="#6c88c7"){this.animate({r:4},"linear")}else{d[k].attr("fill","#e4705f");this.animate({r:4},"linear")}h.setStyle(j,{display:"none"})})})(f)}},getRegionData:function(y,g,m){if(this.options.chartData){var o=[],f=[],k=[],q={};var C={};var h;for(var w in y){if(/line/.test(w)){C[w]=y[w];h=C[w].length}}for(var l in C){o=o.concat(C[l]);q[l]=[]}for(var l in C){q[l]=[];for(var s=0,t=C[l].length;s<t;s++){for(var D in C[l][s]){q[l].push(C[l][s][D])}}}for(var p=0,t=o.length,B=1;p<t;p++){for(var v in o[p]){f.push(o[p][v]);k.push(v)}}return{lineData:q,title:k.slice(0,g),min:f.sort(this.sort)[0],max:f.sort(this.sort)[f.length-1],count:h}}else{var A=m?y.community:y.community.slice(y.community.length-g),z=m?y.area:y.area.slice(y.area.length-g),x=A.concat(z),w=[],u=[];for(var s=0,n=x.length;s<n;s++){for(var r in x[s]){u.push(r);w.push(x[s][r])}}return{community:w.slice(0,g),area:w.slice(g),title:u.slice(0,g),min:w.sort(this.sort)[0],max:w.sort(this.sort)[w.length-1]}}},setSixMonthData:function(){var e=6;this.clearOverLay();this.createTimeAxis(e);var d=this.getRegionData(this.datas,e);if(d.max<=0){this.noData(false)}else{this.noData(true);var c=(d.max-d.min)/5;this.dragPath(d.area,e,c,d.min,d.title,"#6C88C7","#6C88C7",4,d,d.max);this.dragPath(d.community,e,c,d.min,d.title,"#E4705F","#E4705F",4,d,d.max)}},setOneYearData:function(){var e=12;this.clearOverLay();this.createTimeAxis(e);var d=this.getRegionData(this.datas,e);if(d.max<=0){this.noData(false)}else{this.noData(true);var c=(d.max-d.min)/5;this.dragPath(d.area,e,c,d.min,d.title,"#6C88C7","#6C88C7",4,d,d.max);this.dragPath(d.community,e,c,d.min,d.title,"#E4705F","#E4705F",4,d,d.max)}},setThreeYearData:function(){var g=12;var f=this;this.clearOverLay();this.createTimeAxis(g);var c={community:f.returnThreeData(f.datas.community),area:f.returnThreeData(f.datas.area)};var e=this.getRegionData(c,g);if(e.max<=0){this.noData(false)}else{this.noData(true);var d=(e.max-e.min)/5;objs=this.dragPath(e.area,g,d,e.min,e.title,"#6C88C7","#6C88C7",4,e,e.max,true);this.dragPath(e.community,g,d,e.min,e.title,"#E4705F","#E4705F",4,e,e.max,true)}},setToggleData:function(d){var f=this;var c=f.datas[d];var g=this.getRegionData(c,h);var h=g.count;var e=(g.max-g.min)/5;this.clearOverLay();this.createTimeAxis(h);if(g.max<=0){this.noData(false)}else{this.noData(true);for(item in c){if(/line/.test(item)){f.dragPath(g.lineData[item],h,e,g.min,g.title,f.options.lineColor[item]||f.defaultColor,f.options.lineColor[item]||f.defaultColor,4,g,g.max,true)}}}},createPriceTab:function(d){this.font={font:"12px Microsoft Yahei, Arial",fill:"#666","text-anchor":"start"};for(var c=0,e=d;c<e;c++){var f=this.paper.text(0,0,"").attr(this.font);this.priceTab.push(f)}},hasClass:function(e,d){var f=e.className.split(/\s+/);for(var c=0;c<f.length;c++){if(f[c]==d){return true}}return false},addClass:function(d,c){if(!this.hasClass(d,c)){d.className+=" "+c}return d},removeClass:function(f,d){var e=f.className.split(/\s+/);for(var c=0;c<e.length;c++){if(e[c]==d){delete e[c]}}f.className=e.join(" ");return f},noData:function(e){var f=this;if(f.options.chartData){if(e){b(f.options.nullDataId).css("display","none")}else{b(f.options.nullDataId).css("display","none")}return}var d=f.options.nullDataId;var c=f.options.descDataId;if(e){for(var g=0;g<d.length;g++){b("#"+d[g]).css({display:"none"})}for(var g=0;g<c.length;g++){b("#"+c[g]).css({display:"block"})}}else{for(var g=0;g<d.length;g++){b("#"+d[g]).css({display:"block"})}for(var g=0;g<c.length;g++){b("#"+c[g]).css({display:"none"})}}},setStyle:function(e,d){if(!e){return}for(var c in d){if(c=="left"||c=="top"){e.style[c]=d[c]+"px"}else{e.style[c]=d[c]}}},sort:function(d,c){return d-c},removeHover:function(c){for(var d=0,e=this.tabs.length;d<e;d++){this.removeClass(this.tabs[d],"hover")}this.addClass(this.tabs[c],"hover")},createTimeAxis:function(e,g){var c=this.axisWidth/e;for(var d=0;d<e;d++){var f=this.paper.text(0,0,"").attr(this.font);if(!f.attr){return}if(!d){f.attr({x:19,y:235,text:""});this.monthTab.push(f)}else{f.attr({x:(d*c)+19,y:235,text:""});this.monthTab.push(f)}}},toChange:function(d){var c=["一","二","三","四","五","六","七","八","九","十","十一","十二"];return c[(d+1)]||""},returnThreeData:function(h){var g=/(03|06|09|12)$/,c=[];for(var e=h.length,f=0;e>=f;e--){for(var d in h[e]){if((g.test(d))&&(c.length<12)){c.push(h[e])}}}return c.reverse()},bindEvent:function(){if(this.options.chartData){var c=this;c.resetTabs(c.options.chartData,c.options.nowTab);this.options.toggleNav.click(function(k){var g=b(k.target);var j=g.data("item");c.options.toggleNav.find(c.options.toggleItem).removeClass("hover");g.addClass("hover");c.setToggleData(j);c.setIdxTitle(j);var h=g.data("track")||"zjhx_click";if(ajk&&ajk.Logger){ajk.Logger.sendSoj({page:h,site:"anjuke-npv",pageName:h})}else{if(J&&J.site&&J.site.trackEvent){J.site.trackEvent(h)}}})}else{var f=this;for(var d=0,e=this.tabs.length;d<e;d++){(function(g){f.tabs[g].onclick=function(){f.removeHover(g);switch(g){case 0:f.setSixMonthData();break;case 1:f.setOneYearData();break;case 2:f.setThreeYearData();break}}})(d)}}},resetTabs:function(h,f){var l=this;var d=[];for(var j=1;j<=l.options.maxTab;j++){d.push(j)}for(var e in h){var c=parseInt(e);var k=d.indexOf(c);var g=!(b.isEmptyObject(h[e]));if(g&&k!==-1){d.splice(k,1)}}d.forEach(function(m,n){l.navItemHide(m)});this.options.toggleNav.find('[data-item="'+f+'"]').addClass("hover")},navItemHide:function(c){this.options.toggleNav.find('[data-item="'+c+'"]').hide()},setIdxTitle:function(c){var d=this.options.chartData[c].current;this.setToggleTitle({commName:this.options.commName,commPrice:d.comm_price,commStatus:d.comm_change_class,commComp:"环比"+d.comm_change_text+d.comm_change,blockName:this.options.blockName,blockPrice:d.block_price,blockStatus:d.block_change_class,blockComp:"环比"+d.block_change_text+d.block_change,areaName:this.options.areaName,areaPrice:d.area_price,areaStatus:d.area_change_class,areaComp:"环比"+d.area_change_text+d.area_change})},setToggleTitle:function(g){var f="";var d=this.getTitleItem({color:"green",name:g.commName,price:g.commPrice,status:g.commStatus,comp:g.commComp,npv:this.options.firstNpv});var c=this.getTitleItem({color:"red",name:g.blockName,price:g.blockPrice,status:g.blockStatus,comp:g.blockComp,npv:this.options.scondNpv});var e=this.getTitleItem({color:"blue",name:g.areaName,price:g.areaPrice,status:g.areaStatus,comp:g.areaComp,npv:this.options.thirdNpv});if(d||c||e){b(".compare-info").html(d+c+e)}},getTitleItem:function(d){var c="";if(d.name){c+='<li class="compare-item" data-track="'+d.npv+'"><h4 class="compare-title"><span class="compare-icon '+d.color+'"></span>'+(d.name?d.name:"")+"</h4>";if(d.price){c+='<div class="compare-price"><span class="price">¥'+d.price+'元/月<span class="last '+d.status+'">'+(d.comp?d.comp:"")+"</span></span></div>"}else{c+=' <div class="compare-price"><span class="price no-price">暂无</span></div>'}}c+="</li>";return c},returnRange:function(c){if(c>=0&&c<=90){return 100}else{if(c>=90&&c<=190){return 200}else{if(c>=190&&c<=290){return 300}else{if(c>=290&&c<=390){return 400}else{if(c>=390&&c<=490){return 500}else{if(c>=490&&c<=590){return 600}else{if(c>=590&&c<=790){return 800}else{if(c>=790&&c<=990){return 1000}else{if(c>=990&&c<=1900){return 2000}else{if(c>=1900&&c<=2900){return 3000}else{if(c>=2900&&c<=3900){return 4000}else{if(c>=3900&&c<=4900){return 5000}else{if(c>=4900&&c<=7900){return 8000}else{if(c>=7900&&c<=9800){return 10000}else{if(c>=9800&&c<=19800){return 20000}else{if(c>=19800&&c<=29800){return 30000}else{if(c>=29800&&c<=49800){return 50000}else{if(c>=49800&&c<=99800){return 100000}else{return Math.ceil(c)}}}}}}}}}}}}}}}}}}}}})(jQuery,line.charts);APF.Namespace.register("ajk.chart");(function(){var F=[];var v=0;var D="";var I=8;function N(S){return y(x(E(S),S.length*I))}function d(S){return k(x(E(S),S.length*I))}function l(S){return r(x(E(S),S.length*I))}function e(S,T){return y(R(S,T))}function n(S,T){return k(R(S,T))}function u(S,T){return r(R(S,T))}function f(){return N("abc")=="900150983cd24fb0d6963f7d28e17f72"}F.push(["\x6D\x64\x35","\x73\x68\x61\x31","\x73\x68\x61\x32\x35\x36"]);function x(ac,X){ac[X>>5]|=128<<((X)%32);ac[(((X+64)>>>9)<<4)+14]=X;var ab=1732584193;var aa=-271733879;var Z=-1732584194;var Y=271733878;for(var U=0;U<ac.length;U+=16){var W=ab;var V=aa;var T=Z;var S=Y;ab=q(ab,aa,Z,Y,ac[U+0],7,-680876936);Y=q(Y,ab,aa,Z,ac[U+1],12,-389564586);Z=q(Z,Y,ab,aa,ac[U+2],17,606105819);aa=q(aa,Z,Y,ab,ac[U+3],22,-1044525330);ab=q(ab,aa,Z,Y,ac[U+4],7,-176418897);Y=q(Y,ab,aa,Z,ac[U+5],12,1200080426);Z=q(Z,Y,ab,aa,ac[U+6],17,-1473231341);aa=q(aa,Z,Y,ab,ac[U+7],22,-45705983);ab=q(ab,aa,Z,Y,ac[U+8],7,1770035416);Y=q(Y,ab,aa,Z,ac[U+9],12,-1958414417);Z=q(Z,Y,ab,aa,ac[U+10],17,-42063);aa=q(aa,Z,Y,ab,ac[U+11],22,-1990404162);ab=q(ab,aa,Z,Y,ac[U+12],7,1804603682);Y=q(Y,ab,aa,Z,ac[U+13],12,-40341101);Z=q(Z,Y,ab,aa,ac[U+14],17,-1502002290);aa=q(aa,Z,Y,ab,ac[U+15],22,1236535329);ab=Q(ab,aa,Z,Y,ac[U+1],5,-165796510);Y=Q(Y,ab,aa,Z,ac[U+6],9,-1069501632);Z=Q(Z,Y,ab,aa,ac[U+11],14,643717713);aa=Q(aa,Z,Y,ab,ac[U+0],20,-373897302);ab=Q(ab,aa,Z,Y,ac[U+5],5,-701558691);Y=Q(Y,ab,aa,Z,ac[U+10],9,38016083);Z=Q(Z,Y,ab,aa,ac[U+15],14,-660478335);aa=Q(aa,Z,Y,ab,ac[U+4],20,-405537848);ab=Q(ab,aa,Z,Y,ac[U+9],5,568446438);Y=Q(Y,ab,aa,Z,ac[U+14],9,-1019803690);Z=Q(Z,Y,ab,aa,ac[U+3],14,-187363961);aa=Q(aa,Z,Y,ab,ac[U+8],20,1163531501);ab=Q(ab,aa,Z,Y,ac[U+13],5,-1444681467);Y=Q(Y,ab,aa,Z,ac[U+2],9,-51403784);Z=Q(Z,Y,ab,aa,ac[U+7],14,1735328473);aa=Q(aa,Z,Y,ab,ac[U+12],20,-1926607734);ab=K(ab,aa,Z,Y,ac[U+5],4,-378558);Y=K(Y,ab,aa,Z,ac[U+8],11,-2022574463);Z=K(Z,Y,ab,aa,ac[U+11],16,1839030562);aa=K(aa,Z,Y,ab,ac[U+14],23,-35309556);ab=K(ab,aa,Z,Y,ac[U+1],4,-1530992060);Y=K(Y,ab,aa,Z,ac[U+4],11,1272893353);Z=K(Z,Y,ab,aa,ac[U+7],16,-155497632);aa=K(aa,Z,Y,ab,ac[U+10],23,-1094730640);ab=K(ab,aa,Z,Y,ac[U+13],4,681279174);Y=K(Y,ab,aa,Z,ac[U+0],11,-358537222);Z=K(Z,Y,ab,aa,ac[U+3],16,-722521979);aa=K(aa,Z,Y,ab,ac[U+6],23,76029189);ab=K(ab,aa,Z,Y,ac[U+9],4,-640364487);Y=K(Y,ab,aa,Z,ac[U+12],11,-421815835);Z=K(Z,Y,ab,aa,ac[U+15],16,530742520);aa=K(aa,Z,Y,ab,ac[U+2],23,-995338651);ab=o(ab,aa,Z,Y,ac[U+0],6,-198630844);Y=o(Y,ab,aa,Z,ac[U+7],10,1126891415);Z=o(Z,Y,ab,aa,ac[U+14],15,-1416354905);aa=o(aa,Z,Y,ab,ac[U+5],21,-57434055);ab=o(ab,aa,Z,Y,ac[U+12],6,1700485571);Y=o(Y,ab,aa,Z,ac[U+3],10,-1894986606);Z=o(Z,Y,ab,aa,ac[U+10],15,-1051523);aa=o(aa,Z,Y,ab,ac[U+1],21,-2054922799);ab=o(ab,aa,Z,Y,ac[U+8],6,1873313359);Y=o(Y,ab,aa,Z,ac[U+15],10,-30611744);Z=o(Z,Y,ab,aa,ac[U+6],15,-1560198380);aa=o(aa,Z,Y,ab,ac[U+13],21,1309151649);ab=o(ab,aa,Z,Y,ac[U+4],6,-145523070);Y=o(Y,ab,aa,Z,ac[U+11],10,-1120210379);Z=o(Z,Y,ab,aa,ac[U+2],15,718787259);aa=o(aa,Z,Y,ab,ac[U+9],21,-343485551);ab=s(ab,W);aa=s(aa,V);Z=s(Z,T);Y=s(Y,S)}return Array(ab,aa,Z,Y)}F.push(["\x6D\x64\x35","\x73\x68\x61\x32\x35\x36","\x73\x68\x61\x31"]);function m(X,U,T,S,W,V){return s(g(s(s(U,X),s(S,V)),W),T)}function q(U,T,Y,X,S,W,V){return m((T&Y)|((~T)&X),U,T,S,W,V)}F.push(["\x73\x68\x61\x31","\x6D\x64\x35","\x73\x68\x61\x32\x35\x36"]);function Q(U,T,Y,X,S,W,V){return m((T&X)|(Y&(~X)),U,T,S,W,V)}function K(U,T,Y,X,S,W,V){return m(T^Y^X,U,T,S,W,V)}function o(U,T,Y,X,S,W,V){return m(Y^(T|(~X)),U,T,S,W,V)}F.push(["\x73\x68\x61\x31","\x73\x68\x61\x32\x35\x36","\x6D\x64\x35"]);function R(U,X){var W=E(U);if(W.length>16){W=x(W,U.length*I)}var S=Array(16),V=Array(16);for(var T=0;T<16;T++){S[T]=W[T]^909522486;V[T]=W[T]^1549556828}var Y=x(S.concat(E(X)),512+X.length*I);return x(V.concat(Y),512+128)}F.push(["\x73\x68\x61\x32\x35\x36","\x6D\x64\x35","\x73\x68\x61\x31"]);function s(S,V){var U=(S&65535)+(V&65535);var T=(S>>16)+(V>>16)+(U>>16);return(T<<16)|(U&65535)}function g(S,T){return(S<<T)|(S>>>(32-T))}F.push(["\x73\x68\x61\x32\x35\x36","\x73\x68\x61\x31","\x6D\x64\x35"]);function E(V){var U=Array();var S=(1<<I)-1;for(var T=0;T<V.length*I;T+=I){U[T>>5]|=(V.charCodeAt(T/I)&S)<<(T%32)}return U}function r(U){var V="";var S=(1<<I)-1;for(var T=0;T<U.length*32;T+=I){V+=String.fromCharCode((U[T>>5]>>>(T%32))&S)}return V}function y(U){var T=v?"0123456789ABCDEF":"0123456789abcdef";var V="";for(var S=0;S<U.length*4;S++){V+=T.charAt((U[S>>2]>>((S%4)*8+4))&15)+T.charAt((U[S>>2]>>((S%4)*8))&15)}return V}F.push(["\x6D\x64\x35","\x73\x68\x61\x31"]);function k(V){var U="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var X="";for(var T=0;T<V.length*4;T+=3){var W=(((V[T>>2]>>8*(T%4))&255)<<16)|(((V[T+1>>2]>>8*((T+1)%4))&255)<<8)|((V[T+2>>2]>>8*((T+2)%4))&255);for(var S=0;S<4;S++){if(T*8+S*6>V.length*32){X+=D}else{X+=U.charAt((W>>6*(3-S))&63)}}}return X}F.push(["\x6D\x64\x35","\x73\x68\x61\x32\x35\x36"]);var v=0;var D="";var I=8;function t(S){return j(p(H(S),S.length*I))}function L(S){return P(p(H(S),S.length*I))}F.push(["\x73\x68\x61\x31","\x6D\x64\x35"]);function h(S){return b(p(H(S),S.length*I))}function M(S,T){return j(C(S,T))}F.push(["\x73\x68\x61\x31","\x73\x68\x61\x32\x35\x36"]);function z(S,T){return P(C(S,T))}function O(S,T){return b(C(S,T))}function G(){return t("abc")=="a9993e364706816aba3e25717850c26c9cd0d89d"}function p(af,Z){af[Z>>5]|=128<<(24-Z%32);af[((Z+64>>9)<<4)+15]=Z;var ag=Array(80);var ae=1732584193;var ad=-271733879;var ac=-1732584194;var ab=271733878;var aa=-1009589776;for(var W=0;W<af.length;W+=16){var Y=ae;var X=ad;var V=ac;var U=ab;var S=aa;for(var T=0;T<80;T++){if(T<16){ag[T]=af[W+T]}else{ag[T]=B(ag[T-3]^ag[T-8]^ag[T-14]^ag[T-16],1)}var ah=s(s(B(ae,5),a(T,ad,ac,ab)),s(s(aa,ag[T]),w(T)));aa=ab;ab=ac;ac=B(ad,30);ad=ae;ae=ah}ae=s(ae,Y);ad=s(ad,X);ac=s(ac,V);ab=s(ab,U);aa=s(aa,S)}return Array(ae,ad,ac,ab,aa)}function a(T,S,V,U){if(T<20){return(S&V)|((~S)&U)}if(T<40){return S^V^U}if(T<60){return(S&V)|(S&U)|(V&U)}return S^V^U}function w(S){return(S<20)?1518500249:(S<40)?1859775393:(S<60)?-1894007588:-899497514}function C(U,X){var W=H(U);if(W.length>16){W=p(W,U.length*I)}var S=Array(16),V=Array(16);for(var T=0;T<16;T++){S[T]=W[T]^909522486;V[T]=W[T]^1549556828}var Y=p(S.concat(H(X)),512+X.length*I);return p(V.concat(Y),512+160)}function s(S,V){var U=(S&65535)+(V&65535);var T=(S>>16)+(V>>16)+(U>>16);return(T<<16)|(U&65535)}function B(S,T){return(S<<T)|(S>>>(32-T))}F.push(["\x73\x68\x61\x32\x35\x36","\x6D\x64\x35"]);function H(V){var U=Array();var S=(1<<I)-1;for(var T=0;T<V.length*I;T+=I){U[T>>5]|=(V.charCodeAt(T/I)&S)<<(32-I-T%32)}return U}function b(U){var V="";var S=(1<<I)-1;for(var T=0;T<U.length*32;T+=I){V+=String.fromCharCode((U[T>>5]>>>(32-I-T%32))&S)}return V}function j(U){var T=v?"0123456789ABCDEF":"0123456789abcdef";var V="";for(var S=0;S<U.length*4;S++){V+=T.charAt((U[S>>2]>>((3-S%4)*8+4))&15)+T.charAt((U[S>>2]>>((3-S%4)*8))&15)}return V}function P(V){var U="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var X="";for(var T=0;T<V.length*4;T+=3){var W=(((V[T>>2]>>8*(3-T%4))&255)<<16)|(((V[T+1>>2]>>8*(3-(T+1)%4))&255)<<8)|((V[T+2>>2]>>8*(3-(T+2)%4))&255);for(var S=0;S<4;S++){if(T*8+S*6>V.length*32){X+=D}else{X+=U.charAt((W>>6*(3-S))&63)}}}return X}F.push(["\x73\x68\x61\x32\x35\x36","\x73\x68\x61\x31"]);var c=function c(X){function aq(at,ar){return(at>>>ar)|(at<<(32-ar))}var al=Math.pow;var ab=al(2,32);var V="length";var aj,ai;var ad="";var af=[];var U=X[V]*8;var T=c.h=c.h||[];var ah=c.k=c.k||[];var Z=ah[V];var W={};for(var Y=2;Z<64;Y++){if(!W[Y]){for(aj=0;aj<313;aj+=Y){W[aj]=Y}T[Z]=(al(Y,0.5)*ab)|0;ah[Z++]=(al(Y,1/3)*ab)|0}}X+="\x80";while(X[V]%64-56){X+="\x00"}for(aj=0;aj<X[V];aj++){ai=X.charCodeAt(aj);if(ai>>8){return}af[aj>>2]|=ai<<((3-aj)%4)*8}af[af[V]]=((U/ab)|0);af[af[V]]=(U);for(ai=0;ai<af[V];){var ae=af.slice(ai,ai+=16);var S=T;T=T.slice(0,8);for(aj=0;aj<64;aj++){var ag=aj+ai;var aa=ae[aj-15],ac=ae[aj-2];var an=T[0],ak=T[4];var ap=T[7]+(aq(ak,6)^aq(ak,11)^aq(ak,25))+((ak&T[5])^((~ak)&T[6]))+ah[aj]+(ae[aj]=(aj<16)?ae[aj]:(ae[aj-16]+(aq(aa,7)^aq(aa,18)^(aa>>>3))+ae[aj-7]+(aq(ac,17)^aq(ac,19)^(ac>>>10)))|0);var ao=(aq(an,2)^aq(an,13)^aq(an,22))+((an&T[1])^(an&T[2])^(T[1]&T[2]));T=[(ap+ao)|0].concat(T);T[4]=(T[4]+ap)|0}for(aj=0;aj<8;aj++){T[aj]=(T[aj]+S[aj])|0}}for(aj=0;aj<8;aj++){for(ai=3;ai+1;ai--){var am=(T[aj]>>(ai*8))&255;ad+=((am<16)?0:"")+am.toString(16)}}return ad};var A={"\x6D\x64\x35":N,"\x73\x68\x61\x31":t,"\x73\x68\x61\x32\x35\x36":c};ajk.chart.algos=A})();(function(){function d(j){var g,h,f,k;g="";f=j.length;for(h=0;h<f;h++){k=j.charCodeAt(h);if((k>=1)&&(k<=127)){g+=j.charAt(h)}else{if(k>2047){g+=String.fromCharCode(224|((k>>12)&15));g+=String.fromCharCode(128|((k>>6)&63));g+=String.fromCharCode(128|((k>>0)&63))}else{g+=String.fromCharCode(192|((k>>6)&31));g+=String.fromCharCode(128|((k>>0)&63))}}}return g}function b(l){var g,j,f,m;var k,h;g="";f=l.length;j=0;while(j<f){m=l.charCodeAt(j++);switch(m>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:g+=l.charAt(j-1);break;case 12:case 13:k=l.charCodeAt(j++);g+=String.fromCharCode(((m&31)<<6)|(k&63));break;case 14:k=l.charCodeAt(j++);h=l.charCodeAt(j++);g+=String.fromCharCode(((m&15)<<12)|((k&63)<<6)|((h&63)<<0));break}}return g}var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var e=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);function c(m){var h,k,f;var l,j,g;f=m.length;k=0;h="";while(k<f){l=m.charCodeAt(k++)&255;if(k==f){h+=a.charAt(l>>2);h+=a.charAt((l&3)<<4);h+="==";break}j=m.charCodeAt(k++);if(k==f){h+=a.charAt(l>>2);h+=a.charAt(((l&3)<<4)|((j&240)>>4));h+=a.charAt((j&15)<<2);h+="=";break}g=m.charCodeAt(k++);h+=a.charAt(l>>2);h+=a.charAt(((l&3)<<4)|((j&240)>>4));h+=a.charAt(((j&15)<<2)|((g&192)>>6));h+=a.charAt(g&63)}return h}ajk.chart.algos.base64_encode=c})();(function(b,a){a.priceTrend=function(d){var c=this;c.defaults={icons:{balance:"--持平",up:"↑",down:"↓"},houseItem:b(".j-house-item"),commItem:b(".j-community-item"),areaItem:b(".j-area-item")};c.realData;c.ops=b.extend({},c.defaults,d);c.init()};a.priceTrend.prototype.init=function(){var c=this;c.getSourceData();c.addNpv()};a.priceTrend.prototype.getSourceData=function(){var d=this,h=d.ops,f=new Date();if(d.ops.lineTabs){b.ajax({url:d.ops.ajaxUrl,dataType:"json",type:"get",data:d.ops.ajaxParam,success:function(j){if(!j||j.status!=="ok"){d.hideTrendMod();return}if(b.isEmptyObject(j.data)){d.hideTrendMod();return}d.ops.chartData=j.data;d.ops.chartData.status="ok";new line.charts.CreateChart(d.ops.chartId.get(0),d.ops.chartData,[],{},d.ops)},error:function(){d.hideTrendMod();return}});return}if(h.isPpc){function e(){var k=navigator.userAgent,j=0,l=/PhantomJS/i;var m;try{null[0]()}catch(n){m=n}if(l.test(k)){return j}if(l.test(m)){return j}if(window.callPhantom||window._phantom){return j}if(window.process&&window.process.type){return j}return 1}function g(){var k=Math.floor(h.version/2);var j=[["\x6D\x64\x35","\x73\x68\x61\x31","\x73\x68\x61\x32\x35\x36"],["\x6D\x64\x35","\x73\x68\x61\x32\x35\x36","\x73\x68\x61\x31"],["\x73\x68\x61\x31","\x73\x68\x61\x32\x35\x36","\x6D\x64\x35"],["\x73\x68\x61\x31","\x6D\x64\x35","\x73\x68\x61\x32\x35\x36"],["\x73\x68\x61\x32\x35\x36","\x73\x68\x61\x31","\x6D\x64\x35"],["\x73\x68\x61\x32\x35\x36","\x6D\x64\x35","\x73\x68\x61\x31"],["\x6D\x64\x35","\x73\x68\x61\x31"],["\x73\x68\x61\x31","\x6D\x64\x35"],["\x6D\x64\x35","\x73\x68\x61\x32\x35\x36"],["\x73\x68\x61\x32\x35\x36","\x6D\x64\x35"],["\x73\x68\x61\x32\x35\x36","\x73\x68\x61\x31"],["\x73\x68\x61\x31","\x73\x68\x61\x32\x35\x36"],"\u0062\u0061\u0073\u0065\u0036\u0034\u005f\u0065\u006e\u0063\u006f\u0064\u0065"];var m=(parseInt(h.token.substr(0,3),16)+k)%j.length;var l=j[m];if(!b.isArray(l)){return ajk.chart.algos[l](h.token)}var n=h.token;b.each(l,function(o,p){n=ajk.chart.algos[p](n)});return n}b.ajax({url:"/community_ajax/"+Math.floor(h.version/3)+"/price/",dataType:"json",data:{tk:h.token,et:g(),cis:h.commId,ib:e()},success:function(p){var l={};if(b.type(p)!="object"){return}if(p.data&&p.data[h.commId]){l=p.data[h.commId]}if(b.isArray(l)||b.isEmptyObject(l)){return}var o=b("#basic-infos-box").find(".price");var m="",j="down",n="下跌";if(l.mid_change>0){m="↑";j="up";n="上浮"}else{if(l.mid_change<0){m="↓";l.mid_change=-l.mid_change}else{j="level";m="--"}}var q=l.mid_change*100;q=q.toFixed(2);if(h.is_new_version){o.html('<label class="side-tit">均价</label><span class="average">'+l.mid_price+'<em class="unit">元/m²</em></span><label class="side-tit">环比上月</label><span class="status '+j+'"><i class="arrow">'+m+"</i> "+q+"%</span>")}else{var o=b("#pricewrap");var k=o.find("a");o.html('本月均价：<em class="comm-avg-price">'+l.mid_price+'</em><span>元/m²</span><span class="price-tip">比'+(new Date()).getMonth()+'月<strong class="'+j+'">'+n+q+"%</strong></span>").append(k)}}})}if(h.ajaxUrl==""){var c=d.backData(h.data);if(c.status==="failed"){b("#"+d.ops.wrappeId).hide()}d.drawLineChart(c);return}b.ajax({url:h.ajaxUrl,dataType:"json",type:"get",data:{commid:h.commId},timeout:20000,success:function(j){var k=d.backData(j);d.drawLineChart(k);if(k.status==="failed"){b("#"+d.ops.wrappeId).hide()}},error:function(){b("#"+d.ops.wrappeId).hide()}})},a.priceTrend.prototype.hideTrendMod=function(){b(".mod-toggle-title").hide();b(".trend-content").hide();b(".lookPriceTrend").hide()},a.priceTrend.prototype.drawLineChart=function(d){var c=this;var f=d;var h=["6\u4e2a\u6708","1\u5e74","3\u5e74"];var g={id:c.ops.commId,commName:c.ops.commName||"",blockName:c.ops.blockName||"",avgPrice:c.ops.avgPrice||0};if(!c.ops.isCurrHouse){c.ops.nullDataId.shift();c.ops.descDataId.shift()}var e=new line.charts.CreateChart(c.ops.chartId.get(0),f,h,g,c.ops);c.headPriceData(f)};a.priceTrend.prototype.headPriceData=function(g){var o=this;var k=o.ops.avgPrice;var m=g.community&&g.community.length;var e=o.getLatestData(g.community.slice(m-1)[0]);var j=e.data;var c=(e.data==0)?"":((k-e.data)/e.data)*100;var l=e.date;var q=parseFloat(g.comm_midchange)*100;var f=g.area&&g.area.length;var n=o.getLatestData(g.area.slice(f-1)[0]);var d=n.data;var h=n.date;var p=parseFloat(g.area_midchange)*100;if(o.ops.isCurrHouse){o.fill(o.ops.houseItem,k,c);o.ops.commItem.removeClass("j-price-item")}else{o.ops.commItem.find(".icon-vs").remove();o.ops.commItem.addClass("j-price-item");o.ops.areaItem.prepend('<i class="icon-vs"></i>')}o.fill(o.ops.commItem,j,q,l);o.fill(o.ops.areaItem,d,p,h)};a.priceTrend.prototype.getLatestData=function(d){var c={};for(var e in d){c.date=e;c.data=d[e]}return c};a.priceTrend.prototype.rewrapHeadData=function(d){var c=this;var e={level:(d==0)?"":((d<0)?"down":"up"),arrow:(d==0)?c.ops.icons.balance:((d<0)?c.ops.icons.down:c.ops.icons.up),decimal:(d==0)?"":Math.abs(d).toFixed(2)+"%"};return e};a.priceTrend.prototype.fill=function(e,g,l,k){var m=this;var f=e.find(m.ops.avgDom);var d=e.find(m.ops.levelDom);var c=e.find(m.ops.arrowDom);var j=e.find(m.ops.percentDom);var h=e.find(m.ops.monthDom);f.text(g);d.addClass(m.rewrapHeadData(l).level);c.text(m.rewrapHeadData(l).arrow);j.text(m.rewrapHeadData(l).decimal);if(k){h.text(m.dateTranslate(k))}};a.priceTrend.prototype.backData=function(d){var c={status:"failed",community:[],area:[]};if(d===undefined||d==null||d.community==null||d.area==null||d.community.length==0||d.area.length==0){return c}var e;e=d.area[d.area.length-1];if(_.values(e)[0]==0){return c}e=d.community[d.community.length-1];if(_.values(e)[0]==0){return c}return d};a.priceTrend.prototype.dateTranslate=function(c){return parseInt(c.slice(-2))-1};a.priceTrend.prototype.addNpv=function(c){b(".compare-info").on("click",".compare-item",function(){var d=b(this).data("track")||"zjzs_click";if(ajk&&ajk.Logger){ajk.Logger.sendSoj({page:d,site:"anjuke-npv",pageName:d})}else{if(J&&J.site&&J.site.trackEvent){J.site.trackEvent(d)}}})}})(jQuery,ajk.chart);(function(a){a("body").on("copy",function(){return false})})(jQuery);(function(){var php_data=$("#php_data"),lookLike=eval("("+php_data.attr("recomm")+")"),recomNear=eval("("+php_data.attr("recomNear")+")"),iszhutui=php_data.attr("iszhutui"),rentToBuy=eval("("+php_data.attr("rentBuy")+")");init();function init(){ajaxEvent("/v3/ajax/viewrecommend/",lookLike,"1");ajaxEvent("/api/rec/pagerec/",recomNear,"0")}function ajaxEvent(url,data,type){var php_data=$("#php_data"),commname=php_data.attr("commname"),brokername=php_data.attr("brokername");$.ajax({timeout:20000,url:url,type:"get",data:data,success:function(data){if(data&&data.status&&data.status=="ok"){if(type=="1"){if(data.data.like_list&&data.data.like_list.length>3){tmpHtml(data.data.like_list,"interestRecommend","相似房源");$(".interestRecommend").addClass("nav-scroll").show();$(".ctr-recommHouse").addClass("ctr-show")}if(iszhutui!="1"&&data.data.look_list&&data.data.look_list.length>0){tmpHtml(data.data.look_list,"propSimilarBox","看了又看");$(".propSimilarBox").show()}if(data.data.guess_like&&data.data.guess_like.length>3){tmpHtml(data.data.guess_like,"recommendGuess","猜你喜欢");$(".recommendGuess").show()}if(data.data.rent_buy_list&&data.data.rent_buy_list.length>3){return;tmpHtml(data.data.rent_buy_list,"recommendRentBuy","租得起买得起");$(".recommendRentBuy").show()}if(data.data.near_list&&data.data.near_list.length>3){tmpHtml(data.data.near_list,"recommendNear","附近房源");$(".recommendNear").show()}}if(type=="0"){if(iszhutui=="1"&&data.results.main_push_props&&data.results.main_push_props.length>0){tmpNearHtml(data.results,"propSimilarBox",1);$(".propSimilarBox").find(".title").html(brokername+"的主推房源");$(".propSimilarBox").show()}}}}})}function tmpNearHtml(data,id,iszhutui){var html="",head='<div class="ajax_prop"><ul class="cf box">',foot="</ul></div>",icon=iszhutui?'<i class="iconfont">&#xE040;</i><i class="icon-bg"></i>':"",from=iszhutui?"?from=haozu_page_rec_right&spread=mainpush_p":"?from=zufang_page_rec_fjfy";if(iszhutui){var jsonTag='"entry":"'+data.sojDataMainPush.entry+'","proids":"'+data.sojDataMainPush.propParam+'","tradeType":"2"';ajk.Logger.sendSoj({page:"Haozu_Hp_View",pageName:"Haozu_Hp_View",site:"anjuke-npv",customparam:'{"v":"'+data.sojDataMainPush.v+'","hp":"'+data.sojDataMainPush.hp+'","hpPage":"Haozu_Hp_View","channel":"3","userType":"0","userid":"0",'+jsonTag+"}"});data=data.main_push_props}for(var i=0;i<data.length;i++){html+='<li class="rec_common_con">'+icon+'<img class="rec_common_img" title="'+data[i].TITLE+'" width="150" height="115" src="'+data[i].IMAGESRC+'"><a class="rec_common_title" target="_blank" data-sign="true" data-trace="{viewandview_1:'+data[i].PROID+'}" title="'+data[i].TITLE+'" href="'+data[i].LINK+from+'" pos="'+i+'">'+data[i].TITLE+'</a><p class="rec_common_price">'+data[i].PROPRICE+'<span>元/月</span></p><p class="rec_common_info">'+data[i].ROOMNUM+"室"+data[i].HALLNUM+"厅，"+data[i].FITNAME+'</p><p class="rec_common_name">'+data[i].COMMNAME+"</p></li>"}$("#"+id).html(head+html+foot);bindEvent(id)}function tmpHtml(data,id,title){var html="",like=(id=="propSimilarBox")?"":' <h5 class="gray" style="display:none;">'+$("#php_data").attr("commname")+"</h5>",head='<div class="ajax_prop"><div class="title"><h4>'+title+"</h4>"+like+'</div><ul class="cf box">',foot="</ul></div>";if(id=="propSimilarBox"){from="?from=zufang_page_rec_right"}else{if(id=="interestRecommend"){from="?from=zufang_page_rec_xsfy"}else{if(id=="recommendNear"){from="?from=zufang_page_rec_fjfy"}else{if(id=="recommendRentBuy"){from="?from=zufang_page_rec_zdqmdq"}else{from="?from=zufang_page_rec_cnxh"}}}}for(var i=0;i<data.length;i++){var price_str=id!="recommendRentBuy"?"元/月":"万";from=id!="recommendRentBuy"?from:"?from="+data[i].from+"&spread="+data[i].soj;var urlfrom=data[i].url+from;var ppfy_class="";if(data[i].is_ppgy==1){urlfrom=data[i].url+"?from=ajkp_zf_detail_ppgy_fy&logofrom=anjuke";ppfy_class="xs-ppgy"}var video_html="";if(data[i]["has_video"]+""=="1"){video_html='<i class="v-small"></i>'}html+='<li class="rec_common_con '+ppfy_class+'"><img class="rec_common_img" title="'+data[i].title+'" width="150" height="115" src="'+data[i].img+'">'+video_html+'<a class="rec_common_title" target="_blank" data-sign="true" data-trace="{viewandview_1:'+data[i].id+'}" title="'+data[i].title+'" href="'+urlfrom+'" pos="'+i+'">'+data[i].title+'</a><p class="rec_common_price">'+data[i].price+"<span>"+price_str+'</span></p><p class="rec_common_info">'+data[i].room_num+"室"+data[i].hall_num+"厅，"+data[i].area_num+'平米</p><p class="rec_common_name">'+data[i].comm_name+"</p></li>"}$("#"+id).html(head+html+foot);bindEvent(id)}function bindEvent(id){var list=$("#"+id).find("li");list.each(function(k,v){$(v).on("mouseenter",function(){$(v).addClass("hover")});$(v).on("mouseleave",function(){$(v).removeClass("hover")});$(v).on("click",function(){$(v).find("a")[0].click()});$(v).find("a").each(function(k,v){$(v).on("click",function(e){if(e&&e.stopPropagation){e.stopPropagation()}else{window.event.cancelable=true}})})});if(id=="interestRecommend"){$("#interestRecommend").find(".xs-ppgy").on("click",function(){ajk.Logger.sendSoj({page:"track_zf_page_ppgy_fy_click",pageName:"track_zf_page_ppgy_fy_click",site:"anjuke-npv"})})}}})();(function(a){a(".brokercard-scoredetail")&&a(".brokercard-scoredetail").on("mouseenter mouseleave",function(){a(this).find(".brokercard-sd-tip").toggle()})})(jQuery);(function(a){a.WChatOnline=function(b){this.ops=b;this.handleEvents()};a.WChatOnline.prototype={constructor:a.WChatOnline,handleEvents:function(){$.ajax({url:this.ops.getImgUrl,type:"get",dataType:"json",data:this.ops.param,success:function(b){if(b&&b.status==="ok"&&b.data){$("#chatImg").attr("src",b.data);$(".chat-card").addClass("show")}},error:function(b){}})}}})(APF.Namespace.register("broker.card"));$(function(){var j=$("#footseo-boxer");var c=$("#footer_seo_tab")||false;doms=c.find("li");c&&doms.each(function(m,l){$(l).on("mouseenter",function(){var k=$(l).attr("rel");$(".footseo_list").each(function(o,n){$(n).hide()});doms.each(function(o,n){$(n).removeClass("tab_on")});$(l).addClass("tab_on");$("#footseo_list_"+k).show()})});var j=$("#footseo-boxer");var d=j.find(".footseo_list_first").eq(0);var f=d.find("li");var e=j.find(".footseo_list_second").eq(0);var g=e.find("ul");f.each(function(l,k){$(k).on("click",function(m){m=window.event||m;m.preventDefault?m.preventDefault():(m.returnValue==false);f.each(function(o,n){$(n).removeClass("on")});g.each(function(o,p){$(p).css({display:"none"})});$(k).addClass("on");g.eq(l).css({display:"block"})})});var b=$("#footseo_list_1");if(b.length&&b.children().html()==""){$("#tab_1").css({display:"none"})}var a=$(".showcitymore");a.length&&a.each(function(m,l){$(l).on("click",function(){var k=$(l).attr("rel");$(".diff_footseo_list_li_"+k).each(function(o,n){$(n).show()});$("#hiddencitymore_"+k).show();$(l).hide()})});var h=$(".hiddencitymore");h.length&&h.each(function(m,l){$(l).on("click",function(){var k=$(l).attr("rel");$(".diff_footseo_list_li_"+k).each(function(o,n){$(n).hide()});$("#showcitymore_"+k).show();$(l).hide()})})});(function(){if(AJK.SeoRecommend.type==0){var a=1;var h=b("tab-"+a);f(h,a,1)}else{if(AJK.SeoRecommend.type==1){var a=2;var h=b("parent-"+a);c(h,a)}}function c(q,k){for(var o=0;o<q.length;o++){var l=q[o];var p=l.getElementsByTagName("ul");var r=l.getElementsByTagName("li");if(p.length){for(var m=0;m<r.length;m++){var n=r[m];if(d(n,"tab-"+k)){(function(u,v,s,t){t.onmouseover=function(){for(var j=0;j<u.length;j++){g(u[j],"btn-show")}for(var j=0;j<v.length;j++){g(v[j].getElementsByTagName("a")[0],"current-tab")}e(u[s],"btn-show");e(t.getElementsByTagName("a")[0],"current-tab")}})(p,r,m,n)}}c(p,k+1)}}}function f(r,t,o){if(r.length){var j=new Array(),p=r[0].parentNode.getElementsByTagName("ul");for(var l=0;l<p.length;l++){d(p[l],"parent-"+(t+1))&&j.push(p[l])}if(j.length){for(var l=0;l<r.length;l++){var s=r[l];(function(y,w,u,n,x){n.onmouseover=function(){for(var z=0;z<y.length;z++){g(y[z],"btn-show")}for(var z=0;z<w.length;z++){g(w[z].getElementsByTagName("a")[0],"current-tab")}e(y[u],"btn-show");e(n.getElementsByTagName("a")[0],"btn-show");if(x){for(var v=0;v<w.length;v++){g(w[v].getElementsByTagName("a")[0],"cur")}e(n.getElementsByTagName("a")[0],"cur")}}})(j,r,l,s,o)}t++;for(var q=0;q<j.length;q++){var m=[];for(var k=0;k<j[q].getElementsByTagName("li").length;k++){d(j[q].getElementsByTagName("li")[k],"tab-"+t)&&m.push(j[q].getElementsByTagName("li")[k])}f(m,t,0)}}}}function d(k,j){return k.className.match(new RegExp("(\\s|^)"+j+"(\\s|$)"))}function e(k,j){if(!d(k,j)){k.className+=" "+j}}function g(l,j){if(d(l,j)){var k=new RegExp("(\\s|^)"+j+"(\\s|$)");l.className=l.className.replace(k,"")}}function b(m){if(document.getElementByClassName){return document.getElementByClassName(m)}var k=document.getElementsByTagName("*");var j=[];for(var l=0;l<k.length;l++){if(d(k[l],m)){j.push(k[l])}}return j}})();(function(a,b){b.Zufang=function(c){this.ops=a.extend(c,{toolBarShowTop:a("#houseInfo").offset().top,navHeight:a(".toolbar").height(),hasGetTop:false});this.dom={toolBar:a("#toolBarFix")};this.bindEvent()};b.Zufang.prototype={constructor:b.Zufang,bindEvent:function(){var c=this;this.noCopy();setTimeout(function(){c.scrollNav()},2000);this.getPhone();this.linkSkip();this.addSoj()},noCopy:function(){document.body.oncopy=function(){alert("受保护的内容，暂不可复制！");event.returnValue=false}},scrollNav:function(){var c=this;a(window).scroll(function(){if(!c.ops.hasGetTop){c.getSiipTop();c.highScrollNav()}var e=Math.floor(a(window).scrollTop());if(e+1<c.ops.tops[0]){c.dom.toolBar.hide();return}c.dom.toolBar.show();for(var f=0;f<c.ops.topsLen;f++){if(e+1>=c.ops.reserveTops[f]){var d=c.ops.topsLen-f-1;a(".toolMenu").find(".ctr").removeClass("now");a(a(".toolMenu").find(".ctr")[d]).addClass("now");return}}})},getSiipTop:function(){var g=a(".nav-scroll");var d=this;d.ops.tops=[];d.ops.reserveTops=[];d.ops.topsLen=g.length;for(var e=0,c=g.length;e<c;e++){var f=a(g[e]);var h=Math.floor(f.offset().top-d.ops.navHeight);d.ops.tops.push(h);d.ops.reserveTops[d.ops.topsLen-e-1]=h}d.ops.hasGetTop=true},highScrollNav:function(){var c=this;a(".toolMenu").click(".ctr",function(f){f.preventDefault();a(".toolMenu").find(".ctr").removeClass("now");a(f.target).addClass("now");var d=c.getIndex(a(f.target).parent(".ctr-show"),a(".toolMenu").find(".ctr-show"));a(window).scrollTop(c.ops.tops[d])})},getIndex:function(f,e){for(var d=0,c=e.length;d<c;d++){if(f.is(a(e[d]))){return d}}return -1},linkSkip:function(){var c=this;a(window).trigger("scroll");a("#map_tab").click(function(){a(window).scrollTop(a("#commArround").offset().top-c.ops.navHeight)});a(".lookPriceTrend").click(function(d){d.preventDefault();a(window).scrollTop(a("#rentTrend").offset().top-c.ops.navHeight)})},getPhone:function(){var c=this;var f=false;var d=a(".bInfo2").find(".phone");var e=a(".broker-card").find(".card-phone-click").find("span");a(".card-phone-click").bind({mouseenter:function(h){a(this).addClass("phone-hover")},mouseleave:function(h){a(this).removeClass("phone-hover")}});var g=c.ops;if(g.isXh){a(".bInfo2, .card-phone-click").click(function(){if(f){return}d.text("号码获取中...");e.text("号码获取中...");a.ajax({url:c.ops.securityUrl,type:"get",dataType:"json",data:c.ops.getPhoneParam,success:function(j){if(j.status==="ok"&&j.data&&j.data.phone){var h=j.data.phone.substring(0,3)+" "+j.data.phone.substring(3,7)+" "+j.data.phone.substring(7);d.removeClass("phone-hover").text(h).css({"font-size":"20px","font-family":"tehoma",cursor:"auto"});e.text(h).css({"font-size":"20px","font-family":"tehoma",cursor:"auto"});a(".card-phone-click").unbind("mouseenter").unbind("mouseleave");f=true}else{d.text("点击查看电话");e.text("点击查看电话");alert("获取号码失败")}},error:function(h){d.text("点击查看电话");e.text("点击查看电话");alert("获取号码失败")}})})}else{a(".bInfo2, .card-phone-click").click(function(){if(f){return}d.text("号码获取中...");e.text("号码获取中...");a.ajax({url:"/v3/ajax/getBrokerPhone/",type:"get",dataType:"json",data:{broker_id:g.getPhoneParam.broker_id,token:g.token,prop_id:g.prop_id,prop_city_id:g.prop_city_id},success:function(h){if(h.code==0){d.removeClass("phone-hover").text(h.val).css({"font-size":"20px","font-family":"tehoma",cursor:"auto"});e.text(h.val).css({"font-size":"20px","font-family":"tehoma",cursor:"auto"});a(".card-phone-click").unbind("mouseenter").unbind("mouseleave");f=true}else{d.text("点击查看电话");e.text("点击查看电话");alert("行为异常，暂不可查看手机号")}},error:function(h){d.text("点击查看电话");e.text("点击查看电话");alert("获取号码失败")}})})}},addSoj:function(){var c=this;a(".lookPriceTrend").click(function(){c.sendSoj({site:"anjuke-npv",pn:a(this).data("track")})});a("#video-player-icon").click(function(){c.sendSoj({site:"anjuke-npv",pn:"pc_zfdy_vedioopen"})})},sendSoj:function(c){if(ajk&&ajk.Logger){ajk.Logger.sendSoj({page:c.pn,site:c.site,pageName:c.pn})}else{if(J&&J.site&&J.site.trackEvent){J.site.trackEvent(c.pn)}}}}})(jQuery,APF.Namespace.register("ajk.page"));